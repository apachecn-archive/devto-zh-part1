# 设计我们的堆栈

> 原文:[https://dev.to/stefandorresteijn/designing-our-stack](https://dev.to/stefandorresteijn/designing-our-stack)

没有所谓的*完美堆栈*。每个应用程序都有不同的要求，您的堆栈应该相应地调整。对于 Sjauf，我有独一无二的机会和责任从头开始创建我们的堆栈，用一个遗留应用程序来为我们的旧应用程序保持运行。设计这个堆栈是一个美丽的挑战，它教会了我很多。让我带你看看我的过程。

## [](#current-stack-and-our-requirements)当前堆栈和我们的要求

当我加入这家公司时，我们只有一个概念证明。我们有用 Swift 编写的 iOS 应用程序，它与 Python/Django API 通信。虽然这种堆栈选择没有任何问题，但它远远不能满足我们的需求。

首先，Swift 非常适合 iOS 应用，但出于某种原因[我们无法让它在 Android 上编译](https://media.giphy.com/media/MqxZxTlvcY5BS/giphy.gif)。我们需要一个可以在 Android 和 iOS 上运行的单一代码库，最好是不需要编写任何 Swift *或* Java。我们仍然是一个小的创业公司，所以我们没有所需的资源来为我们所有的平台编写完全原生的应用程序。

其次，我接这份工作的时候也不知道什么 Python。我读过代码库，并对用 Python 构建的应用程序做了一些小的改动，但我从未用这种漂亮的语言构建或维护过整个应用程序。我本可以拿起它继续在现有的应用程序上构建，但是如果给你机会来构建你自己设计的东西，为什么不使用最好的工具呢？我们工作的代码是不合格的，不管我们选择什么语言/框架，大部分都需要重写，所以我们选择放弃它。

最后，我们有一个应用程序与一个后端应用程序通信。整体架构为很多公司工作，但是我们不知道一年后我们会在哪里。我们可能会变得如此成功，以至于不得不雇用一大批开发人员，或者我们可能会彻底失败，被迫转向。无论哪种方式，微服务架构都会让我们的生活变得更加轻松。能够即插即用整个应用程序意味着我们可以在与私人驱动市场无关的项目中重用我们的大部分代码。

## [](#stack-choices)堆栈选择

当设计一个应用程序时，许多因素都会发挥作用。几乎每一种现代 web 开发语言/框架都可以做他们的竞争对手所做的事情。几乎任何语言都是不错的选择，只要你能自如地书写它。然而，当要编写承载整个公司及其所有流程的应用程序时，我认为应该使用合适的工具。当我们查看我们的堆栈时，一些项目比其他任何项目都有绝对的优先权。

*未来证明，模棱两可的架构*
在我之前的公司，我了解了很多关于微服务架构的知识。在那之前，我已经习惯了许多应用程序今天仍在运行的整体架构。维护一个单一的代码库是很容易的，并为您提供了对整个平台数据的大量访问。有了微服务，关系数据变得更难实现，当谈到分离功能时，你不得不非常严格。然而，使用多个一起运行的小应用程序可以更好地控制您的扩展、服务器分析和功能重构。

在过去，我遇到过许多低效的遗留代码问题。从头开始重写整个代码库并不是快速提高公司效率的好方法，但是对于 monolith 来说，这有时是必需的。借助微服务架构，您可以简单地一次一个地替换应用程序的小部分。对我们来说，这是一个简单的要求，因为我们知道我们必须在无法编辑代码的情况下替换现有 monolith 中的功能。

我们的架构由一个网关应用组成，它与我们所有的微服务进行通信。现在这意味着它只与我们的 monolith 通信，但随着我们将功能从那个庞然大物转移到更小、更高效的应用程序中，网关将与所有应用程序通信，允许我们的应用程序只向一个应用程序发送 GraphQL 查询。我们还有一个内部网关，微服务使用它来相互通信。他们可以更多地访问彼此的数据，但必须通过非常严格的验证。

*发展速度*
当你像我们这样小的时候，你是在用有限的资源工作。这意味着，如果开发一个应用程序需要两倍的时间，那么没有一种语言会让你的内存负载或 CPU 使用率稍微降低。我们根据我们编写的功能来选择语言。一些微服务可能是用 RoR 语言编写的，而其他的将运行在 JavaScript 上。然而，由于其灵活性和正常运行时间的混合，它们中的大多数将会用 Elixir/Phoenix 编写。(另外，我真的很喜欢这个语法)

初创公司需要吸引最优秀、最有动力的开发人员。这意味着你需要给他们提供一些很酷很前沿的东西。因为我们没有钱买小睡舱或室内篮球场，所以我们只能选择酷酷的科技产品。谁想加入一家使用 PHP、MySQL 和 REST API 的公司？虽然这只是我决策过程中的一个小因素(效率、开发者的乐趣和未来的可行性更重要)，但它确实影响了我最终的选择。

## [](#conclusion)结论

在一天结束的时候，你需要使用你觉得舒服的东西。制作网站、应用程序和桌面应用程序很难，你需要尽可能让它变得简单。另一方面，你需要确保你的软件是高效的，干净的，并且易于添加功能。选择正确的堆栈可以帮助你，但它取决于你自己，创造真正令人惊叹的东西。

在 Sjauf，我与非常信任、敏捷和年轻的人一起工作。我们都想做出尽可能好的产品，并相互信任，各尽所能。这意味着我可以自由选择自己的堆栈，并完全按照我的意愿实现它，这不是大多数人能做到的。我很幸运，因为我以前的工作让我学习了很多语言和框架。有些人已成为热门，有些人我已发誓永远离开。

你的筹码是多少？