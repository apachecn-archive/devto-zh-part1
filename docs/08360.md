# 为我们选择 TSDBs - InfluxDB

> 原文:[https://dev.to/stevemushero/choosing-tsdbs-为我们涌入 db](https://dev.to/stevemushero/choosing-tsdbs---influxdb-for-us)

时序数据库是强大而有趣的野兽。我们正在为我们的 ops stack Total Operations Platform 选择一个新的，用于系统的所有部分，从收集现场指标，到驱动我们的 AI &专家系统，到处理我们的内部应用程序日志，功能计时和其他使事情运转的数据收集(在这方面效仿 Etsy)。

我们研究了所有不同的参与者，包括 Prometheus、OpenTSDB、Graphite 和其他公司。最后，我们选择了 InfluxDB 及其相关工具，原因有很多，我想在这里列出来。

首先，我们需要在多维度上进行标记，这是新的标准，因此使旧的类似石墨的公制名称标记概念变得过时。我们都需要一个度量名称和许多高度可变的标签，这些标签被编入索引以便快速查找，比如主机名、区域名、http 请求路径、日志指纹等。InfluxDB 和大多数新的 TSDBs 都支持这种方便的多标记概念。

InfluxDB 还允许多个数据字段，这使得收集多字段数据变得容易，例如 CPU / RAM 使用或每秒的 SQL 查询类型。标签对字段和索引/聚合模型都很清晰，令人信服。

第二，我们从任何地方获取数据，由于 InfluxDB 是后来者，它支持所有类型的数据馈送，从它自己的 Telegraf 到 statsd 到 collectd 到各种 HTTP 端点到 UDP(对于从应用程序代码登录来说是完美和必要的)。这使我们能够与其他系统集成，并随着时间的推移迁移到最合适的系统，并尽可能使用不断增长的 Telegraf 生态系统。

InfluxDB 大部分是自动聚合/缩减系统，与其他系统类似，在数据处理方面非常有帮助，这是我们在大规模监控系统中非常熟悉的。

第三，使用尽可能接近 SQL 的查询语言是天才之举，因为这使得它更容易使用，同时避免了因不同而带来的无尽的错误和挑战。我讨厌 JSON 和各种随机查询语言，甚至更糟糕的是，类似糟糕的 ORM 的代码内定制逻辑函数。只要说不，尽可能多地使用 SQL，就不会有人受伤。

**使用 SQL 是一个巨大的优势**

与使用 SQL 相关的是，大多数命令与 MySQL 非常相似，我们知道并喜欢 MySQL，例如“显示数据库”或“使用数据库名”。这只是让生活更容易，提高效率，同时减少错误和混乱。

第四，我们仔细观察了越来越受欢迎的 Prometheus，但是作为一个监控系统，只拉代理模型是 SaaS 系统的一个障碍。我们的旧系统就是这样工作的，我们不能继续要求客户为我们开放端口；推送网关并不是真正的解决方案。此外，部分由于拉模型，Prometheus 不允许随数据一起发送时间戳，这使得它对于批量收集和发送毫无用处，而这正是我们进行高分辨率收集所需要的，更不用说在全球范围内连接性差的环境中了。

**没有一种推送模式是普罗米修斯模式的决定性因素**

第五，使用 Go 使得 InfluxDB 的安装和配置变得异常简单，而且它有适用于各种平台的软件包，包括本机 MacOS、Windows、各种 Linux 发行版等。简单，容易，和宣传的一样管用。例如，与依赖 Hadoop 的系统或使用 Go、Python、Java 和 Ruby 的系统完全不同。

最后，文档真的很好，正如商业提供商所预期的那样。

当然，InfluxDB 相当新，在集群和存储模型方面遇到了一些挑战/变化，因此我们将看到这些如何大规模实施，但目前我们愿意将其作为最适合我们需求的产品。我们仍然需要确定我们是否真的会让“涌入”的 Kapacitor 发出警报，但是我们会看到的。

点击 [OpsStack.io](https://www.OpsStack.io) 了解更多关于我们整体运营平台的信息