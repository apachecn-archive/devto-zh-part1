# 谁害怕代码审查？

> 原文:[https://dev . to/nicobruenjes/谁害怕代码-评论](https://dev.to/nicobruenjes/who-is-afraid-of-the-code-review)

*这个帖子最初是[在](https://devsatwork.com/2017/05/10/afraid-code-review/) [devs@work](https://devsatwork.com/) 上发布。*

在阅读了[打造更好的代码评审](https://dev.to/vaidehijoshi/crafting-better-code-reviews)之后，我重新思考并修改了我的一篇关于我们的代码评审过程的旧文章。一半是关于我们如何进行代码评审的陈述，另一半是我对它们应该如何的愿望。

## [](#code-reviews-in-workflow)工作流中的代码评审

我们对几乎所有代码进行同行代码评审。这与 github pull 请求相结合。也就是说，一个团队成员和它的作者一起评审代码。我们做一对一的代码审查，因为我们仍然是一个小团队，我们彼此相对了解。两个人合作寻找 bug，控制合理性，代码清洁度，编码风格和可维护性。一方面，作者和评审者应该互相学习如何编写和阅读代码，另一方面，一方学习另一方编程的功能或特性，这样关于项目的知识就可以有机地传播。此外，这也是新团队成员融入代码和团队的起点。事实是，我们从评审开始时相对幼稚，当我们实现我们的工作流时，我们说“在拉式请求时，有人应该做同行代码评审”，这是摆在首位的。一个货物邪教，感觉更专业，但迄今为止效果不错。

## [](#collective-code-ownership-vs-personal-creativity)集体代码所有权与个人创造力

“这个代码是我们的代码”，应该是所有文件中的第一条注释。我们一直努力培养我们的集体代码所有权，强调“我们的”。所有的拉请求都应该被看作是代码库的智能扩展。大多数情况下，没有对错，只是有时味道相反。对于经常讨论的问题(如制表符与空格，骆驼案例与蛇案例…)，我们开发了我们的编码指南。除此之外，每个程序员都有自己的风格(惊喜！).尊重这些风格和方法上的差异，另一方面不要为自己的代码辩护，这是每个代码评审的巨大困难和责任。代码作者和评审者应该在中间会面，希望在那里找到最好的代码。两人都应该觉得自己为代码库增加了一些东西。这听起来没那么深奥。

## [](#the-review)回顾

在这里，我们有一些基本的规则，并注意到一个好的审查将如何工作。首先，双方都应该为复习预留足够的时间。两者都应该做好准备。作者应该在…之前检查他的代码

*   他用[好的提交消息](http://chris.beams.io/posts/git-commit/)提交小块
*   在适用的地方向代码添加了注释
*   移除了 todo 注释并注释掉了代码
*   对照编码指南进行自我检查
*   重新检查变量和类名

审查者将在审查之前阅读拉取请求的代码，最多是完整的差异加上相应的故事或票证。双方应该在平静的气氛中聚会(有人要咖啡吗？).首先，评审者会询问他不理解的代码块，或者发现它们有问题。如果需要，他会提出变更请求。如果可能的话，审阅者和编码者应该一起进行这些更改。你可以使用 line comments 和 github 中的评论工具来做到这一点，但直接与对方交谈是更好的选择，至少是通过 Skype 或 screenhero。如果评审者有更改请求，他会提出请求，而不是自己进行更改。差异或补丁的交换可以是合理的。评审者必须解释变更请求，请不要阻挠或挑剔他人。另一方面，不要表现出不尊重，不评论任何事情或总是快速沉默的批准。

## [](#what-are-we-looking-for)我们在寻找什么？

这个世界上没有完美的代码。你可以讨论最小的 hello world 程序的写作风格。如果你写的代码超过 10 行，bug 就会频繁出现。尽可能多地找到他们是首要任务。另一个是创建可维护的代码。我们寻找…

*   一个错误、无限循环、缺少错误处理、反模式、错误范围
*   浏览器兼容性
*   真实性:广告上的代码是什么，订购了什么
*   效率:速度快吗，内存效率高吗？回流和重画或者 DOM 访问最小化了吗？
*   代码复制
*   测试:是否有足够的测试，测试是否合理？
*   给事物命名:是最难的部分，但是所有的名字都有用并且符合惯例吗(比如 BEM)？
*   编码指南
*   代码清洁度
*   注释**和**文件

讨论的顺序:首先是不理解或不可理解的代码，不工作的东西，然后是代码风格和清洁。总是先沟通，然后一起行动。注意你自己:如果你的评论者不明白某件事，很可能其他人也不会明白。互相学习。无所不谈。

## [](#at-any-cost)不惜任何代价？

不。我们想要最好的代码，最好的代码*可能的*。你自己的编码风格可能不是世界上最好的。作者的编码风格也许不是最糟糕的。区分你的喜好和功能需求。如果您对某些问题进行了长时间的讨论，那么只要代码有效，在其他地方就不要那么严格。在时间和质量的交叉点上，应该充分利用容差。

在 unsplash.com 的拍摄的照片。