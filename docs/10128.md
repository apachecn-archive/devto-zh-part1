# 解密用于身份验证的 OAuth2

> 原文：<https://dev.to/grahamcox82/demystifying-oauth2-for-authentication>

我玩过 OAuth2 很多次，OpenID Connect 玩得较少——编写客户端和服务器实现。虽然规格实际上非常全面，但当你第一次开始时，有许多想法可能很难掌握。因此，这里有一个尝试，使整个事情更容易理解。

在本质上，OAuth2 是一个认证系统。相反，它是关于委托授权的。这意味着这是一个允许一个系统代表另一个用户的系统。

迷茫？这里有一个例子。乔正在使用某种先进的 PhotoSite。某个粉丝想代表乔在 Google+上发帖。因此，实际情况是，某个 FancyPhotoSite 启动了与 Google 的 OAuth2 会话，要求 Joe 登录。如果 Joe 接受，最终结果是某个 FancyPhotoSite 从 Google+获得了一个访问令牌，表示 Joe 允许在那里发帖。一些 FancyPhotoSite 现在可以使用这个访问令牌在 Joe 的允许下向 Google+ *发帖。*

那么我们如何使用它进行身份验证呢？在某种程度上，这是相对简单的。一旦你获得了访问令牌，你就有了某人已经通过 Google+认证的证据。访问令牌没有告诉你的是已经验证了谁的身份。有两种方法可以解决这个问题。

1.  如果认证系统使用 OpenID Connect，那么您可以在认证时请求一个 id_token。这个 ID 令牌是一个特殊的令牌，其中包含刚刚通过身份验证的用户的 ID。
2.  您可以使用访问令牌从系统中检索当前用户的用户配置文件。这通常可以提供更多的信息，而不仅仅是您可以利用的用户 ID，但是要小心使用您不应该访问的数据。

在这一点上，我们有证据证明某人已经认证，并且我们有证据证明他们是谁。这就是我们使用 OAuth2 进行身份验证所需的一切。现在，您可以在应用程序中继续工作，因为您知道用户已经被某个人验证过，并且根据您自己的数据有足够的信息知道他们是谁。