# 尊重 API

> 原文：<https://dev.to/tamas/respectful-apis>

有一个著名的视频介绍了鲍比·麦克菲林，他展示了五声音阶的力量。公平地说，有许多视频符合这一描述，但我想特别谈谈一个，其中鲍比·麦克菲林在世界科学节的舞台上。他站起来，一边发出声音，一边开始做小跳跃，好像他自己变成了一件乐器，并要求观众一起唱同一个音符。他向左迈了一步，唱了一个不同的音符。现在沉默了，他开始左右跳跃，观众跟着在两个音符之间交替。然后他开始做一些看似意想不到的事情:他跳到了第三个位置，这是之前没有介绍过的。观众们毫无障碍地齐声唱出了准确的音符。观看视频:

[https://www.youtube.com/embed/ne6tB2KiZuk](https://www.youtube.com/embed/ne6tB2KiZuk)

挺有意思的，甚至可以宣泄，不是吗？据推测，这是可能的，因为我们的大脑中有一个共同的线路，允许使用我们共享的文化知识，也许是我们的遗传特征来找到第三个音符，而无需真正思考它。

那么什么是“尊重的”API，它与五声音阶有什么关系呢？

恭敬，这样拼写，是对“RESTful”(显然)的一种发挥，是 RESTful 的超集。这篇文章旨在强调一组良好的 API 设计实践。根据我的经验，当使用某个特定的工具(无论是 API 还是烤面包机)可以让他们快速达到目标，并且没有阻碍时，人们会表现出快乐。

恭敬的 API *尊重*其用户的时间。它是谦逊的，承认使用它本身不是目的，而是达到目的的一种手段。恭敬的 API 不要求用户学习全新的概念，除非这是不可避免的。它走路和说话就像它所在的特定生态系统中的普通生物。

## 绘制线条

然而，这不仅仅是一句“入乡随俗……”建议。这也是关于有意识地**在*实现细节*和*呈现给库用户的界面*之间划清界限**。您可能认为隐藏实现细节是显而易见的，但这不仅仅是声明私有成员。它是对*的 GUI 模拟，而不是*用一堆显示各种功能的图标填满半个屏幕。

为什么？因为向用户展示的每一点复杂性都会增加使用库的认知开销，并需要用户投入更多的时间。如果您拆下平板电脑的外壳，您就可以接触到所有可以焊接或拆卸的零件，前提是您有足够的知识在不损坏设备的情况下这样做。尽管如此，99%的 API 用户都不想弄乱系统的内部电路。他们只是想按下那个按钮来拍照或连接耳机。这是他们期望从你的 API 中得到的时间投资，而不是焊接在一个插孔连接器上。你不需要因为你能做到就让一切都变得可调整。取得良好的平衡。

## 命名事物

正确命名是尊重 API 设计的另一个要素。一个好的方法是想象你的用户会问的 StackOverflow 问题，并在 API 中使用相同的措辞来命名。为了说明这一点，我们来看看优秀的[请求](http://docs.python-requests.org/en/master/)库:

*   怎样才能让**得到**的请求？使用 **`get`** 功能。它的返回值是响应对象。
*   在得到响应后，我如何获得状态码？读取 **`status_code`** 属性。
*   我如何得到响应的编码？有一个属性叫做 **`encoding`** 。

你明白了。当然，这意味着你知道你的 API 的用例。这允许对向用户公开什么、使用什么样的缺省值以及选择正确的措辞做出有意识的、集中的决定。

## 第三注

`requests`的座右铭是“人类的 HTTP”。换句话说，它的设计考虑到了人的思维，这通过呈现给用户的语言选择和工作流来说明。

从某种意义上说，这是一种 UI(一个图书馆用户的 UI)。是的，不管你是否设计，你的 API 都会有一个 UX。请你的朋友用你的 API 执行一个特定的任务。如果他们卡住了，记下笔记。这些是你的 API 中的用户摩擦点。

一旦你知道如何在`requests`中发出 GET 请求，你也将知道如何发出 POST 请求。或者放。或者删除。诸如此类。这是为什么呢？您可能只阅读了文档中的 GET 示例，并且您的直觉告诉您*“如果我将这个`get`更改为`post`，我将发出一个 POST 请求*。你的直觉是对的。

鲍比·麦克菲林展示了两个音符，观众知道第三个音符会是什么。所以像这样设计你的 API。给它一个清晰的逻辑结构，有第三、第四、第五个音符，你的用户不用翻遍你的文档或在 StackOverflow 上提问就能猜到。这才是一个好的、受人尊敬的 API。