# 太空幽灵:我的万圣节调试恐怖故事

> 原文:[https://dev . to/yaphi 1/space-ghost-my-万圣节-调试-恐怖-故事-12p](https://dev.to/yaphi1/space-ghost-my-halloween-debugging-horror-story-12p)

昨天我遇到了一只讨厌的虫子。

我需要集成一些第三方代码，将脚本动态插入到页面上。

它被宣传为简单的复制和粘贴，但这些事情很少。

我把代码粘贴在控制台里，也不行。很好。是时候穿上我的故障诊断靴了。

那么问题是什么呢？

*   是 URL 被插入的方式(。src vs setAttribute)？-没有
*   是脚本 url 本身吗？-没有
*   这是跨产地的问题吗？-没有
*   是我使用这段代码的网站吗？-没有
*   是浏览器的问题吗？-没有

最后，我问自己，基本的脚本插入是否已经完全停止了。

我为代码重写了测试用例，只是为了确保没有任何错误。然后疯狂的事情发生了。新代码起作用了。

疯狂的部分？这与不起作用的代码完全相同。

困惑之余，我将这两个版本的代码放入一个比较检查器。

然后我看到了问题:[隐形空间](https://en.wikipedia.org/wiki/Zero-width_space)。

集成代码来自一个 PDF，它自动插入不需要的零宽度空格，这意味着代码会中断，而违规字符会保持不可见。

一旦我删除了令人毛骨悚然的太空幽灵，这个问题就消失了。

要点提示:
如果你需要粘贴来自 PDF、HTML 页面、Excel 表格或任何非纯文本文件的代码，运行它通过某种验证器以确保没有任何不想要的字符。

我希望这有助于你遇到类似的问题。

*本帖原载于[简单步骤代码](https://simplestepscode.com/)T3】*