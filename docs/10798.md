# 字符串插值——现在很热门

> 原文:[https://dev.to/horia141/string-interpolation 现在很热-2coh](https://dev.to/horia141/string-interpolation---so-hot-right-now-2coh)

我关于现代编程语言的一个理论是，它们都在慢慢地向两到五个原型靠拢。这不仅发生在特性层面，也发生在语法、库和围绕语言构建的整个生态系统层面。

这是一个更广泛的想法，我将在另一篇文章中探讨。现在，我要谈谈这种现象的一个特例。大量应用程序设计语言采用字符串插值作为从程序数据产生文本输出的方法。

我指的是做以下事情的能力:

```
var a = 10, b = 20;
var c = a + b;
System.Console.PrintLn($"a = {a} and b = {b} and c = a + b = {c}"); 
```

并将`a = 10 and b = 20 and c = 30`视为输出。

这并不是一个突破性的东西，但它是在最低抽象层次——代码行——真正帮助程序员的小特性之一。

上面的例子离经典的`"a = %d and b = %d and c = %d"`格式`printf`并不远，但是对于 grok 来说已经更清晰了。这个特性的优点和强大之处在于，在一个格式表达式中可以有任意代码，只要它是一个表达式。这里有一个简洁的 Python 例子:

```
o.write(f'Expires: {expire_time.timestamp()}') 
```

对于静态类型语言，可以在编译时检查字符串中的表达式是否一切正常。此外，由于格式化字符串可以被编译器分析，因此可以得到比 printf 样式的字符串更好的保护。

在我的脑海中，有一些主要的语言支持它:C#，Dart，JavaScript，Python，Ruby，Perl，PHP，Tcl，基本上所有的 shells。不支持这一点的主要应用程序级语言是 Java。

添加到一门语言中相对容易，所以我希望在不久的将来，它会成为大多数应用程序构建语言，因为它主要是对常见库调用的语法转换。