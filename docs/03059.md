# 无甲骨文押注区块链

> 原文:[https://dev . to/Julien 51/Oracle-less-bets-on-the-区块链-9ok](https://dev.to/julien51/oracle-less-bets-on-the-blockchain-9ok)

区块链是一个分散的数据库，其数据是可信的，因为它是其他先前记录的交易的总和。这些数据可以作为各种交易的输入(称为智能合同)。

然而，挑战之一是区块链实际上没有太多的物理数据。解决这个问题的方法是使用被称为神谕的可信的第三方，他们被期望说出真相。他们的工作是捕捉“真实世界”的知识，并将其存储在区块链上。这些数据变得不可改变，成为长长的事务链的一部分。

一个明显的金融例子是股票价格。为了编写一份能够重新平衡投资组合的智能合约，人们必须使用 oracle 来捕捉该投资组合中资产的股票价格。

一些人预计，在一个所有可能的数据源都可以在区块链上“本地”获得的世界里，oracle 最终会被淘汰。例如，如果股票实际上在区块链交易，那么价格数据本身在区块链，重新平衡算法不需要使用和依赖第三方 oracle。

[![consensus](../Images/ae8cdbf12b356c35457bd43fafbca92a.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--NO3oPFvT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/sjvt6vdnphjizmgym7pl.jpeg)

## [](#can-we-go-without-oracles)没有神谕我们能走吗？

如果我们在过去几周见过面，你知道我这些天在研究区块链。(但不，我不是在做 ICO！).作为这项工作的一部分，我想看看我们是否真的可以不依靠神谕，而只依靠参与者的良好行为和他们在正确的激励下形成共识的能力。赌注是区块链世界的关键概念之一，我认为这解决了我们的问题。

### [](#the-smart-contract)智能合约

让我们举一个简单的例子:我们想写一个智能合同，让任意数量的人对一个结果打赌。为了简单起见，我们只使用二进制抽奖(人们打赌的事情实际上发生或不发生)。

> 在“传统”智能合约中，参与者将被要求就陈述的真假打赌，他们的赌注将放在一个共享的钱包中。然后神谕会传达真相，所有赌对结果的参与者应该能够收回他们在共享墙中的份额。

如果我们不想依赖第三方神谕，我们将不得不要求参与者自己提供真相，然后才能支付。我们的智能合同将有 3 个阶段:

*   下注阶段
*   共识形成阶段
*   支付阶段

## [](#consensus-formation)共识形成

对人类来说不幸的是，我们不得不假设恶意:一些参与者会说谎，并将谎言作为真理提交。防止这种情况的一种方法是要求“股份”。智能合约只允许人们下注，如果他们下注的金额大于他们的赌注，以显示他们贡献真理的意图。
一旦事件实现，如果所有玩家希望他们的赌注返回给他们，他们需要贡献其结果。如果他们不这样做，那么他们的股份就没了。参与者通过对实际结果进行投票来做到这一点。一旦足够多的参与者投票，**真相就通过观察哪一个命题获得了更多的“投票”来决定，与其赌注份额相比**(不一定是大多数)。

所有下注价值正确的玩家都有强烈的动机去投票:他们不仅能拿回赌注，还能分享他们的累积奖金。

另一方面，下错赌注的玩家也有动力去投正确的赌注，因为他们可以拿回他们的赌注。如果他们不这样做，他们不仅会输掉赌注，还会输掉他们的股份。如果所有的输家都是骗子，那么理论上，他们可以破坏智能合同，但如果他们中只有一个人确实是公平的参与者，那么除了这个人以外，所有的输家都将失去他们的股份。这是一个典型的囚徒困境，让我们期望大多数失败者不会为了不使他们的处境恶化而试图撒谎。

### [](#an-example)举个例子

为了澄清事情，让我们举个例子:人们被问及这个故事在 2017 年 11 月 5 日之前是否会获得超过 100 次阅读。他们每个人都被要求在他们认为最有可能的结果上下 1 美元的赌注，他们还被要求在 11 月 5 日之后下注 2 美元来贡献真相。投注只在那个帖子公开之前开放(我和玩家分享了草稿)。

在出版的时候，65 人说是的，这个故事足够好，可以得到 100 次阅读，35 人打赌它不会。我们有一笔 100 美元的奖金，将由获胜者分享。

时间流逝，我们终于在 11 月 5 日。不幸的是(我有偏见)，这个故事没有得到它应得的 100 次阅读。每个参与者都被要求对真相做出贡献。在 35 个正确下注的人中，有 34 个贡献了真相(最后一个忘记了赌注和故事！).下错注的 65 个人中，大部分是诚实的(或者太害怕他们的失败者比他们更诚实)，所以其中 50 个人说出了真相。其中 13 人懒得投票，因为他们太失望了，不太关心他们的股份，2 个骗子撒谎。

投票结果非常清楚:85 人(97%的投票)声称这个故事没有得到 100 次掌声，而只有 35%的人支持这个观点。形成了共识，这 85 人拿回了他们的股份。winers 夫妇也每人获得 2.8 美元的奖金。

* * *

在我看来，分散赌注是区块链经济和激励机制中最重要的元素之一。在这个例子中，我们可以鼓励(enforce？)良好的行为，实际上把每个参与者都变成了先知，最终消除了分享和信任第三方的需要。

移除第三方 oracle 的好处之一是还可以降低运营此类合同的成本:无需为该 oracle 付费。在上面的例子中，100%的赌注被传递给获胜的参与者。这家公司完全可以用失去的股份作为经营合同的报酬。

此外，这个“框架”还可以增加许多其他方面。例如，可以通过在下注期和共识形成期之间增加一个“冷却”期来增加交易下注的能力，参与者可以在此期间交易他们的投票(并提前兑现或最小化风险敞口……)。

原来[发表在那里](https://medium.com/@julien51/oracle-less-bets-on-the-blockchain-dfc6a44f6d6)。