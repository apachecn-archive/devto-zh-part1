# 为什么我会纠结于节点

> 原文:[https://dev.to/grahamcox82/why-i-struggle-with-node](https://dev.to/grahamcox82/why-i-struggle-with-node)

我承认，我其实挺喜欢 Node.js 的，尤其是 ES6/ES7 这个品种。它并不完美，但什么是语言呢？但它是一种让 webapp 运行的非常快速的方法，在客户端和服务器端使用相同的心智模型，甚至在两者之间共享实际的 API 模型层。那是巨大的。这使得开发非常高效。它也有很多工具来加快开发速度。

然而，每次我使用它，我最终都会感到沮丧。这和语言无关。这一切都与工具生态系统有关。

我是一名企业 Java 开发人员。有一些我习惯作为标准的工具——或者作为构建系统的一部分，或者作为语言的一部分。正如我之前说过的，我使用 Kotlin 使其中一些更难使用，如果可能的话，但不是全部。

我日常使用的工具有:

*   构建系统——在节点世界中，我通常会使用 [Grunt](http://gruntjs.com) 来完成这个任务，但这并不总是容易的。不过，我是 Java 世界的行家，这是一场势均力敌的比赛。
*   单元测试——在节点世界里我通常用[摩卡](http://mochajs.org)、[柴](http://chaijs.com)和[西农](http://sinonjs.org)。我最近才发现 [TestDouble](http://github.com/testdouble) 虽然我更喜欢 Sinon。
*   编译——这比人们想象的更重要，因为它很早就发现了某些类型的错误。我通过 [Babel](http://babeljs.io) 使用 ES6/ES7 的事实给了我这个
*   代码覆盖率——Node 确实有这个，但是因为我通常使用 transpiler，所以很难实际使用
*   静态检查——Node 确实对这些有一些支持，但没有我希望的那么多。具体来说，我最终使用了 [ESLint](http://eslint.org) 和 [JSCPD](https://github.com/kucherenko/jscpd)
*   集成/验收/验证/E2E 测试——这是开始变得非常混乱的地方
*   Logging - Node 做到了这一点，但它并不像我习惯的那样好。
*   调试——同样，Node 可以做到这一点，但感觉非常笨拙
*   应用程序连接——在 Java 中，我用 Spring 来做这个。在 Node 中，您使用单独的模块并需要。这是可行的，但并不干净，因为你不能简单地替换掉一个替代品，或者注入一个 mock 来进行测试。

那么，为什么集成测试如此混乱呢？集成测试是将整个服务作为一个整体，针对真实的数据层进行测试，并确保它按预期工作。如果有任何第三方服务依赖——例如其他 APIs 那么这些可以合理地模拟出来，但是整个核心逻辑应该存在。

在 Java 世界中，使用 Spring，我可以非常容易地做到这一点。如果我使用 SQL 数据库，我使用 HSQLDB。如果我使用 MongoDB 或 Postgres，那么我可以使用来自 [Flapdoodle OSS](https://github.com/flapdoodle-oss) 的奇妙的库。如果我使用 Neo4J 或 Elasticsearch 或 Solr，那么我可以在进程中运行它们，因为它们都是 Java。诸如此类。最棒的是，它完全内置于应用程序和构建系统中，不需要做任何事情就能让它工作。你只需运行

`mvn install`

，一切都会发生。

在节点世界里，我目前能找到的最好的是使用 Docker。这已经足够好了，但是对于开发人员来说，进行设置是一个很大的负担。他们需要确保 Docker 安装正确——这并不总是小事。他们需要确保本地机器上的某些端口可用。他们需要知道如何设置和运行这一切。仅仅是让第一个构建工作起来就很重要。

因此，简而言之，Node 工作得非常好，如果它能为您工作，那就太棒了。就我个人而言，我总是会错过我已经习惯的 Java 生态系统。是的，我知道正确的答案是我应该在 Node 帮助建立这个生态系统。做到这一点并不完全是火箭科学，但它确实需要时间，而这是一种越来越宝贵的资源。