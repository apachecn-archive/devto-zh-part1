# 有机手工小批量对非个人工厂

> 原文:[https://dev . to/monk nomo/organic-artisan-small-batch-vs-personal-factory](https://dev.to/monknomo/organic-artisanal-small-batch-vs-impersonal-factory)

商店可以采用几种方法进行编码。有“有机的、手工的、小批量的”程序设计和“非个人的工厂”程序设计。

我从一个小批量手工作坊到一个没有人情味的工厂的转变是最近的事。这种变化仍然历历在目，虽然距离我很远，但我还是有一些看法。这就是从手工作坊到非个人工厂风格编码的转变:

小商店和新开发者走有机路线。这是出于需要。你必须快速行动，把代码带出门，把食物放在桌子上，把钱放进口袋。

基础设施是另一个原因。小商店和新开发人员通常没有什么基础设施。可能没有构建服务器和临时服务器。可能只有笔记本电脑和生产。

有机的、手工的、小批量的编程可以把事情做好。如果没有人坐下来敲出某个东西的第一个版本，我们现在还在用书写板和文件柜。此外，虽然团队规模小，人员流动率低，但手工编码的成本却很低。如果作者在那里，并能亲自向一小群人解释尸体埋在哪里，风格差异几乎不是问题。

随着商店的发展，工厂风格编程的优点变得很明显。我不是指[工厂模式。](https://en.wikipedia.org/wiki/Factory_(object-oriented_programming))你们 [GOF 人](https://en.wikipedia.org/wiki/Design_Patterns)自己看着办吧:)

在某个时候，大约 5 个开发人员，引入新开发人员的开销开始拖累团队的生产力。不同的项目格式和项目，需要领导负责建立应用程序

# 解

建立一些共享的基础设施和标准。将共享基础设施和标准结合在一起是绝对必要的。没有标准，共享的基础设施就会变成一场共享的噩梦。如果没有共享的基础设施，你就只能让标准化的编码向导对着他们自己的私人魔法书喃喃自语。没有机会知道这些标准是否已经被采用。

有效共享基础架构的最低要求是:

*   共享代码库

*   共享构建服务器

*   放置由构建创建的工件的地方

*   用于测试的临时服务器在投入生产之前进行部署

这些元素的含义各不相同，取决于您的商店使用的堆栈。我身处枯燥的企业世界，所以我要讲的栈是 Oracle，Java，Javascript。

## 共享代码库

你的团队使用的具体工具并不重要，只要它使用一个工具并且你们都在同一个地方存储代码。根据 Zero Turnaround 的 2016 年技术调查, Git(可能还有 Github)是版本控制的明显赢家，其次是 Subversion。我的商店使用 Mercurial——在 Git 明显胜出之前，我们就从 CVS 进行了切换，并且没有强烈的为切换而切换的需求。

2017 年为什么要用源码控制我就不深究了(！)，但我想强调的是，拥有一个每个开发者获取和放置代码的共享场所是极其有价值的。

如果您没有使用源代码管理，请使用该程序。

## 共享构建服务器

2017 年，开发人员不应该将他们在工作站上创建的工件部署到生产中。部分原因是因为很难重建一个开发人员的工作站在某个时间点的状态，以重建工件。部分原因是像这样的手动过程有一个很差的[总线因子](https://en.wikipedia.org/wiki/Bus_factor)，并且很难传递给新的开发人员。主要是因为计算机时间便宜，开发时间贵，自动化容易。

构建服务器提供了一个定义构建和部署过程的地方。记录过去版本的地方。存放艺术品的地方。共享构建服务器的最大好处之一是任何开发人员都可以通过点击按钮来运行构建。当一个新员工在第一天走进办公室时就能做好准备，这是一个强大的优势。

围绕另一个巨大的好处保持已部署的工件。如果您需要回滚，您可以获得上次部署的确切内容。没有手动复制到网络文件共享，没有关于在哪里找到备份的维基笔记。一切尽在一处！

共享构建服务器的另一个好处是它们可以像一个友好的界面一样对待`cron`。开发人员可以轻松地编写重复性任务的脚本，然后将调度任务交给 Jenkins。詹金斯跟踪脚本的成功，并可以在出现问题时向开发人员发送电子邮件。这听起来很小，但这是一个巨大的生产力助推器。

## 神器库

构建服务器*可以*在一定程度上保存你所有的工件。

构建服务器擅长保存被部署到生产服务器的工件。构建服务器不擅长保存中间工件，比如库 jar。

Jenkins 可以在构建之间移动 jar，但是跟踪哪个 jar 属于一个构建是困难的。像意大利面代码一样，意大利面依赖以眼泪告终。

开发人员需要访问中间工件，但是构建服务器并不容易访问。Sane Java 开发使用 Maven，它可以获取 jar，但是它需要从存储库获取，而不是从构建服务器获取。

Nexus 是我的商店使用的藏物库。这是一个与 Maven 一起工作的工件存储库，并且是自托管的。多亏了 Nexus，新项目可以使用现有的库和工具，而无需真正尝试。

## 暂存服务器

临时服务器是在将代码部署到生产服务器之前部署代码的服务器。使用临时服务器最简单的方法是简单的冒烟测试——部署代码，启动服务器。如果它启动了，A-OK。

临时服务器也可以是测试服务器。将代码部署到临时服务器，然后运行功能测试和用户验收测试。暂存环境的设计就像生产环境一样。

如果您没有使用临时服务器，那么您是在生产中进行临时/测试，这是很危险的。

由小批量向工厂化转变的思考

=======================================================

从小批量车间到工厂车间的转变是积极的。代码开发的速度提高了，重复出现错误的比率降低了。Maven 的紧身衣和 Nexus 库鼓励模块化和代码共享，这允许我们快速构建更复杂的系统。

消极的一面是，用新的基础设施创建新项目的速度降低了。需要更多用于测试的基础设施，这自然会增加推出新项目的负担。

自动化程度的提高抵消了基础设施的负担，但仍有更多自动化工作要做。

我不会回去的。

如果你喜欢这个，请访问我的博客。

[每月收到一封电子邮件，其中包含来自网络的优秀技术和技术领导文章](http://www.gunnargissel.com/pages/email-signup-1.html)