# 关于总线因素(4/5)的经验教训:靠近领域

> 原文:[https://dev . to/einen lum/lessons-learned-about-bus-factor-45-stay-close-to-the-domain-b6h](https://dev.to/einenlum/lessons-learned-about-bus-factor-45-stay-close-to-the-domain-b6h)

*这一系列文章摘自我在[柏林 PHP 会议](https://twitter.com/bephpug)上的演讲，最初发布在我的[博客](https://www.einenlum.com)上。如果你没有读第一本书，[给你](https://www.einenlum.com/articles/bus-factor-1)。*

(如果要点片段没有显示出来，尝试刷新页面。似乎开发人员遇到了一些问题)

上次我们看到了如何用一种简单的方式重构代码，使其更加明显。我们还没谈到你客户的领域。也许我们一开始就应该这么做。

* * *

## [](#stay-close-to-the-domain)呆在靠近领地的地方

当你为客户创建网站时，你最初并不知道他们的工作。它可以是关于印刷、银行、运输等等。你不是这些领域的专家。即使你有这些方面的知识，每个公司都有自己的词汇、流程和问题。当构建一个可维护的优秀应用程序时，你首先要考虑的应该是理解客户的领域。你不仅要理解它，如果你用的词和他们用的完全一样就更好了。这叫做**通用语言**，在*行为驱动开发*和*领域驱动设计*中是一个常见的概念。使用与你的客户相同的词汇将会避免你浪费大量的时间去翻译他们正在谈论的内容。如果你不知道*无处不在的语言*，你可以查看[这篇很好的文章](http://www.jamesshore.com/Agile-Book/ubiquitous_language.html)提出了这个概念。在我看来，这里有几段引言总结了其中的要点。

> 你可以给你的类、方法和变量起任何名字。为什么不使用领域专家使用的术语呢？
> […]
> *【无处不在的语言】*在代码中反映了软件用户如何思考和谈论他们的工作。
> […]
> 程序员应该说他们领域专家的语言，而不是相反。

有时你甚至会意识到你的客户对一些事情没有清晰的概念。然后，帮助他们找到描述某事的最佳术语，并始终保持这个词与那个词相同。当你完成了理解和翻译你客户语言的所有工作后，**请把它记在词汇表里**。它可以在 *Github* wiki 中，或者更好，直接在你的存储库的 *doc* 部分的 markdown 页面中。写下你客户的所有重要概念。什么是*零售商*？什么是*客户*？如何定义一张*发票*？什么定义了*许可证*，它有什么用途？如果你的客户不会说英语，写出他们的术语和应用程序中使用的术语之间的匹配(因为是的，你将用英语编写代码。那应该是显而易见的)。

这是一个非常重要的工具，可以帮助新开发人员理解领域及其在代码中的实现。实际上，**如果你编写明确的代码，并尽可能地接近领域，一个没有编码知识的销售人员应该能够阅读你的代码，并告诉你你是否以一种好的方式实现了逻辑**。我并不总是有可能得到它。但是**那应该是你的最终目标。**

* * *

## 编写测试也是编写文档

很明显，测试会帮助你提高代码质量，避免错误。太好了。但是**测试也是帮助开发人员深入你的项目**的好方法。**当我开始一个新项目时，我首先检查的是功能测试的存在。**这可以让你很快理解这个应用程序是关于什么的，它是做什么的。然后，如果我想更详细地了解不同的类做什么，我可以检查单元测试。作为一名 PHP 开发人员，我喜欢使用 [Behat](http://behat.org/en/latest/) (对于熟悉它的人来说，这是一种类似黄瓜的东西)，一个简单的测试运行程序，允许你用一种叫做*小黄瓜*的人类可读语言来描述*场景*。它看起来是这样的: