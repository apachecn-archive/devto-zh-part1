# 拉式请求工作流的优势

> 原文:[https://dev . to/bukhorimuhammad/benefits-of-pull-request-workflow-3ei](https://dev.to/bukhorimuhammad/benefits-of-pull-request-workflow-3iei)

*从无工作流到 gitflow 到拉式请求。这是我们的故事……*

最初，我们的项目不使用 Git。大约在 2010 年，SVN 是我们主要的源代码控制/版本控制(除了 Dropbox 和 USB 驱动器传输🤘 ).在我们成长为在同一个项目中工作的几个人之后，出现了一些不适，我们决定在 2013 年左右采用 Git。

<figure>[![](img/e0905be3388e9c5a4e7b28b3172dcf3c.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--yo-e0r9F--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AMH8tjxbqlE0KeCSmDC4QXA.jpeg) 

<figcaption>为旧功能寻找提交给我们的像…</figcaption>

</figure>

和往常一样，第一次很乱。几个项目搞乱了 git 的历史，使得跟踪和合并变得很困难。对于如何划分分支，我们没有任何共识，也没有任何像样的工作流程来实现。人们只是随心所欲地承诺和推动。最终在 2014 年末，我们决定在我们的工作流程中采用 [gitflow](https://danielkummer.github.io/git-flow-cheatsheet/) 。事情很快就变好了。我们知道要跟踪什么，谁在做什么，以及当前的分支状态。

但是我们仍然会遇到一些棘手的问题，尤其是关于我们的初级开发人员。为了使分支历史清晰易读，有时压缩/重定/重写远程历史是必要的。由于我们不保护开发/主分支，有时历史会很快变得混乱。

2016 年，我们开始积极发布我们自己的[库](https://www.linkedin.com/pulse/flipboxs-contributions-web-technology-bukhori-aqid/)，并逐渐使用 Pull Request 作为管理我们开源库更新的方式。而且令人惊讶的是在 2017 年，我们的几个开发者建议我们用 Pull Request workflow 来代替 gitflow。

说实话，我一开始是反对拉请求的。主要原因是它可能会引入瓶颈，尤其是当评审者很忙的时候。决定工作流程也需要一些讨论(我们应该使用多重回购吗？还是一个带有受保护分支的存储库？如何给分支机构命名？等等。).但是最终在权衡利弊之后，我决定在我们的一些项目中实现拉式请求工作流。

结果令人难以置信。利大于弊。我们来详细讨论一下。

**拉式请求工作流程的优势**

*   通过使用 pull request 清理 git 历史，我们可以在合并到主分支之前轻松地挤压那些冗余/不重要/不清楚的提交。这是由我们的受保护分支机构策略强制执行的。只有领导/队长可以合并到主分支。其他开发人员可以在他们的分支中为所欲为
*   有意义的 git 历史我们过去常常忽略这一方面，但事实证明这比我们想象的更重要。通过遵守我们的分支命名约定，所有的拉取请求和合并变得更容易阅读，并提供功能/修复历史。最后，您的 git 历史可以成为跟踪生产力和/或项目速度的工具。
*   远程代码审查流程在拉请求之前，我们通过结对编程或代码演示会议进行面对面的代码审查。使用 pull request 作为我们的工作流，可以在合并 pull request 之前进行代码审查。这使得平稳代码审查过程成为可能，即使是在进行远程工作的时候。
*   更好的软件质量提出拉式请求意味着该特性需要得到队长/主管**和** QA / QC 的批准。在“拉”请求之前，所有功能和修复都可以合并到主分支，从而在 QA / QC 不知情的情况下更新临时服务器。这使得测试更加困难，因为没有办法确保临时服务器的状态。做拉请求意味着只有在所有的改变被领导& QA 批准后，临时服务器的状态才会被更新。这确保了我们的临时服务器中的所有代码已经被几个利益相关者检查过，因此质量更好。

**拉式请求工作流程的缺点**

*   漫长的审核过程，尤其是当队长/领队很忙时。除此之外，一切正常。
*   时间/流程开销有人抱怨说，提出拉式请求会导致需要完成更多的流程。您需要在浏览器中创建一个拉请求，添加评论和更改日志，等待和修复反馈等。有时会出现空闲时间，因为开发人员正在等待批准，无法开始新的分支工作。我们不鼓励在平行分支上工作，因为我们相信专注是重要的。

尽管我们在一些项目中成功地实施了拉式请求工作流，但仍需要一份详细的指南来确保不会出现冗余/误解。经过几次讨论，我们提出了这个[工作流约定](https://github.com/flipboxstudio/tech-handbook/blob/master/pull-request-workflow.md)。请随时给出您对此事的反馈和意见！

在采用带有上述附加约定的拉式请求工作流之后，我可以肯定地说，我们的项目总体上变得更好了。这里或那里可能会有一些问题，但好处是显而易见的。我建议您至少在与您当前的工作流程进行比较时尝试使用这种方法。

*欢呼*

*声明:这篇文章是基于我在使用* [*动画盒*](http://flipbox.co.id) *时的亲身经历。我们的日常活动和项目都围绕着客户的移动应用&(有时)网站。这些观点和建议可能不适用于不同的情况。*