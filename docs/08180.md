# Windows 命令行界面很糟糕，这很好。

> 原文:[https://dev.to/tmr232/the-windows-cli-sucks-and-thats-good](https://dev.to/tmr232/the-windows-cli-sucks-and-thats-good)

## TL；速度三角形定位法(dead reckoning)

Windows 的外壳很烂，所以人们编写工具。工具使用起来很有趣。

Linux 的 shell 非常神奇，所以人们编写了可怕的 bash 脚本和 makefiles。

理智点。用 Python。用 c。

帖子的其余部分是我咆哮，释放一些蒸汽。玩得开心，不要太认真。

## ðÿ的故事——殷商ðÿ的故事

```
my_var=$(application arg0 arg1)

for /f %%i in ('application arg0 arg1') do set my_var=%%i 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### windows□

我使用 Windows 已经很长时间了。其实一直是我的主 OS。我非常喜欢。然而，这并不是说这没有问题。其中一个例子就是 CLI。

多年来，我们在 Windows 上仅有的东西就是`cmd.exe`和`.bat`文件。它们很可怕。对于非常简单的事情来说，它们非常简单，但是尝试将它们用于任何更高级的事情(比如[为命令](http://stackoverflow.com/questions/2323292/windows-batch-assign-output-of-a-program-to-a-variable)的输出设置一个变量)，您会很快意识到这不是适合您的工具。你需要一门*真正的*编程语言。所以你会用 Python，或者 C，什么的。编写你需要的工具会花费你更多的时间，但是在这个过程中，它会变成一个真正的工具，而不是一个烦人的脚本。

最近几年有了一些重大的改进——PowerShell 出现了， [cmder](http://cmder.net/) 让 Shell 看起来更好一些，我有一些 Linux 工具(grep，awk，xargs...)在我的 Windows shell 中运行。然而，人们倾向于在 Windows 上使用更通用的语言。

### [](#%C3%B0%C3%BF%C2%90-penguins-%C3%B0%C3%BF%C2%90)ðŸ§ Penguins ðŸ§

然而，在 Linux 上，shell 的情况一直很好。它有令人敬畏的终端，以及大量可以被链接(管道)以释放超乎想象的力量的设施。与 Windows 不同，在 Windows 中，你需要使用看起来很有趣的 API 来获取信息，而 Linux 只是在方便的文本文件中为你提供一切。

事实上，Linux 针对 shell 进行了优化，这让我有些畏缩。实际上，在 shell 中解析系统信息(比如进程列表)比在 C 代码中更容易。因为我们没有合适的 API，而是有文本文件。*正文*文件。内核获取二进制数据，将其格式化成字符串，然后用户模式代码可以将代码还原成二进制数据。太神奇了！

但是够了。

Linux shell 确实非常出色。在 bash 脚本中，您几乎可以做任何事情。人们确实如此。
现在，有一点我非常喜欢的 Linux 理念。“做一件事，把它做好。”`find`找事，`grep` greps，`xargs` xargs，`awk` awks。到目前为止，一切顺利。但是 bash 本身呢？虽然每个 shell 实用程序都做一件事情并且做得很好，但是 bash，尤其是 bash 脚本，却做不到。它们允许您通过组合多个命令来快速实现高级行为。你写得越来越多，一切都正常了。然后，就没有了。你需要解决它。如果你运气好，并且代码有很好的文档记录，你可能会侥幸成功。但往往不会。而美妙的“让我们把字符串传来传去”编程风格可能会反咬你一口。

但是，bash 对于快速破解来说是非常棒的。一般来说，如果没有输入参数，并且输入参数足够小的话，效果会很好。我不喜欢它，但它很有效。

## ðÿ《打造你自己的地狱ðÿ》

真正的问题是`make`。

是在地狱最深处的地牢中诞生的野兽(如果相比之下我冒犯了这样的野兽，我非常抱歉。)
makefile 给你带来了工作时不离开外壳/代码编辑器的好处。您只需创建一个 makefile，定义您的目标，就可以开始了。事实上，这太棒了。您甚至可以在 makefiles 中包含 bash 脚本来执行定制步骤。或者生成 makefiles。或者用`automake`。或者任何可能使编写 makefiles 任务变得更容易、更难维护的东西。但是你写，你指定，它就工作了！大多数时候。

** **戏剧性的停顿** **

你可能已经注意到我不喜欢`make`。确实如此。这个帖子主要是我抱怨`make`，发泄一下。现在，我欣赏`make`。我用它来构建我在 Windows 上永远无法实现的东西。这是一个非常强大的工具。但是，你看，作为一个 Windows 用户，我自然喜欢 ide。Visual Studio 就是这样一个奇妙的创造。就 C/C++开发工具而言，它是无与伦比的。“但是等等！”我的 Linux 朋友说，“VS 强迫你用他们邪恶的‘GUI’创建肮脏的‘项目’！在 Linux 中，我们只需编写 makefiles！”
的确如此，这对于小项目来说很烦人(我通常会用一个`.bat`文件来触发带有所有相关标志的构建)，但对于任何更复杂的项目来说，这都是天赐之物。你有图形用户界面，项目，解决方案等等。太棒了。定义起来有点慢，但是很容易使用！

而现在，在我失去了大部分面向 Linux 的读者之后，我可以直奔主题了。Linux 有一个超级强大的外壳，所以人们用它来制造一个超级强大的烂摊子。Windows 有一个超级没用的外壳，所以大家都不用。相反，他们制造工具！带有 GUI 的用户友好的工具。他们使用通用编程语言。这很好。

是否应该停止使用 bash？还是废掉它？还是保持 Windows 外壳向下？绝对不会。

使用任何你认为合适的工具。但是要明智地使用它们。对于小的自动化任务，使用 shell 脚本，当你写更大或更复杂的东西时，尽量使用更易维护的编程语言。并编写新的工具。工具很好玩。