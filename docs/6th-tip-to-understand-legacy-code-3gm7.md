# 理解遗留代码的第 6 个技巧

> 原文：<https://dev.to/reg__/6th-tip-to-understand-legacy-code-3gm7>

刚刚看了 2 天前发布的一个视频:**“理解遗留代码的 5 个小技巧”**作者 Jonathan Boccara:

[https://www.youtube.com/embed/xOsmO4Gnj6c](https://www.youtube.com/embed/xOsmO4Gnj6c)

我很喜欢它，但我觉得这里缺少了一些东西。作者给出了 5 个技巧，告诉你如何开始弄清楚一个对你来说是新的大型代码库。

1.  “找一个据点”——你完美理解的一小部分代码(甚至是单行)，并从那里展开，看看它周围的代码。
2.  “分析堆栈”——放置一个断点来捕捉程序执行中的代表性时刻(在某人的帮助下)，并查看调用堆栈来理解代码层。
3.  “从 I/O 开始”-分析在最开始(输入数据，例如源文件)或结束(输出数据)处理数据的代码。
4.  “解耦”——通过尝试对代码进行一些重构来学习，尤其是解耦它的一些部分。
5.  “填充室”——找到一个不依赖于任何其他代码(范围有限)的代码，并从那里开始。

这些都是很好的建议。我同意他们的观点。但是计算机程序有两个方面:动态(代码随时间执行的方式——算法、函数、控制流)和静态(数据存储在内存中的方式——数据结构)。我感觉这 5 点主要集中在动态方面，所以作为“面向数据的设计”的倡导者，我想补充另一点:

**6。“核心数据结构”:**找到描述程序正在操作的最重要数据的结构、类、变量、枚举和其他定义。比如，如果是游戏引擎，看看 3D 场景的对象是如何定义的(某个抽象的基础 CGameObject 类)，它们之间如何关联(形成树形结构或者所谓的场景图)，它们有什么属性(名称，ID，位置，大小，方向，颜色)，它们有哪些种类(网格，相机，光线)。或者，如果那是一个编译器，寻找抽象语法树(AST)节点的定义和带有所有操作码列表的枚举。绘制 UML 图，显示定义了哪些数据类型，它们包含哪些成员变量，以及它们如何相互关联(继承、组合)。在可视化和理解这些之后，分析对这些数据进行操作的算法的动态方面代码就容易多了。它们共同构成了该计划的精髓。其余的都只是帮手。