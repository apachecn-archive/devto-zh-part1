# 冗余最小工作示例

> 原文:[https://dev . to/steliosvoskos/a-redux-minimum-working-example](https://dev.to/steliosvoskos/a-redux-minimum-working-example)

当初学者开始学习 Redux 时，他们发现很难理解 Redux 应用程序中的不同组件是如何通信的，以及它们的用途是什么。我用 React 和 Redux 创建了一个最小的工作示例，但是在我在文章末尾提供 github 链接来克隆它之前，我想给你一些关于这个简单应用程序中不同部分如何工作的背景知识。

一般来说，为了理解 redux 应用程序如何工作，我们应该问自己 Redux 对我们有什么期望。它预计:

1.  **默认状态**。这可以是一个空数组，一个文本——应用程序中开始的内容。
2.  **减速器**。归约器是将要返回状态的新副本的功能单元。它们应该永远不变。
3.  **动作**。动作是保存应该触发的动作类型和我们发送给 reducer 的信息负载的函数。
4.  **一家店**。最后，Redux 需要一个存储应用程序所有状态的存储。在社会上被称为“真理的唯一来源”。

我没有提到 React 中的容器组件，因为 Redux 是 Javascript 应用程序的状态管理工具，而不仅仅是 React 应用程序的。

**最小工作示例**

工作示例的文件结构由 src 目录组成，src 充当应用程序中其他文件夹的根目录。

在 **src** 目录中有一个名为 **actionCreators** 的目录。在 actionCreators 中是返回动作类型的动作——在本例中是**‘增量’**。

在 **src** 目录中有一个名为**数据**的目录。这是保存应用程序的**默认状态**的文件夹。这种情况下的默认状态有一些文本和一个初始化为 0 的**计数器**属性。

在 **src** 目录中有一个名为 **reducers** 的目录。在 person.js 中，返回对象的**新副本**，计数器属性增加 1。当“INCREMENT”操作类型是 switch 语句的情况时，会发生这种情况。**否则，返回默认状态**。在 reducers 目录中还有一个名为 **rootReducer.js** 的文件。在这个文件中，person 和 employer reducer 用 **combineReducers()** 方法组合在一起，它们形成一个 reducer，将在 store.js 中传递。

在 **src** 目录中有一个名为 **store.js** 的文件，它保存了应用程序的整个状态。它是由一个名为 **createStore()** 的方法创建的，将根缩减器和默认状态作为参数。当前默认状态与根缩减器一起导入。然后适当地使用 createStore()，就创建了商店。

在 **src** 目录中，有一个名为**组件**的目录。在组件目录中，表象组件是在 **App.js** 中创建的。它从存储中获取人员的姓名和计数器的值，并为计数器的增量创建处理程序。

在 **src** 目录下，有一个名为 **index.js** 的文件。在 index.js 中，来自 react-redux 的提供者被导入，它将把应用程序放入商店的范围。它还将使我们能够使用 connect()方法(见下一段)让组件监听存储的变化。Provider 接受**一个属性，store** ，它需要成为 Main.js 的父元素，也就是容器组件。

在 **src** 目录中，有一个名为**容器**的目录。在容器中有一个名为 Main.js 的文件。容器的主要目标是使用适当的绑定来监听来自商店的更改，并将道具映射到表示组件。这通过 3 种方法实现:

1.  **mapStateToProps** (state):该方法使组件订阅存储的更新，每当存储中有变化时都会调用 mapStateToProps。
2.  mapDispatchToProps(dispatch):获取动作，并使它们可以在表示组件中调用。这可以通过将 bindActionCreators 的操作和分派作为参数返回来实现，也可以通过返回一个带有操作名称的对象来实现。
3.  **connect** (mapStateToProps，mapDispatchToProps):将上述两个函数组合在一起，并将所有商店更新绑定到表示组件。

在此找到最小工作示例

我希望这篇文章对集成在 React 中的 redux 应用程序应该如何工作有一点了解。请在下面留下您的评论和反馈。快乐编码。