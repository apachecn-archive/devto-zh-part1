# 使用 TeamCity 构建 CI 服务器

> 原文：<https://dev.to/funkysi1701/building-a-ci-server-with-teamcity-57ma>

TeamCity 是一个持续集成的软件包，非常容易安装和设置。太简单了，我一个周末就搞定了。

首先，我在 Azure 中启动了一个虚拟机。我发现一个基本的 A1 VM 就足够了，所以运行一个 CI 服务器不一定很贵，或者你可以在你自己的网络上设置一个虚拟或物理服务器，但是设置起来当然要花一点时间。

在我讲得太远之前，你可能会问什么是持续集成。持续集成服务器从您的源代码控制库中获取您的代码，然后自动构建它，针对它运行自动化测试，甚至可以将它部署到生产中。这样做的主要好处是你可以看到你的代码的健康状况，你也可以测试不同的配置。

所以一旦你准备好了服务器，你需要安装一些东西。首先 [TeamCity](https://www.jetbrains.com/teamcity/download/) ，用默认设置安装即可。我的项目是一个 Visual Studio 项目，所以我还需要安装 Visual Studio(他们有一个免费版本，可以做我现在需要的一切，谢谢微软)和 SQL Server Express Edition。

一旦 TeamCity 安装完毕，剩下的配置就可以通过 web 界面进行了。为了更容易，我将一个域指向我的虚拟机(CNAME 记录可能更好，因为 Azure IP 地址可能会改变),并在 Azure 配置中打开端口 80。首先创建一个构建配置，然后创建一个 VCS 根目录，这是您指定源代码控制的位置。TeamCity 支持 Github 和 bitbucket，可能还有很多其他的。您可以指定想要签出哪个分支，以便测试您编写的最新特性。

接下来，您需要配置构建项目所需的步骤，无论您在 Visual Studio 中做什么，都可以在这里进行配置。然后，您需要配置构建应该运行的频率，可以安排在特定的时间运行，我记得 CI 服务器就是这样配置的，但现在您也可以在提交到源代码控制后触发构建，非常聪明。

这是我目前为止配置的全部内容。我的项目有一些为它编写的 NUnit 测试，这些测试被安排在每次构建之后运行。在我的案例中，目前有 94 个测试失败，所以我现在需要了解我的测试是如何工作的。

还可以配置其他部署步骤，但是我还没有研究这些步骤。关于 CI 正在做什么的通知通常也可以通过电子邮件发送，但也有其他可用的选项。