# 如何设置 Windows 10 应用网络 Killswitch

> 原文:[https://dev . to/Brandon 927/how-to-setup-a-windows-10-application-network-kill switch-PME](https://dev.to/brandonb927/how-to-setup-a-windows-10-application-network-killswitch-pme)

一个更合适的标题可能是:如何设置 Windows 10 防火墙规则，以便在应用程序从您的 VPN 连接断开时，不管出于什么原因，都可以阻止它的网络流量。

如果你关心隐私，并且你在你的计算机上使用 VPN 连接来浏览互联网，你可能想要保护你的下载习惯免受窥探。在之前的一篇文章中，我记录了最终的自动媒体设置，并提到了设置 VPN 来确保你免受 ISP 和其他第三方窥探的威胁。在这篇文章中，我想告诉你如何在 Windows 10 中设置一个应用程序，只使用 Windows 防火墙和一些简单的入站/出站规则来阻止网络活动*。*

首先，您需要确保您的主网络接口有一个“专用”网络配置文件，而您的 VPN 网络接口有一个“公共”网络配置文件。如果这些配置文件与您在 Windows 的网络和共享中心中看到的不匹配，请不要担心，因为这是您将要更改的内容。如果您不能修改这些配置文件，您可能必须继续前进，尝试其他东西，因为我还没有找到另一个解决方案。

## [](#setting-up-the-network-adapter-profiles)设置网络适配器配置文件

使用“开始”菜单中的搜索找到并打开“本地安全策略”应用程序。在左侧栏“安全设置”列表中找到“网络列表管理器策略”并点击它。在窗口右侧找到您的常规网络接口适配器(它很可能不是您的 VPN 适配器，也不是显示“所有网络”的适配器)。)双击打开您的适配器属性，然后转到“网络位置”选项卡。确保位置类型设置为“私人”，用户权限设置为“用户不能更改位置”。对您的 VPN 适配器再次执行此操作，但要确保位置类型改为“公共”。

现在，您可以着手设置 Windows 防火墙规则了。

## [](#setting-up-the-windows-firewall-rules)设置 Windows 防火墙规则

再次使用“开始”菜单中的搜索找到并打开“Windows 防火墙”应用程序。您将希望删除您在“入站”和“出站”规则集中为要设置 killswitch 的应用程序设置的任何规则。通常，应用程序在安装后第一次运行时会设置任何网络规则，并尝试连接到您的网络。

一旦你完成了，开始建立一个新的“入站”规则(“出站”规则的属性将完全相同。)

选择“程序”，然后选择“下一步”。

在第二页上，您需要插入应用程序的路径，或者使用 browse 按钮找到它。找到并选择它后，再次单击“下一步”。

在第三页上，确保您**选中**了“阻止连接”选项，然后点击下一步。

在第四页上，**取消选中**“公共”档案，然后点击“下一步”。

在最后一个页面上，给它起一个名字(类似于“Block <application name="">就可以了)，然后点击“Finish”。</application>

按照完全相同的规则创建步骤，为“出站”规则完成上述操作。

一旦创建了两个规则，返回到“入站”规则，找到您首先创建的规则。通过右键单击或选择规则并在最右边的侧栏中选择属性，打开该规则的属性。从这里选择“范围”选项卡，在“本地 IP 地址”区域选择“这些 IP 地址”选项，然后单击添加。在此插入您的静态 IP，如果您没有使用静态 IP，也可以插入您的 IP 子网范围(192.168.0.0/16 等)。完成后，单击确定，然后再次单击确定。

对您创建的“出站”规则再次重复这些防火墙规则步骤。

## [](#testing-the-solution)测试溶液

你快完成了！连接到您的 VPN 服务器，然后打开您想要阻止网络访问的应用程序。使应用程序可以预先执行一些网络活动，如下载或访问远程资源。您会注意到，当应用程序正在运行并且 VPN 已连接时，一切都很好，一切都正常运行。您可以通过在应用程序产生网络流量的过程中断开 VPN 来测试您的设置是否正确。您应该会看到应用程序的任何网络活动立即关闭，或者在一分钟内逐渐变慢，最终完全停止。

如果以上都是正确的，你现在就完成了！如果您的 VPN 连接因任何原因中断或断开，您已经启用这些规则的应用程序将不会尝试连接到互联网，直到连接恢复，您会感觉很好。