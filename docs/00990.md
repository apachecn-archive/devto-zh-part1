# 我对 ETL 和 ETL 测试的思考

> 原文:[https://dev . to/theo coria/my-thoughts-on-ETL-and-ETL-testing-2c JD](https://dev.to/theocoria/my-thoughts-on-etl-and-etl-testing-2cjd)

**背景**

在我之前的职位上，我被委以为客户处理 ETL 过程的有趣任务。我连续几天从一个数据源到另一个数据源提取、转换和加载数据。每天重复这样做，以及大量数据外推的单调过程，让我筋疲力尽，有点沮丧，坦率地说，我厌倦了。我不得不从头开始学习如何实现 ETL 过程，在那些开始阶段，我只有很少的资源来实现自动化测试。

与许多事情一样，在构建和手动测试我的 ETL 过程的第一次迭代之后，我认为并希望它是完美的。然而，事实并非如此，测试人员可能遇到的最常见的问题正是我会发现的；一些记录没有被加载，一些记录格式不正确或被截断，一些记录重复，其他记录要么给出了无效的类型或值，要么被错误地转换，这只是其中的几个问题。识别这些问题需要很长时间，因为这可能是数据中的错误，也可能是 ETL 过程本身的错误。必须建立一个流程来解决这些问题，然后在部署到生产之前再次测试。这是数据流的一个主要中断，每次更改都需要大量重写、重构和重新部署整个 ETL 基础设施。

**ETL 测试**

在 ETL 过程中运行自动或手动测试的原因是为了确保一致性和完整性，防止回归，以及故障检测(在这里找到更多关于 [ETL 测试](https://www.alooma.com/blog/etl-testing-the-future-is-here)的细节)。即使有了自动化的数据管道和自动化的 ETL 工具，您仍然必须执行测试和验证，因此它不会导致完全的端到端自动化。根据我的经验，测试过程中有一个我必须手动遵守的周期。为了为我的 ETL 过程准备基础设施环境和数据，必须再次运行代码来确定数据管道的质量，之后必须进行手动调试。只有当我的怀疑得到证实，并且[输入和输出](https://developer.ibm.com/recipes/tutorials/a-stepbystep-guide-to-testing-your-data-pipelines/)匹配时，ETL 过程才完成并进入生产。这是在两种情况下完成的:

1) *非功能性测试*，表征“脏数据”的性能调优、负载、容错，以及
2) *功能性测试*，数据准备和问题解决所需。例如，这包括单元或组件测试、集成测试和端到端测试。

测试的 ETL 周期可能很耗时。测试的每个阶段都需要不同的策略或测试类型，这也取决于客户需求或组织标准。我无法使用自动化 ETL 测试，尽管我承认当时对它了解得还不够。一开始，我可能还需要 18 个月的时间来弄清楚如何使用它，并准备好所有的数据。这根本不符合成本效益或时间效益。

**今日 ETL 相关性**

回过头来看，我几乎不敢相信自己今天对随手可得的实时数据是多么习以为常。然而，传统的 ETL 处理还不是这样。我们离交付一个没有 ETL 过程的类似“实时”数据驱动的解决方案还有一段距离。etl 过程本质上代表了什么的想法在今天非常重要，并将继续如此。公司规模越大，能够获取的数据越多，就越需要更好的方法来聚合信息和进行正确的转换。ETL 的最终目标是，最终使公司能够做出最佳的数据驱动的业务决策，ETL 通过分析和使用所需信息的提取来做到这一点。

**总结思路**

传统的 ETL 处理和测试是一项耗时的任务，但是获得的数据的价值是无价的。另一方面，ETL 的当前市场领导者所使用的工具和范例应该受到质疑——因为他们实施实现的方式本质上是过时的。这种性质应该被重新思考、重新评估，并像[区块链科技](https://due.com/blog/blockchain-to-change-accounting-forever/)改变我们对分类账的看法一样，接受同样严格的实践检查。也许那时我会更愿意再次承担这样一个巨大的事件。