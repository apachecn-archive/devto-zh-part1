# 苏俄的平衡三进制机器

> 原文:[https://dev . to/buntine/the-balanced-three-machines-of-SUV-Russia](https://dev.to/buntine/the-balanced-ternary-machines-of-soviet-russia)

> “也许最漂亮的数字系统是平衡的三进制记数法”——唐纳德·e·克努特，《计算机编程艺术》，第 2 卷。

众所周知，计算机使用二进制数字系统存储和操作数据。其中一个主要原因可以在现代计算机的电路中找到，这些电路由数十亿个易于大规模生产的晶体管和电容器组成，它们可以共同代表两种状态:**高压** ( `1`)和**低压** ( `0`)。

如今这样的设计如此普遍，以至于很难想象计算机还能以其他方式运行。但是，在 20 世纪 50 年代的苏联，他们做到了。1958 年由莫斯科国立大学的尼古拉·布鲁森佐夫领导的一个小组开发的平衡三进制计算机。

好了，在我们继续讨论 Brusentsov 和 Setun 之前，让我解释一下平衡三进制。

## 均衡三元

三进制，或以 3 为基数，是一个数字系统，其中有三个可能的值*:`0`、`1`和`2`。在平衡三进制中，这三种可能是`-1`、`0`和`+1`；常分别简化为`-`、`0`和`+`。*

因此，在其平衡形式中，我们可以认为三进制值在`0`的中点附近是“平衡的”。同样的规则也适用于三进制，就像适用于任何其他数字系统一样:最右边的符号`R`有它自己的值，每个连续的符号都有它自己的值乘以基数`B`，乘以它与`R`的距离`D`。

嗯，好吧，也许我可以给你举个例子。我们来编码`114` :

```
+++-0 = (1 * 3^4) + (1 * 3^3) + (1 * 3^2) + (-1 * 3^1) + 0
      = 81 + 27 + 9 + -3
      = 114 
```

而在二进制(基数为 2):

```
1110010 = (1 * 2^6) + (1 * 2^5) + (1 * 2^4) + 0 + 0 + (1 * 2^1) + 0
        = 64 + 32 + 16 + 2
        = 114 
```

而且，为了确保万无一失，以下是十进制(以 10 为基数)中应用的相同规则:

```
114 = (1 * 10^2) + (1 * 10^1) + (4 * 10^0)
    = 100 + 10 + 4
    = 114 
```

酷吗？

现在，如果我们想代表`-114`呢？在二进制和十进制中，我们需要引入一个新的符号:符号。在二进制计算机的主存中，这要么转化为存储一个前导位来指定符号，要么显著减少我们可以表示的数字数量 <sup>1</sup> 。这就是我们在编程语言中谈论整数`signed`和`unsigned`的原因。

但是在平衡三进制中，正如我们将要发现的，为了表示一个数的倒数，我们只需将所有的`+`与`-`互换，反之亦然。我们不需要任何额外的信息来表示符号！

来看看:

```
---+0 = (-1 * 3^4) + (-1 * 3^3) + (-1 * 3^2) + (1 * 3^1) + 0
      = -81 + -27 + -9 + 3
      = -114 
```

一会儿我们会看到平衡三进制的这一特性(以及其他一些特性)会给我们带来一些非常有趣的计算效率。但是，现在，让我们回到谈论 Setun 计算机。

## 塞顿的诞生

50 年代末是计算机领域令人兴奋的时期:IBM 的 Nathaniel Rochester 和他的团队最近开发了第一台大规模生产的存储程序(也称为“现代”)计算机——IBM 701 T1。约翰·巴科斯和他的团队发明了第一种被广泛使用的高级编程语言 [FORTRAN](https://en.wikipedia.org/wiki/Fortran) 。也许最重要的是，第一批全晶体管计算机，如 [TX-0](https://en.wikipedia.org/wiki/TX-0) 和 [Philco Transac S-2000](https://en.wikipedia.org/wiki/Philco) 开始被开发出来。从此以后，统治市场的二进制计算机器的发展道路就这样确定了。

但那是在北美。

与此同时，在俄国，一群数学家和工程师在尼古拉·布鲁森佐夫和他的同事 T2 的指导下，正在设计计算机操作 T4 的不同方式。Brusentsov 和他的同事调查了从西方出现的一系列计算机和技术进步，并理解了它们使用晶体管来表示二进制数据。但是，让我们记住，这是在俄罗斯——在铁幕后面晶体管并不容易得到。真空管在俄罗斯吸的和在西方吸的一样多！

因此，Brusentsov 设计了一种由微型铁氧体磁芯和半导体二极管组成的元件，能够充当受控电流变压器，这被证明是实现三值逻辑的有效基础 <sup>3</sup> 。发现这些元件与它们的二进制对应物相比，提供了更高的速度和可靠性，并且需要更少的功率来操作。

十人小组在一个摆满实验桌的小房间里工作，从零开始建造了 Setun(这也是他们建造的！).每天早上，团队成员从组装五个基本机器元件开始一天的工作。他们从一个铁氧体磁芯开始，用一根普通的缝纫针，在上面缠绕了 52 圈电线。然后，核心被移交给技术人员，他们完成组装过程并将其安装到积木上。

三进制逻辑是通过组合两个这样的铁氧体元件来实现的，并将它们连接起来，使它们能够代表三种稳定状态。这种方法是成功的，但并没有减少所需的元件数量，因为实际上，这两个铁氧体磁芯可能代表两个二进制位，这比一个三进制“trit”(`3^1`)代表更多的信息(`2^2`)。唉，至少他们的耗电量减少了！

Setun 对多达`18`个 trits 进行运算，这意味着一个 trits 可以代表`-387,420,489`和`387,420,489`之间的任何东西。另一方面，二进制计算机至少需要`29`位才能达到这个容量。

总的来说，Setun 的开发持续了两年——尽管它在仅仅十天的测试后就投入使用，这在当时是闻所未闻的。总共只生产了大约 50 台机器。尽管事实证明 Setun 机器能够在俄罗斯的极端气候下连续多年成功运行，但整个项目仍饱受争议。

这主要是因为制造工厂无法证明他们认为是廉价的智力努力和“大学幻想的果实”的大规模生产是合理的。我认为可以肯定的是，俄罗斯根本没有准备好理解计算机的最终重要性。最终，Setun 机器被二进制机器所取代，后者能够以相似的效率进行计算，但运算成本却是前者的两倍多！

## 但为什么是三进制？

正如我在上面简要演示的，在三进制中，不需要存储一个前导位来表示符号。所以没有`signed`或者`unsigned`整数的概念——一切都只是一个整数。因此，减法是通过简单地反转操作数并应用加法来实现的(其实现类似于二进制机器)。这种正负一致性还能够减少乘法运算中所需的进位数量。

平衡三进制(或任何平衡数字系统)的另一个有用特性！)的一个事实是，可以通过明显的截断来实现浮点数的舍入，这允许除法的简化实现。这是因为平衡三进制表示实数的小数部分的方式。

我举个简单的例子。编码`0.2`看起来像这样:

```
0.+--+ = 0 + (1 * (3^-1)) + (-1 * (3^-2)) + (-1 * (3^-3)) + (1 * (3^-4))
       = 0.33 + -0.11 + -0.03 + 0.01
       = 0.2 
```

为了对`0.8`进行编码，我们必须从最高有效位的`+`开始，然后简单地反转小数部分(例如`1 + -0.2` ):

```
+.-++- = 1 + (-1 * (3^-1)) + (1 * (3^-2)) + (1 * (3^-3)) + (-1 * (3^-4))
       = 1 + -0.33 + 0.11 + 0.03 + -0.01
       = 0.8 
```

从上面我们可以看到，截断基数点右边的三进制等同于舍入:`0.2`变成`0`，而`0.8`变成`1`。酷！

## 用 trits 和 trytes 编程！

好，最后一次回到 Setun。在 60 年代后期，Brusentsov 开发了一种更现代的机器，称为“Setun-70 ”,更直接地体现了它的*三性*。引入了“Tryte”，它占了`6` trits(大致为`9.5`位)。Setun-70 计算机是一台[堆栈机器](https://en.wikipedia.org/wiki/Stack_machine)，因此，所有操作都在两个堆栈上工作，一个用于操作数(输入)，一个用于返回值(输出)，而不是有专门命名输入和输出寄存器的机器指令。为了适应这种设计，机器指令用[反向波兰符号](https://en.wikipedia.org/wiki/Reverse_Polish_notation)(又名后缀)编写。

70 年代末，Brusentsov 和他的一些学生为 Setun-70 计算机开发了一种编程语言，称为结构化编程对话系统(DSSP)。在我的研究中 <sup>4</sup> ，我发现它是一种基于堆栈的语言(这并不奇怪),类似于使用反向波兰符号的[4](https://en.wikipedia.org/wiki/Forth_(programming_language))。这使得人们可以用相对高级的语言编写程序，但仍然感觉“接近金属”。如此接近，事实上，作者说:

> DSSP 不是发明出来的。找到了。这就是为什么 DSSP 没有版本，只有扩展。

以下面这个对一串数字求和的 DSSP 程序为例:

```
1 2 3 4  DEEP 1- DO + 
```

让我们试着分解它。第一栏是指令，第二栏是执行后的机器状态(操作数堆栈)，第三栏我已经给出了解释:

```
1    [1]            Push 1 to the stack.
2    [2 1]          Push 2 to the stack.
3    [3 2 1]        Push 3 to the stack.
4    [4 3 2 1]      Push 4 to the stack.
DEEP [4 4 3 2 1]    Push "the depth of the stack" (4) to the stack.
1-   [-1 4 4 3 2 1] Push -1 to the stack.
DO   [4 3 2 1]      Initiate LOOP, pop top two items from stack. To control 
                    the loop, the first item is applied to the second item until
                    it reaches 0.
+    []             Apply the "+" operation repeatedly until the LOOP terminates,
                    each time popping the top item from the operand stack stack,
                    applying + and then pushing the output to the return stack. 
```

执行结束时，操作数堆栈将为空，返回堆栈将包含`[10]`。

你可以在伊万·吉洪诺夫的网站上读到更多关于 DSSP 的内容。

## 未来

平衡三进制机器的发展几乎已经成为计算机史上的一个小注脚。虽然对能够有效地表示三种不同状态的存储单元的研究相对较少，但是在该领域已经有了一些努力。

特别是，日本的研究人员在 90 年代末[描述了使用约瑟夫森结实现三值逻辑的可能性](http://ieeexplore.ieee.org/document/679270/)。这可以通过循环超导电流来实现，顺时针*，*逆时针*，或者*关闭*。他们发现，由于三进制操作，这使得存储单元具有“高速计算能力、低功耗和非常简单的结构，且元件数量较少”。*

 *但是，至少就目前而言，我不认为在不久的将来你会听到更多关于平衡三进制计算机的消息。我也不认为 DSSP 会成为编程语言粉丝的下一个大事件。但我确实相信，通过回顾过去，可以获得更多的智慧。

谢谢你能走到这一步。非常欢迎指正和反馈。您还可以在这里阅读更多[、在这里](https://web.archive.org/web/20080808111712/http://sovietcomputing.com/node/47)和在这里。:)

1.  这取决于问题中的机器如何表示数字。[二进制补码](https://en.wikipedia.org/wiki/Two's_complement)是一种常见的符号，允许用`n`位来表示`-((2^n) / 2)`到`((2^n) / 2) - 1`。
2.  虽然 Setun 是第一个使用平衡三进制的电子设备，但值得一提的是，在计算设备中使用平衡三进制的想法早在 100 多年前就开始普及了。1840 年，托马斯·福勒[完全用木头建造了一台计算机器](http://www.mortati.com/glusker/fowler/fowlerbio.htm),以平衡三进制记数法对数据进行运算。
3.  更准确的描述可以在俄罗斯计算机博物馆网站上找到。
4.  DSSP 的英文参考资料并不普遍，所以我想在这里提出警告，我的知识非常有限，*可能包含一些猜测。*
5.  我自己的贡献可以在 [computerpionee.rs](http://computerpionee.rs/) 看到。
6.  封面图片最初来自[莫斯科大学超级计算中心](http://hpc.msu.ru/)，描绘了运行中的一台 Setun 机器。*