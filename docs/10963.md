# 我如何使这个网站海拉快速没有过度复杂的事情

> 原文:[https://dev . to/Ben/how-I-make-this-website-hella-fast-without-over complexing-things](https://dev.to/ben/how-i-made-this-website-hella-fast-without-overcomplicating-things)

我希望你进入这个网站的经历是快速的，并且你的浏览是迅速的。

当我开始建立这个网站的时候，我知道我想让事情变得简单、可维护并且超级快速。我不太关心复杂的 UI 行为或广告投放或快速实现功能，所以这是一个自律和深思熟虑的好机会。

## 缓存、gzipping、内容交付

这是一个阅读量大的内容网站，因此只要有可能，页面就会通过 Fastly 完全缓存在 CDN 层，以提供低延迟、低带宽的页面负载。我还在 Fastly 配置中而不是在应用程序中进行 gzip 压缩，因为这是一个 Ruby on Rails 应用程序，而且据我所知，没有简单的方法可以在应用程序中进行 gzip 压缩，而不会给每个请求增加少量开销。它是最小的，所以在很多情况下它仍然是有意义的，但是因为我的页面已经加载得很快了，开销占了总毫秒数的很大一部分。底线是每个页面都可以快速交付，并且大小不超过 10kb。

## 页面重新加载时偷工减料

为了尽可能快地从一个页面导航到另一个页面，我知道我想使用一些魔法来偷工减料，这样浏览器就不必每次都请求一个完整的页面。Rails 开发人员通常采用的标准方式是通过一个名为 [Turbolinks](https://github.com/turbolinks/turbolinks) 的 gem。Turbolinks 很好，但我想要更多的魔力。我想，如果我能在 hover 上预取下一个页面，并在 click 事件上立即提供它，那就太好了。我找到了一个名为[的小库 InstantClick](http://instantclick.io/) 就是这么做的。

## 自定义即时点击

虽然 InstantClick 基本上是一个插件，但我发现了一些用例，在这些用例中，我能够智能地增强它的 API。我修改了 InstantClick，让网站的[播客播放器](../../sedaily/kubernetes-docker-and-the-distributed-operating-system-with-kelsey-hightower)在你浏览页面时继续播放，告诉 InstantClick 替换整个页面，除了一个指定的 div，这个 div 只有在我告诉它的时候才会改变。即使这改变了整个网站的行为，我仍然能够把网站看作一个简单的服务器渲染的 CRUD 应用程序，这真的很好。路由仍然在服务器上进行，服务器和客户端之间没有逻辑重复。当我觉得时机成熟的时候，我会打开我的即时点击之叉。我认为这可能是一个非常好的网络小图书馆。

## 规范的 CSS 和 JavaScript

人们很容易意识到继续堆积 JavaScript 和 CSS 是多么的廉价，但是为了减少页面膨胀和保持应用程序的可管理性，我把深思熟虑和严格控制我的选择作为核心目标。该网站不使用 jQuery 或任何 JavaScript 框架。我的 InstantClick 修改版基本上是唯一的库，它大约有 2.7kb。某些页面，比如后端的 wysiwyg 文章表单，根据需要调用相应的 JavaScript 文件，但是对于网站上的大多数页面来说，这是不必要的。

## 约束驱动的特征构建

当你真的想实现一个特性的时候，放松约束是很容易的，但是我把不这样做作为一个优先事项，到目前为止，它工作得非常出色。我尽量不在任何期限内做这个网站。这给了我时间去思考每一个特性，并建立一个好的网站。这是一个完全个人的项目，所以我不需要说服任何人接受我的方法或满足其他人的最后期限。如果时间是关键的话，我已经匆匆忙忙做了一些事情，但总的来说，事情进展得相当缓慢和稳定，我认为这是最好的。

###### 图片鸣谢: [DC 漫画](http://www.dccomics.com/)