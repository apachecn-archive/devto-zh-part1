# 同构 JavaScript:它是什么，我能用它做什么？

> 原文:[https://dev . to/roelofjanelsinga/同构-JavaScript-what-is-it-and-what-I-can-do-with-it-3m KP](https://dev.to/roelofjanelsinga/isomorphic-javascript-what-is-it-and-what-can-i-do-with-it-3mkp)

[![Isomorphic JavaScript](../Images/3f8f77740155fd46d4da4250a2065227.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--Q_8adepS--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/q8taeeozb4n3bua5usp9.jpg)

# [](#isomorphic-javascript-what-is-it-and-what-can-i-do-with-it)同构 JavaScript:它是什么，我能用它做什么？

JavaScript，一种在客户端浏览器上运行的语言，使网站更具互动性。使用 Javascript 对用户的输入做出反应，向 PHP(或 Rails/Java/etc)发送 XHR 请求。)，从服务器接收数据，用提供的数据完成一个任务。很久很久以前，Javascript 就是这样被使用的。但是后来，在 2008 年，NodeJS 推出了。NodeJS，大多数 web 开发人员都听说过，是一个运行在服务器上的 JavaScript 框架。这意味着 Javascript 不再只是在客户端，它也可以是一个成熟的服务器。这有很多好处，包括:它非常快，前端和后端使用相同的语言，代码可以很容易地在前端和后端之间共享。但是这到底意味着什么呢？

### [](#a-library-called-react)一个名为 React 的库

为了回答这个问题，让我们使用一个前端 Javascript 库作为例子，在服务器的节点旁边使用。让我们称这个库为 ReactJS。ReactJS 是脸书创建的一个库，通过使用组件来轻松构建用户界面。这意味着您可以轻松地制作像导航栏这样的可重用组件，向它提供来自服务器的信息，如菜单项，并将其呈现在屏幕上。这很好，但是这如何回答这个问题呢？Well ReactJS 提供了将视图中的组件转换成字符串的方法。这意味着 NodeJS 可以将这个字符串作为对其服务器请求的响应。这可以用于三种不同的情况。

### [](#seo)SEO

有了 AngularJS 这样的框架，一旦爬虫访问你的网站，JavaScript 就不会被执行。这会导致错误的元标签、标题、内容和图像。对此有一个解决方案，但它很复杂，而且很烦人。一旦爬虫访问您的站点，您将不得不使用 PhantomJS 来呈现页面，并提供所请求页面的静态 HTML 版本。如果第一次点击这个页面，速度会很慢，因为页面需要动态呈现。一旦这样做了，它就被缓存起来，问题就不那么明显了，但对于用 AngularJS 构建的 web 应用程序来说，它仍然是一个瓶颈。ReactJS 的亮点就在这里。因为视图的内容可以很容易地转换成字符串，所以当请求指定的 URL 时，NodeJS 可以为这些静态页面提供服务。这不仅仅发生在爬虫点击页面的时候，它一直都在发生。这意味着谷歌、脸书或任何其他使用爬虫抓取页面信息的服务，将总是被提供一个包含所有必需信息的静态 HTML 页面。

### [](#page-content-of-page-refresh)页面内容页面刷新

除了方便爬虫读取页面内容之外，NodeJS 还有助于页面刷新。想象一下下面的场景。您使用 react 路由制作了 React 应用程序。你点击索引页，一切都很完美。您可以在视图之间导航，一切都非常好。但是出于某种原因，用户决定刷新 React 应用程序的 about 页面。将出现一个 404 页面。但是我为“关于”页面创建了一个路线，为什么它会给我一个 404 页面？原因很简单，React 应用程序的入口在/下面。这意味着除非你在主页上刷新，否则你会得到一个 404 页面，因为找不到你的应用程序的根。在 AngularJS 中，这可以通过始终将所有页面请求指向应用程序的 index.html 页面，并在 Angular 路由器中将请求的 URL 的其余部分放在请求的前面来解决。在 React 中，结合 Node，这要简单得多。通过 Node，您可以将请求的 React 视图呈现为一个字符串，并简单地将该字符串作为响应，就像 SEO 的工作方式一样。因为这次请求页面的不是爬虫，而是用户，所以浏览器将自动呈现 HTML，并向用户呈现正确的页面。一旦浏览器呈现了这个 HTML，React 将自动启动并为新的请求和用户操作做好准备。

### [](#loading-speeds-through-caching)通过缓存加载速度

最后但同样重要的是，页面的加载速度可以大大提高。因为 NodeJS 在每次页面刷新时都会创建一个 HTML 字符串，所以它可以很容易地被缓存。通过这种方式，Node 可以查看服务器内存，并查看页面的缓存版本是否存在。当它这样做时，它可以返回这个缓存版本，而不是动态地呈现 React 视图。当然，您应该始终设置页面缓存的最大间隔时间，因为否则，您漂亮的更新页面可能永远不会真正呈现给用户，您的所有工作都将付之东流。对于经常变化的页面，一个好的时间准则可能是几个小时到一天。其他页面可以缓存一到两周。一个好的平均方法是一次缓存一天的页面，以确保用户尽快获得更新的体验，同时仍然受益于页面更快的加载时间。

### [](#conclusion)结论

那么在服务器和前端之间共享代码意味着什么呢？这意味着用户体验流畅，响应时间短，实现新功能几乎是即时的。没有必要两次编写相同的逻辑(我发现自己在 Angular 中经常这样做)，因为前端和后端的代码完全相同。由于代码完全相同，SEO 可以很容易地完成，通过服务器端呈现，页面始终可用，即使在页面刷新后，页面重新加载也可以通过页面缓存以令人难以置信的速度进行。在整个应用程序中使用同一种语言既快速又方便，这让开发变得很愉快，因为你只需要知道一种语言就可以做所有的事情。