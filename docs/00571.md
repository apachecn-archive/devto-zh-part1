# 向 Ionic 3 (Angular 4|5)应用添加身份验证的 3 种方法

> 原文:[https://dev . to/techiediaries/3-way-to-add-authentic ation-to-ionic-3-angular-45-applications-3c D3](https://dev.to/techiediaries/3-ways-to-add-authentication-to-ionic-3-angular-45-applications-3cd3)

**让我们来看看将认证(登录和注册)添加到使用 Ionic 3 和 Angular 4|5 构建的移动应用程序中的可用选项，如 SaaS(软件即服务)提供商 Firebase、Auth0 和 Okta，免费第三方(单点登录)服务，如脸书、GitHub 和谷歌，自托管服务器，如 Parse 或使用 PHP、Python、Ruby 或 Node.js 构建自己的认证后端等。**

通常，在构建 Ionic 3 移动应用(Android 或 iOS)、NativeScript 移动应用或 Angular 4|5 web 应用时，您会希望在授权用户访问某些受保护的资源或 restful API 端点之前，使用远程 HTTP 服务器对用户进行身份验证。你会说那是授权而不是认证？你是正确的！认证，即验证用户的身份，是最简单的授权形式(您当然可以构建一个更高级的授权系统，但在大多数情况下这不是必需的，除非是多租户应用程序，其中有许多用户对同一个帐户具有不同的角色)。

我最近打算建立一个带认证的 Ionic 应用程序，所以我寻找可用的选择来建立一个具有不同功能的认证系统，如登录、注册、用户验证和通过电子邮件恢复密码等。我发现，如果你已经掌握了 PHP 或 Python (Django 或 Flask 等)等服务器端语言的必要技能，那么用后端技术构建自己的托管解决方案有很多可行的选择。)到托管解决方案(如 Firebase 或 Auth0)，这些解决方案允许您为您的移动/web 应用程序构建一个具有身份验证、数据存储和许多额外功能的后端，而无需预先了解服务器端语言，无需重新发明轮子，也无需雇用后端开发人员。

首先，本文并不打算向您展示如何创建一个 Ionic 3 项目，因为我们之前已经在许多教程中介绍过这个项目。

使用 Ionic 3 和 Angular，你可以围绕这些托管服务(我们接下来会看到)或围绕你自己精心制作的后端(但如果你不是一个熟练的服务器端开发人员，这并不容易)，为流行的平台(如 Android、iOS 和 Windows Universal Platform)构建一个完全成熟和完整的移动应用程序

在本文中，我们将简要介绍在 Ionic 3 和 Angular 4 中构建身份验证系统的不同方法，但不会深入介绍如何使用每个选项，但我会添加关于特定技术的更详细教程的链接(如果有的话),或者在我有时间编写更多教程时更新文章。也请随时使用下面的评论区或通过 Twitter(**[@ tech ediaries](https://dev.to/techiediaries)**)询问具体的教程或更多信息。

## [](#adding-user-authentication-with-saaspaas-services)通过 SaaS/PaaS 服务添加用户认证

[维基百科将 SaaS](https://en.wikipedia.org/wiki/Software_as_a_service) 定义为:

> 软件即服务是一种软件许可和交付模式，在这种模式下，软件在订阅的基础上获得许可，并集中托管。它有时被称为“按需软件”，以前被微软称为“软件加服务”。用户通常使用瘦客户端通过 web 浏览器访问 SaaS。SaaS 已经成为许多商业应用的通用交付模型，包括办公软件、消息软件、工资处理软件、数据库管理系统软件、管理软件等。

简而言之，SaaS 是一种软件交付模式，即一种向用户交付软件的方式，而不需要从互联网下载或从 USB/CD 介质复制软件并安装在本地机器上。

同样来自[维基百科，这里是 PaaS 的定义](https://en.wikipedia.org/wiki/Platform_as_a_service)

> 平台即服务(PaaS)或应用程序平台即服务(aPaaS)是云计算服务的一个类别，它提供了一个平台，允许客户开发、运行和管理应用程序，而无需构建和维护通常与开发和启动应用程序相关的基础架构。PaaS 可以通过两种方式交付:作为提供商提供的公共云服务，消费者通过最少的配置选项控制软件部署，提供商提供网络、服务器、存储、操作系统(OS)、中间件(例如 Java 运行时。NET 运行时、集成等。)、数据库等服务来托管消费者的应用程序；或者作为防火墙内的私有服务(软件或设备)，或者作为部署在公共基础设施上的软件作为服务。

PaaS 不同于 SaaS，因为它为开发者提供了一个完整的平台来开发和运行他们的软件。

## [](#angular-authentication-with-firebase-paas)用 Firebase 进行角度认证(PaaS)

Firebase 是一个 PaaS，它为开发人员提供了一个后端，该后端具有许多用于构建移动应用程序的功能。Firebase 提供许多基本服务:

*   托管和实时数据库:当数据库更新时(创建、读取、更新和删除操作)，所有用户都会得到更新(就像广播系统一样)
*   用户认证和推送通知:您可以轻松地将认证添加到您的应用程序中，而无需构建任何服务器端逻辑
*   客户端 SDK:SDK 提供了与不同语言和平台的快速简单的集成
*   分析学
*   云 Firestore:Firebase 实时数据库的新的更好的替代品

## [](#angular-authentication-with-auth0-saas)用 Auth0 进行角度认证(SaaS)

Auth0 是一个 SaaS 提供程序，可帮助您:

*   使用多个身份验证源添加身份验证，这些身份验证源可以是 Google、脸书、Microsoft Account、LinkedIn、GitHub、Twitter、Box、Salesforce 等社交网站，也可以是 Windows Azure AD、Google Apps、Active Directory、ADFS 或任何 SAML 身份提供商等企业身份系统。
*   通过更传统的用户名/密码数据库添加身份验证。
*   添加对将不同用户帐户与同一用户链接的支持。
*   支持生成签名的 Json Web 令牌来调用您的 API 并安全地传递用户身份。

## [](#-analytics-of-how-when-and-where-users-are-logging-in)-分析用户登录的方式、时间和地点。

通过 JavaScript 规则，从其他来源提取数据并将其添加到用户配置文件中。

使用您的凭证前往[http://auth0.com](http://auth0.com)登录

完成上述步骤后，单击左侧选项卡导航中的客户端选项卡

使用应用程序名称和客户端类型创建新客户端作为单页应用程序

如果您想在登录窗口小部件中显示社交登录，则通过点击连接->社交来启用相应的社交登录。

到目前为止，我们可以继续前进。

```
npm install –g angular2-jwt auth0-lock --save 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

jwt 是一个小型的非个人化库，当从 angular2 应用程序发出 HTTP 请求时，它可以自动附加一个 JSON Web 令牌(JWT)作为授权头。它还有许多帮助方法，对于解码 jwt 之类的事情很有用。

这个库没有任何实现用户认证和检索 jwt 的功能。这些细节将根据您的设置而有所不同，但是在大多数情况下，您将使用一个常规的 HTTP 请求来验证您的用户，然后将他们的 jwt 保存在本地存储中，或者如果成功的话保存在一个 cookie 中。

## [](#angular-authentication-with-okta)角认证用 [Okta](https://www.okta.com/)

Okta 提供了一个 API 服务，允许开发者创建、编辑和安全存储用户账户和用户账户数据，并将它们与一个或多个应用程序连接起来。我们使用户帐户管理更加简单、安全和可扩展，以便您可以更快投入生产。

Okta 登录小部件提供了一个可嵌入的 JavaScript 登录实现，可以很容易地进行定制。登录小工具在每个租户的标准 Okta 登录页面中具有相同的功能集，并增加了更改外观和感觉的灵活性。这个小部件包括对密码重置、忘记密码和强认证的支持——所有这些都是由 Okta 中配置的策略驱动的。开发人员不必编写一行代码就可以在小部件中触发这些功能。对于面向消费者的网站，小部件也支持社交提供商。

## [](#similar-or-alternative-services)类似或替代服务

*   [Glu](https://www.gluu.org/)
*   [dailyred](https://www.dailycred.com/)
*   [授权火箭](https://authrocket.com/)
*   钥匙锁
*   [铁砧研究](https://github.com/anvilresearch/connect)

### [](#passportjs)Passport.js

### [](#self-hosted-server-the-open-source-parse-server)自托管服务器:开源解析服务器

## SSO 服务认证:脸书、谷歌或 GitHub