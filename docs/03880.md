# 像对话一样的代码:抽象的基本层次

> 原文:[https://dev . to/hudsonburgess 7/code-like-a-conversation-basic-levels-of-abstraction-84m](https://dev.to/hudsonburgess7/code-like-a-conversation-basic-levels-of-abstraction-84m)

考虑下面的对话:

> *在乐星巴克*
> 朋友:“嗨哈德森！你今天在忙什么？”
> 我:“没什么，今天很轻松。只是在做一个简单的网络应用。今天下午我可能会和几个朋友一起吃午饭，晚上读点书。你呢？”
> 朋友:“听起来很有趣。今晚我和几个朋友要去看 *<最近上映的电影>*；你要来吗？”我:“当然，我一直想去看。”
> 朋友:“太好了！稍后我会发短信告诉你细节。”

忽略我不喜欢在写作/编程之外盯着屏幕的事实，这是一个可以想象的对话。现在考虑这个:

> *在乐星巴克*
> 朋友:“嗨哈德森！你今天在忙什么？”
> 我:“相当多。今天早上 4:23 我起床，做好早餐，洗完澡，意识到我需要汽油，开车去加油站，刷借记卡，输入密码，加满汽油，然后去上班。现在，我正在为我当前的项目编辑`search-form.component.ts`的第 105 行。今天下午，我可能会和一些朋友一起吃午饭，然后回家，喝一杯用我的法国印刷机制作的无咖啡因咖啡来阅读。朋友:“听起来很有趣。我和几个朋友开车去电影院买最近上映的电影<*>*的票，在正在上映的电影院找到座位，然后目不转睛地盯着屏幕直到电影结束；你想来吗？我:“当然，我一直想去剧院看这部电影。”
> 朋友:“太好了！稍后我会通过短信把详细情况发给你。"

想象一下，如果每个对话都是这样的(恐怖…)

第一个交互很容易理解，因为它停留在相同的抽象层次。工作、吃午餐、阅读、看电影——这些是关于我和我的朋友正在做的事情的高度、简单的陈述。第二种交互很难理解，因为它使用了几个不同的抽象层次。4:23am 和使用短信都是很低级的，具体细节关于*我怎么*做了什么事情；吃午饭和提到几个朋友是描述性的，不涉及细节。

我们的代码应该看起来像第一次对话，并保持一致的抽象层次。反而往往看起来像第二种。它迫使读者不断地切换上下文，使理解代码变得不必要的困难。

为了帮助你重构“对话 2”类型的代码，这里有我最近一直在使用的三个抽象层次。

## [](#1-the-primitive-level)1。原始水平

整型、字符串、布尔型、指针等。操作基本类型、属性或类成员的函数和方法是非常低级的。换句话说，这些函数应该只做“应用程序的繁重工作”。在这个水平上工作可能会有点枯燥，因为它通常很容易——这可能是你做得对的一个迹象。

## [](#2-the-problem-space-level)2。问题空间层次

这取决于你在建造什么。一般来说，问题空间级别在客户机领域的对象*上操作。*例如，如果您正在构建一个图书馆应用程序，问题空间级别可能包含`Book` s、`Patron` s、`ConferenceRoom` s 和`Computer` s。如果您正在构建一个课程注册系统，问题空间级别可能包含`Course` s、`Professor` s 和`Classroom` s。这可能是您在与客户交谈时使用的最低抽象级别。

问题空间层应该由简单的*分组相关值和函数*的类组成。班级之间应该不太需要交流；这就是组件级的用途。

## [](#3-the-component-level)3。组件级别

组件对来自问题空间级别的项目进行操作。再次使用库的例子，一个`CheckoutComponent`可能从一个`Patron`和一个`Book`创建一个`Checkout`记录。以课程注册为例，`SignUpForm`可能允许`Student`注册`Course`。总的来说，组件级做着有趣的工作，为你赚钱。

## [](#conclusion)结论

我意识到这对于一些人来说几乎是幼稚的回顾，但是最近在这三个具体层面上的思考对我帮助很大。

你倾向于使用额外的抽象层次吗？完全不同的抽象方法？让我知道。