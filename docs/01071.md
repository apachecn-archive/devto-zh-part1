# 用 JavaScript 在系统中思考

> 原文：<https://dev.to/ecarriou/thinking-in-systems-with-javascript-3kd4>

每次我必须修复一个 bug 时，我都会遵循相同的工作流程:当 QA 团队的某个人发现一个 bug 时，她/他会发给我一份 bug 报告，其中包含重现(STR)问题的步骤。如果我不懂 STR，我通常会去找她/他，让她/他给我看他/她电脑上的 bug。

这种工作流在许多公司中似乎很常见，我经常对自己说，它必须有一种更好的方法来在错误发生之前获得应用程序的上下文。

# 动态捆绑

但是还有什么更好的方法呢？理想情况下，在错误发生之前制作应用程序的快照是非常好的，这样我们就可以从那个状态修复问题。

例如，假设我们有一个处于所需状态的应用程序，我们可以将该应用程序保存为一种格式，然后加载该格式以恢复该状态。当然，解决这个问题会更快更容易。

事实上，新的工作流程可能是这样的:

[https://www.youtube.com/embed/EuU10hbW-Vo](https://www.youtube.com/embed/EuU10hbW-Vo)

在这个例子中，我们有一个特定上下文(有一个任务)中的 todo 应用程序(基本的 [TodoMVC](http://todomvc.com) 应用程序)。我们在一个**包**(一个字符串化的 JSON 对象)中导出应用程序的上下文，打开一个新的空白页面，然后**安装那个包**。然后，我们看到我们的应用程序在新页面上运行，并带有正确的上下文。因此，我们可以从该上下文开始使用应用程序。

这意味着，作为一名开发人员，我只需加载 QA 团队的某个人发给我的 JSON，就可以获得应用程序的上下文并修复错误。简单多了，是吗？

# 它是如何工作的？

在视频中，我们可以导出该应用程序的状态，并在运行时恢复它，因为:

*   **应用程序被设计成一个系统**并且
*   **应用程序对象(组件、方法、模型)在运行时存储在一个小型 NoSQL 数据库中**。

# 你的应用是一个系统

当我们创建一个应用程序时，我们实际上创建了一个[系统](https://en.wikipedia.org/wiki/System)。一个系统由**模型**定义，由**组件**组成，并以**行为**对事件做出反应。如您所见，这些概念在我们每天创建的应用程序中非常常见。

[![Alt](img/7e488817424fe074a242fef25e983922.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--32NeXZTL--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/3ozjnukg8ybalm0355b7.png)

那么系统和应用程序有什么不同呢？对于系统，我们**首先关注设计，然后关注代码**。怎么做呢？

*   首先**设计你系统的型号**，
*   然后**找到启动系统所需的所有组件**,并
*   然后创建这些组件，**实现它的行为**(用方法)。

您需要完全区分系统的设计和运行时。**设计必须始终是声明性的和执行命令性的**。怎么做呢？使用 [UML](http://uml.org) 来定义您的模型，并将其集成到您的开发工作流程中。

# 一切都是文档

一旦我们准备好执行系统，我们需要将它存储在 NoSQL 数据库中。这是可能的，因为**你所创建的一切都可以作为一个文档**来管理。假设我们想在数据库中存储一个对象，我们需要在 JSON 中序列化它，但是如果我们只存储它的状态，这个过程会更容易。而且是视频里做的。模型和行为也被序列化，这样**整个系统被存储在一个数据库中**。

那么运行时呢？如果我们在当前应用程序中更新一个对象会怎么样？因为所有对象状态都存储在数据库中，所以我们有一个完整的 **ODM** ( *对象-文档映射器*)。这意味着对系统对象的**更新将自动更新其在数据库**中的状态。

所以现在**导出系统的当前状态就像转储数据库**。而**恢复系统状态就像将转储导入数据库**。很简单，不是吗？

# 想了解更多？

我将在下一篇文章中发展我在[中谈到的概念和模式，但是如果你现在想创建一些系统，你可以:](https://dev.to/ecarriou/designing-systems-17po)

*   安装[系统运行时](https://designfirst.io/systemruntime/)，一个 JavaScript 库来创建和管理系统和
*   阅读 Donella H. Meadows 的《系统思考》一书。系统世界的伟大介绍。

* * *

*鸣谢:封面图片由[安特·罗泽茨基](https://unsplash.com/@rozetsky)拍摄。*