# 拜托，破坏建筑！

> 原文：<https://dev.to/pavsaund/please-break-the-build>

当你按下按钮并把代码发送到服务器时的感觉。你完了！您已经实现了一个新的特性，它将为最终用户做好准备。很快。您会看到代码已经到达了构建机器，并且一个新的构建得到了调度。你起床休息一会儿，结果在路上和几个同事聊天。当你回来的时候，你会发现你的收件箱里有 10 条消息，你的团队聊天也有相同数量的通知。

环顾四周，您会发现计划的构建失败了。现在又有 5 个其他的计划构建以失败告终。看起来你刚刚打破了构建。剩下的 20 名开发人员现在被阻止提交他们的代码。

*你坐下来感觉……*

现在，任何一个像样的团队中的大多数开发人员都认识到了上面的场景。或许他们甚至已经把编写代码当成了回家前做的最后一件事？问题是，开发商是以什么心态？他们只是在团队中犯了一个大罪，还是这只是一件平常的事情？

让我们探索一下我们的开发人员可能会有什么样的反应，以及这会如何反映他们的团队。

## ...害怕！——“不要破坏构建！”

在某些情况下，我们的开发人员会抓狂。他们知道所有这些信息都是人们通过电子渠道“喊”出来的。也许第二天会有一顶愚蠢的帽子在等着他们，这表明[他们打破了常规，需要被嘲笑一下](http://codingwithempathy.com/2017/01/10/rituals-of-shaming-in-the-software-industry/)。

当每次都有人指责开发人员时，可能会出现新的行为。一种恐惧感。害怕再次被指出是构建破坏者。害怕在团队中的其他人面前显得“不那么”重要。担心构建统计数据会回到性能评审中。

恐惧会以一种方式在作品中表现出来，当然会对有问题的开发者产生负面影响。

从更积极的方面来看，拥有一个强大的代码推送和部署机制将确保构建管道在大多数时候都是绿色的。这反过来意味着将有一个明确的路径来生产热补丁。

## ...冷漠——“哦，构建服务器总是坏的”

另一种极端的情况是，开发人员在他们的机器上实际上没有那么多通知。似乎没有人关心构建是否被破坏，即使它是红色的，也没有人对此做任何事情。他们实际上为服务器堆积了越来越多的工作。

像这样的情况表明了一种不关心构建管道的普遍态度，并且可能对软件本身的质量感觉很差。看到构建服务器“总是”坏，现在认为这和故事中那个喊“狼来了”的男孩一样；被忽略的东西。

这里没有真正积极的一面，除了很容易将您的工作合并到主干上发送到构建服务器。坏的方面是代码可能充满了 bug，因为开发人员似乎没有维护功能测试。或者很难在构建服务器上运行测试。似乎也没有一种基于失败的学习和适应的文化。

## ...坚决-“请，打破构建(然后修复)”

在这个场景中，我们的开发人员在他们的监视器上查看请求，并意识到最后的代码推送破坏了构建。看起来这是一次失败的测试。我们的开发人员加入到团队聊天中，并宣布构建被破坏，他们正在尝试解除对构建的封锁。

在这个团队中，开发人员不害怕被羞辱，他们也不觉得只是强行推进代码，并希望其他人会修复它。开发人员应该有一个[主动的心态](http://codingwithempathy.com/2016/04/26/the-proactive-software-developer/)，跟进他们的构建，并在不顺利的情况下承担责任。如果这没有发生，那么另一个开发人员可以恢复违规的提交，允许其他人安全地部署。然后，可以在没有压力的情况下进行修复，因为知道整个团队都在等着他们。

有这种态度的团队更容易关注“为什么”。这意味着他们可以从发生的错误中学习，并对团队的流程进行必要的更改以进行补偿。

## 因此...

每种团队文化都会产生完全不同的结果。

一个低容错能力的严格团队会导致缺乏实验，并且总是专注于确保你的代码不会破坏构建。这可能会导致质量的提高，但也可能会降低士气和创造力？

一个粗心的团队可能会导致代码质量出现问题。其中构建服务器充当第二个编译器，有时也是第一个编译器。开发人员漠不关心，不关心构建。这可能会导致许多包带着错误发送给客户。可能在构建服务器上被捕获的错误。

一个强调安全的团队找到了一个平衡点，开发者知道保持构建绿色的重要性。他们也知道当开发人员犯错误时，这是一个安全措施。有这种心态的团队有机会互相帮助，确保最终用户得到他们喜欢的产品。

## 舍入

团队内部的安全使得开发人员能够进行真正的对话。关于改进和适应的对话。但是安全并不是一个好的构建设置的先决条件。上面的任何一个团队都可以有一个好的架构，但是可能没有一个对他们发布的产品有信心的团队，也没有互相信任的人。

尽管有许多变化，但真实世界比本文所描述的要微妙得多。我仍然是一个打破构建一次太多，比太少的粉丝。在一天结束的时候，所有的一切都是关于反馈循环和尽可能在代码编写的时候得到答案。最重要的是，这是关于学习和调整你的团队和流程。建筑警告只是众多迹象之一。

*这篇文章最初发表在[同理心编码](http://codingwithempathy.com/2017/01/17/please-break-build/)博客*上