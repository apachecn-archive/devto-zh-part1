# AWS 中 EBS 卷容量规划的重要性

> 原文:[https://dev . to/ashanfernando/the-importance-of-capacity-planning-for-EBS-volumes-in-AWS-3pd 0](https://dev.to/ashanfernando/the-importance-of-capacity-planning-for-ebs-volumes-in-aws-3pd0)

在 AWS 中，为应用程序提供带有 EBS 卷的 EC2 实例非常简单。但是，您是否想过，您是在调配低于还是超过所需的存储容量？

这是过度供应发生的主要地方之一。为了安全起见，通常会调配更高的容量或吞吐量，但最终会在应用程序工作负载发生变化时出现问题。因此，考虑卷类型、大小、吞吐量、延迟、自动化和成本等不同因素，进行适当的容量规划非常重要。

此外，还有其他因素，如选择拍摄快照，预热等。这也会影响 AWS EBS 性能，也需要考虑容量规划。

容量规划不佳的应用程序面临的主要挑战之一是处理峰值应用程序负载以及处理故障。有了 AWS 中可用的自动化工具的支持并了解其局限性，就有可能针对这些情况进行规划，而不会过度调配成本更高的存储。

# 存储卷类型和大小

这是做出错误选择的主要领域之一，因为 AWS EBS 为底层物理存储设备类型和存储容量提供了多个选项。过去，规划存储大小非常重要，因为增加存储大小后需要重新启动 EC2 实例，这可能会导致停机。使用当前一代的 AWS [EBS 卷](https://n2ws.com/how-to-guides/how-to-increase-the-size-of-an-aws-ebs-cloud-volume-attached-to-a-linux-machine.html)，您可以增加大小，更改 IOPS 的卷类型，而无需分离它。对于分离的卷也可以这样做。

您可以采取的另一个重要措施是使用 CloudFormation、AWS CLI 或使用 AWS SDKs 自动执行相关的卷修改，以便您可以在需要时以最佳方式配置所需的配置。

# 储存 IOPS

对所需的吞吐量进行规划也同样重要。大多数时候，我看到许多 EC2 配置在选择通用 SSD 时使用默认设置，这很好，除非你知道自己在做什么。然而，对于在规划吞吐量时需要考虑的一些顺序访问场景或重要工作负载，选择 [HDD](https://en.wikipedia.org/wiki/Hard_disk_drive) 存储而非 SSD 存储具有成本优势。另一方面，如果您正在处理具有高性能要求和 IOPS 的应用程序，则有必要对应用程序进行多次负载测试，并了解不同工作负载性质的 IOPS 要求，以便能够提供足够的自动化和容量来高效运行应用程序。

# 存储延迟

这是许多人忘记考虑的领域之一，尤其是对于高性能应用。管理延迟的一个重要方面是管理队列长度，这取决于 EBS 设备的未决 I/o 数量。您需要考虑这一点，并根据延迟和 I/O 大小规划队列考虑事项。

许多人不知道的另一点是，从快照创建 EBS 卷时，第一次尝试访问它可能会导致意外的延迟。对于需要从第一次读取开始的性能的应用程序，需要通过在生产中运行应用程序之前命中每个数据块来预热，这可以通过初始化 EBS 来实现。

# 自动化

这是你应该关注的一个非常重要的领域。了解自动化 EBS 容量和资源调配可能性的限制和功能可以节省大量资金，因为 EBS 卷的资源调配过多或不足。

您可以从了解自动化功能的一个地方开始，在 web 控制台中浏览 AWS EBS 卷中的功能，然后了解您可以自动化或需要手动交互的底层配置。此外，查看 [CloudWatch](https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/WhatIsCloudWatch.html) for EBS 中的矩阵还可以深入了解监控和触发自动化的可能性，这可能需要在 Lambda 函数或周期监控器中使用 AWS EBS SDK 编写自定义逻辑，并提供触发器。

# 费用

任何人都可以提供最高吞吐量的极限。需要仔细规划和努力来确定所需的容量限制，并相应地进行资源调配。对于 AWS EBS 容量规划，这是您需要仔细评估的最重要的方面，因为最后，它归结为应用程序性能以及应用程序如何高效地利用存储来降低成本。

在选择了 EBS 卷大小、类型和 IOPS 配置后，我经常使用 [AWS 计算器](https://calculator.s3.amazonaws.com/index.html)来得出粗略的估计。了解 AWS 成本因地区和使用情况而异也很重要。因此，选择正确的区域，同时为自动化任务进行必要的配置，如果操作得当，可以为您节省大量资金。这包括在所需的时间范围内安排快照，通过预测分析增加存储大小，同时在适当的时间范围内影响更改。