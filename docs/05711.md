# 为什么我为我的顶石做了一颗宝石

> 原文:[https://dev.to/jhiatt/why-i-made-a-gem-for-my-capstone](https://dev.to/jhiatt/why-i-made-a-gem-for-my-capstone)

我的 Ruby on Rails capstone 项目是一个带有日历组件的预算应用程序。我决定以月日期格式保存一些信息，以周日期格式保存其他信息(在我的下一篇文章中会详细讨论这个决定的利弊)。基本上，我有两组不兼容的数据，没有简单的方法来整合它们，我需要在我的预算中做任何数学计算。这真的很烦人。有一天，在训练营快结束的时候，我们上了一堂如何制作自己的宝石的课。我们用了很多宝石，但我不知道做一个有多容易。你所要做的就是在你的终端中写一些代码，然后用 Ruby 编写代码。
事实上，我决定为我的顶点做一颗宝石的原因是因为我认为它会很棒！(这些东西我用了几个星期，现在可以做一个了！)但我想分享一下我从这个过程中获得的一些感悟。

1.  想了解语言是如何工作的？做一颗宝石！
2.  什么时候应该为自己的代码制作一个宝石？
3.  为什么你应该只写代码而不做宝石(大部分时间)。

## [](#1-want-to-understand-how-languages-work)1。想了解语言是如何工作的？

我记得当我得知 Rails 本身是一块红宝石时，我感到很惊讶。虽然我承认我对 Ruby 这样的语言是如何制作的一无所知，但我认为这个过程有点像制作宝石。你从 1 和 0 开始，用一种你能创造一种基础语言的方式来写它们。然后你用这种语言创建一堆快捷方式，使它更容易编码，结果是一种全新的语言。这个过程一直持续到到达 Ruby。然后用这种方式编写 Ruby 来创建 Rails，这使得 Ruby 更容易使用，就像 Angular、React 和 Vue.js 用 JavaScript 编写来使 JavaScript 更容易使用一样。换句话说，打造一颗宝石是这个过程的一部分。虽然我在这方面还是个新手，但我一直认为理解这些语言是如何工作的以及它们来自哪里是加深你作为程序员的理解并为学习新语言做准备的一个非常好的方法。

## [](#2-when-should-you-make-a-gem-for-your-own-code)2。什么时候应该为自己的代码制作一个宝石？

从根本上说，gem 是从你正在开发的应用程序中完全删除的。它基本上是另一个很容易链接到你当前应用的应用。这意味着更新您的代码更加困难，这可能是一种痛苦。另一方面，当更新你的代码变得更加困难时，你可以强迫自己不去管那些你需要的代码。就我而言，我有一个非常简单的具体问题；我需要将年日期格式转换成周日期格式，反之亦然。除了修复任何 bug，我知道我不需要改变那个功能，把它编码起来放在一边会很方便，这样我就不用担心它了。在对它做了一点工作之后，我意识到建立 RSpec 测试并运行你自己的测试来测试 gem 的功能也是非常容易的。如果你发现自己有这种问题，还没有你满意的解决方案，这是你将来用不同的应用程序可能会遇到的问题，也许值得考虑制作一个宝石。当然也有很多不利的方面。我发现的主要问题是，在使用了一段时间后，我意识到我的关于如何使用 gem 的文档并不完整，我仍然没有尽我所能彻底地更新它。还有一点维护费用。不难，只是记起来麻烦。

## [](#3-why-you-should-just-write-code-and-not-make-a-gem-most-of-the-time)3。为什么你应该只写代码而不做宝石(大部分时间)。

这就引出了我的最后一点。在 Rails 中，有很多方法可以解决问题。对于像我这样简单的方法，我可以很容易地创建一个模型方法来做同样的事情。事实上，只有当代码太复杂而无法保存在一个应用程序中，或者太有用而无法保存在一个应用程序中的时候，你才 100%应该做一个宝石。就我个人的偏好而言，制作一个 gem 可以让我更容易保持条理，并专注于我的其他代码(这需要一些帮助)。我也不知道使用 gem 对计算速度和应用程序大小等方面的影响。请不吝赐教，纠正错误，或提供更好的解释。我很高兴收到任何反馈。我是这方面的新手，希望能做得更好。对于那些一直梦想制作一个宝石，但被反对者阻止的程序员:动手吧！活出你的梦想！我为你骄傲！