# 现代源代码控制系统和 DevOps 入门

> 原文:[https://dev . to/nkd agility/getting-started-with-a-modern-source-control-system-and-devo PS-3jcf](https://dev.to/nkdagility/getting-started-with-a-modern-source-control-system-and-devops-3jcf)

当选择一个现代的源代码控制系统时，有许多事情你必须考虑。其中一些纯粹是关于代码的，但是现代的源代码控制系统不仅仅是关于代码。它们是关于您的整个应用程序生命周期和支持 DevOps 实践的，它们是关于您用来理解和管理您的开发过程并交付优秀软件的元数据的。您选择的工具应该与您使用的专业人员和实践相得益彰。

> DevOps 是人员、流程和实践的结合，能够为您的最终用户持续交付价值
> 
> Donovan Brown
> 
> ## TL；速度三角形定位法(dead reckoning)

我已经教了[专业 Scrum 开发者(PSD)培训](https://nkdagility.com/training/courses/professional-scrum-developer-training/)并且和软件团队一起工作了 7 年。我从未遇到过比[Visual Studio Team Services(VSTS)](https://www.visualstudio.com/team-services/)更好的平台来管理所需的元数据，以促进在任何平台上部署的任何技术中定期构建专业软件。我看过 Java，。NET、Web、Android、iOS 和大型机团队都在 VSTS 一起工作，拥有共同的愿景和对相同元数据的访问。如果你有很多团队，我为 Scrum 做了一个关于[与 VSTS 扩展职业 Scrum 的网络直播。](https://nkdagility.com/scaling-professional-scrum-visual-studio-team-services/)

## 让我们先解决一些事情

如果你正在写代码，那么它应该在源代码控制中。更具体地说，如果你为你的公司写代码，那么它必须在源代码控制中。您编写或更改的每一行代码都是您组织的资产，应该反映在某处的资产负债表上。你增加的任何价值都是资本支出，这是你的股东/所有者应该关心的，任何维护都是运营支出，你的会计师可以注销。

**将您的代码置于源代码控制中…** 是的，我仍然会遇到不使用源代码控制的组织。不，不仅是小型血汗工厂，银行也是如此。您希望您的实时交易银行系统处于源代码控制之下吗？因为我会的！

另一件要避免的事情是，直接部署到生产环境是一个坏主意！如果您从本地工作站进行部署，那么您会给业务带来巨大风险，并降低组织资产的质量。任何降低质量的决定都需要由你的执行董事会根据你的会计师的建议做出。同样，组织评估坐在资产负债表上。错误地表示资产的价值是一种欺诈，无知不是借口。即使你有自动化的构建；如果您不定期发布，或者在发布之间有很长时间，那么您可能有办法快速修复产品的 bug。绕过你通常对运输软件的检查和平衡会降低质量，并显示出你的组织内在缺乏工程上的优秀。

**通过自动化发布管道部署软件……**是的，我遇到过从工作站直接部署到生产环境的公司。我甚至与一家公司合作，该公司使用试错混合和匹配 DLL 来使软件在生产中工作。一个客户需要进行 9000 多个小时的手动测试来验证这一点

**现代的源码控制不仅仅是代码…** 在过去，就像操作系统以前是简单的东西，你可以把你的代码粘在源码控制里，叫它好。过去，你使用 VSS、Subversion 或 Perforce 就足够好了。不再是了。正如您希望浏览器与您的操作系统一起发布一样，您现在希望构建引擎、发布管理和计划工具与您的源代码控制系统一起发布，并且将它们集成在一起。所以不要把你的选择建立在一件事情上，想想你需要的集成和其他工具来支持你的现代软件开发管道。

我希望我的发布工具能够准确理解；对代码进行了哪些更改，系统的哪些功能受到了影响，以及该版本对用户体验和遥测系统性能产生了哪些影响。我希望我的工作跟踪工具能够准确理解；什么分支与这项工作相关，哪个构建包含变更，以及谁批准了将代码引入系统的拉请求。这是元数据的类型，不管实现技术如何，我希望工程和管理人员可以使用它来帮助他们理解他们的过程和事情是如何进行的。

总之，重要的是要记住专注于成为一个专业的 Scrum 团队而不是业余的。虽然你需要关注 Scrum 指南，但你也需要卓越的工程技术和一套价值观和原则。

## 为现代软件团队推荐的良好实践

我几乎从不使用“最佳实践”这个术语，尤其是对于软件交付，任何给你最佳实践的人通常都是在吹牛。只有适合当前业务需求或当前情况的良好实践。在现代软件开发世界中，您需要接受这样一个事实，即您采用的任何过程或实践都是不完善的定义，并且需要进行调整以满足您的需求。也就是说，如果您想继续保持竞争力，拥有源代码控制和自动化发布管道并不是可选的。你需要能够监控你的交货时间和周期时间。

您应该考虑的一些一般准则:

*   **不要在没有源代码控制的情况下编码**–最终工具并不重要，但是如果你正在构建开源软件(OSS ),那么你需要使用 GitHub。GitHub 垄断了开放源码软件市场，没有竞争对手。但是，如果您正在构建封闭源代码软件，那么没有比 Visual Studio Team Services (VSTS)更好的平台了。你可以获得无限的私有库，如果你有 MSDN 许可证，就像大多数基于微软堆栈的组织一样，那么它已经包含在你的许可证中了。如果你不在微软的堆栈上，那么我仍然推荐 VSTS 作为最便宜和最有特色的平台，它支持任何平台和任何环境。
*   **使用特征标志最小化分支**–分支通过合并引入浪费，并经常引入质量问题。通过使用特性标志和其他软件模式来避免整个问题。如果你正在使用一个分布式源代码控制系统(DVCS ),只有从 MASTER 发布的经过全面测试的代码，但是你可以拥有无限数量的主题和个人分支，只要它们是短暂的。如果您正在使用基于服务器的源代码控制系统(SVCS ),那么您应该尽可能地完全避免分支，并努力向 DVCS 转移。也许你只需要[主干/主/主要]和[开发/工作]分支，但是要关注零分支策略。
*   **转移到 Git**——不管你正在构建的软件的规模如何，你都应该在 Git 上开发。如果你执着于你的 SVCS (TFVC，普里斯，SVN，无论什么)，那么你只是执着于过去，依赖于过时的技术。就连微软的 Windows 团队也转向了 Git，就像必应、Xbox、&整个开发者部门一样。
*   **至少每 30 天满足你对完成的定义**–创建一个完成的定义，代表你开发的所有东西的最低质量标准。确保该定义反映了将软件交付到产品中所需要做的一切，并且至少每 30 天进行一次。如果你能更有规律地到达那里，那就更好了，如果你能[在你的计划冲刺](https://nkdagility.com/continuous-deliver-sprint/)中练习连续交付，那就更好了。
*   **至少每 30 天从你的用户那里得到反馈**——交付优秀软件的诀窍之一就是在你的客户需要的时候构建他们需要的东西。做到这一点的唯一方法是将您刚刚构建的内容交到客户手中，以便他们可以告诉您这是正确的，然后在他们向您提供反馈后立即转向。连续交付生产是实现这一目标的最佳方式。
*   **首先创建测试，这样你就可以构建第一次被询问的内容**——你应该总是朝着测试优先的实践努力。虽然对许多人来说这意味着测试驱动开发(TDD ),但我喜欢把它看作任何形式的测试优先。当测试人员单独构建测试用例，并且只在完成后给编码人员看时，你的编码人员怎么可能希望通过质量关呢？首先写好你的测试用例，让编码人员让它们通过。我也推荐编码人员使用 TDD 和结对编程。遵循测试优先将帮助你从最后的测试质量转移到一开始的构建质量。
*   **尽可能自动化每个测试**–自动化是成功交付的关键，因为你不可能每 30 天运行一次测试。每 30 天你就添加更多的测试，如果没有自动化，你就跟不上。理想情况下，所有的测试从一开始就是自动化的。一个有趣的例子是，微软在大约 3 年前将其所有的测试工作转移到开发团队，并在大约 2 年前摆脱了他们最后的外部测试团队。让你的开发团队对质量负责，并给他们实现质量的工具。
*   **创建自动化发布渠道**–创建自动化发布渠道很难，但好处是数不胜数的。从质量到弹性，你必须有一个来支持现代开发实践。您应该至少每 30 天关注一次交付生产(从尽可能近的地方开始)，但是预计一天需要运送多次。自动化将使您的流程变得快速而简单，并让您在解决问题的同时专注于改善渠道。这就是精益实践和关注流程能够真正帮助减少浪费和改进流程的地方。

为了支持这些东西，我使用 VSTS 作为我的软件开发平台。随着微软将其平台从执行中分离出来，并专注于编排，我们得到了一个可以支持任何团队使用任何平台的任何技术进行开发的系统。这允许我们有一个单一的统一的组织愿景和工具来协调我们的投资组合、计划、执行、编码、构建、测试管理和发布，同时将这些任务的执行和在构建我们的软件中使用的技术留给团队。你可能有一个团队使用 Nuget，另一个团队使用 NPM，或者一个团队使用 Maven，另一个团队使用 Gulp。不管你的实现选择是什么，VSTS 都可以支持你的团队进行 Scrum，并且有规律地在任何地方部署任何东西。当我在教一个专业 Scrum 开发者(PSD)的课程时，我总是使用 VSTS，不管学生们在研究什么技术。

不要局限于有限的技术，VSTS 支持每个平台上的每项技术。

帖子[开始使用现代源代码控制系统和 DevOps](https://nkdagility.com/getting-started-with-modern-source-control-system-and-devops/) 首先出现在[马丁·辛舍尔伍德-裸体敏捷有限公司](https://nkdagility.com)上。