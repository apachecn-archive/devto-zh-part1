# 我不理会埃尔姆是错误的，我想你可能也是。

> 原文:[https://dev . to/nimmo/I-was-to-was-was-was-was-was-was-was-was-was-was-was-was-was-was-was-was-was-was-was-was-was-was-was-](https://dev.to/nimmo/i-was-wrong-to-dismiss-elm-and-i-think-you-probably-aretoo)

*" *叹*……另一种编译成 JavaScript 的语言。通过"*

几年前，当我第一次听说 Elm 时，我很快就抛弃了它，主要是因为我在心理上将它比作 Coffeescript，一种我不介意说我不太喜欢的语言。我想我不是唯一一个犯这种错误的人，所以我想我应该写一个简短的帖子，谈谈为什么我最终会全力以赴地使用 Elm，以及为什么我认为这种语言值得你花时间。
以下是亮点:

*注意:所有的比较都是针对 JavaScript 的，因为 Elm 是一个前端工具，而 JS 是那个特定城镇中最大的游戏*

## 一切都是不可变的

虽然函数式编程无论如何都不是一个新事物，但由于它提供了更简洁、本质上更可重用的方法，近年来它吸引了很多新的粉丝。FP 的一个主要原则是非常小心地管理状态，虽然这在 JavaScript 中是可能实现的，但它需要纪律和每个接触代码库的开发人员的支持，因为 JavaScript 会让你做任何你想做的事情。

Elm 使这变得容易得多，因为它没有给你工具去改变你正在使用的函数之外的任何东西，并且当一个常量需要在一个函数中被更新时，一个新的常量被创建，而不是覆盖旧的。这确保了当给定相同的输入时，函数总是有相同的输出(FP 的另一个重要原则)，这也使得你的代码本质上是可测试的。你不用担心不小心把你的代码编在一起，因为你真的没有那个能力。

## 每个函数都有返回值

在 JavaScript 中，您可以自己确保所有函数都有返回值，或者您可以选择没有返回值，并赋予自己从任何地方调用这些函数的能力。这听起来很棒，不是吗？灵活性太棒了。直到你在一个周末之后读回你的代码，你遇到一个函数在另一个函数中间被调用，你必须跟踪它，找出发生了什么，在那个函数里面，有另一个函数被调用，你必须去读那个函数。或者你发现你写了一个函数，它有一个返回值，但是也在里面引起了一些其他的副作用，现在你必须遵循两条线索来提醒你自己在周五下午在想什么

Elm 没有给你选择让自己陷入这种困境的权利。Elm 中的每个函数都充当一个表达式(如前所述，它不能控制自身之外的任何东西)，并返回该表达式的值(考虑一下在一个`if`块中使用 return 语句与在 JS 中实际返回`if`块之间的区别)。这对代码可读性的影响是惊人的——你知道无论如何，你已经对函数的使用有了一个基本的概念。

## 每个函数都是自动执行的

在 JavaScript 中，您可以通过使用闭包来部分应用一个函数，以返回一个已经应用了`x`个参数的函数调用。这很容易做到，但是如果不理解闭包，就不容易读懂，并且当经验不足的开发人员在您的代码中看到这种情况时，会感到困惑。

在 Elm 中，每个函数都会自动为您完成这项工作。如果你调用一个没有所有必需参数的函数，你将返回一个带有剩余参数的函数。所以如果你有一个名为`multiply`的函数，它以`x`和`y`为参数，并返回`x * y`，那么做一个`double`函数就和`double = multiply 2`一样简单。就是这样。然后你可以调用`double 10`，它会给你`20`。没有其他要求。所以是`double = x => multiply(2, x)` (JS) vs `double = multiply 2` (Elm)。在我看来，Elm 代码更加简洁易懂。

## 类型，以及类型标注

阿甘最令人难忘的名言是*“生活就像一个 JavaScript 应用程序:你永远不知道你会得到什么”*。好吧，我很肯定这是关于 JS 的；我已经有一段时间没看过那部电影了。但这一点仍然存在；当你在看一个你没写过的 JS 函数(甚至是你写过的)，你不一定知道你会在那里看到什么。它可能使用也可能不使用`JSDoc`来记录它的输入和输出类型，如果是，它可能是最新的，也可能不是最新的，而且不能保证所有其他东西都会被记录下来，即使您当前正在查看的函数是最新的。也许您会发现 TypeScript 正在这个项目中使用，并且类型定义可能是最新的，也可能不是最新的(因为即使您放入的类型不是您所说的类型，TypeScript 仍然会为您编译)。或者，开发团队真的很喜欢强制，并故意不关心类型，只要他们不严格需要。

Elm 是强类型的，对类型注释有极好的支持。注释作为易读的语句出现在函数之上；例如，对于前面提到的`multiply`函数，类型注释应该是`multiplyÂ : Int -> Int -> Int`。如果这看起来很奇怪，记得我说的自动涂抹。你可以把那个注释理解为*“取两个整数，返回一个整数”*(由于最后一个值永远是返回值)，但它真正说的是*“取一个整数，返回一个函数取一个整数，返回一个整数”*；因此参数和返回值使用相同的符号。

注释是由编译器评估的，所以如果你写了一个函数，却得到了错误的类型注释，当你试图编译你的代码时，你会通过一个非常容易理解的编译错误知道它。如果你没有为你的函数写注释(记得我说过它们是可选的——虽然我个人还没有看到任何人写 Elm 而不使用它们，这是有原因的),编译器会告诉你你的注释应该是什么，所以如果你不确定，你可以复制粘贴它。

您还可以通过类型别名来创建自己的类型，这样，如果您为与您的应用程序相关的内容创建类型别名，您的注释将更具可读性。例如，您可能正在编写一个电子商务应用程序，它的`Cart`包含`Items`，这使得您的代码库对于不熟悉它的人来说更容易理解。

## 编译器

我已经谈到了这一点，但是 Elm 的编译器非常有用；到了这样一种程度，您会发现自己非常自信，知道只要编译好了，您的应用程序就会如您所期望的那样工作。这也使得这门语言更容易掌握，因为当你迈出第一步时，编译器会主动帮助你整理代码。Elm 承诺帮助您*“生成性能卓越且无运行时异常的 JavaScript”*，以我目前的经验来看，它很好地实现了这一承诺。

## 关闭思绪

如你所知，我真的很喜欢 Elm，我认为它有一个光明的未来。这很有趣(我经常发现自己在心理上“准备好”完成之前就完成了一些功能！)，并且令人耳目一新，它背后有一个强大的、支持它的社区。这很容易上手，而且由于编译器和内置的虚拟 DOM，您可以确信您的应用程序是健壮的和高性能的。

老实说，对于前端来说，有一个真正可行的 JS 替代品是很好的。别误会，我也爱 JS；这篇文章比较 Elm 和 JS 的语气仅仅是因为，在我看来，Elm 在每种情况下都比较有利。这就是为什么我现在除了 Elm 之外，不会花时间在任何不必要的地方为前端开发写任何东西。

关于 Elm，还有很多我不知道的地方。如果你有兴趣了解更多，我强烈推荐你从理查德·费尔德曼精彩的*“榆树简介”*演讲开始，你可以在 Youtube 上找到[。](https://www.youtube.com/watch?v=zBHB9i8e3Kc)

我希望将来能看到更多的人在 Elm 发展。我真诚地认为，如果你决定加入，你的生活会变得更好。:)