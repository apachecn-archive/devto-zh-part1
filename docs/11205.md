# 用 gulp 给自动生成的文件添加通知

> 原文:[https://dev . to/adamkdean/add-notices-to-auto-generated-files-with-gulp-476 b](https://dev.to/adamkdean/add-notices-to-auto-generated-files-with-gulp-476b)

我今天写了一个小工具来弹出到我的 gulp 工作流中，它将一些文本写到 gulp 处理的文件的顶部。我发现的问题是，你经常使用源文件和生成文件(例如 jsx -> js)来处理一个项目，却意外地编辑了错误的文件，结果你的更改被覆盖了。

这个工具会在自动生成的文件顶部放一个通知，希望有助于阻止这种情况。还有其他的软件包也能做到这一点，但是到目前为止，在过去的一周里已经发布了大约 10 个 gulp-header，其中相当一部分被破解了。而且他们来自 godaddy，所以对这个包的信心很低！

## 用法

您可以使用默认通知:

```
var gulp = require('gulp'),
    notice = require('gulp-notice');

gulp.task('default', function () {
    gulp.src('src/*.js')
        .pipe(notice())
        .pipe(gulp.dest('dist/'));
}); 
```

它将在文件前添加:

```
/* --------------------------------------------------------------------- *\
|  This code was auto-generated by a tool.                                |
|                                                                         |
|  Changes to this file may cause incorrect behavior and will be lost if  |
|  the code is regenerated.                                               |
\* --------------------------------------------------------------------- */ 
```

或者您可以提供自己的字符串作为第一个参数:

```
var gulp = require('gulp'),
    notice = require('gulp-notice');

var text = '/* this file was auto-generated */';

gulp.task('default', function () {
    gulp.src('src/*.js')
        .pipe(notice(text))
        .pipe(gulp.dest('dist/'));
}); 
```

它将在文件前添加:

```
/* this file was auto-generated */ 
```

## 
  
与溪流一起工作

如果你正在处理流(如乙烯-源-流)，那么 gulp-streamify 将帮助你。假设你使用的是 vinyl-source-stream 的 browserify，你可以用 streamify 包装 gulp-notice，这样就可以了:

```
return b.bundle()

    .pipe(source(entry))

    .pipe(streamify(notice()))

    .pipe(gulp.dest('./public/js')); 
```

## 
  
安装它

```
npm install gulp-notice 
```

## 
  
更多链接

GitHub:[https://github.com/adamkdean/gulp-notice](https://github.com/adamkdean/gulp-notice)
T3】NPM:[https://www.npmjs.com/package/gulp-notice](https://www.npmjs.com/package/gulp-notice)