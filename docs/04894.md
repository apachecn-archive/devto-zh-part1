# 代码审查

> 原文：<https://dev.to/collinbarrett/code-reviews-3l46>

[![Late Night Coding (Lego)](img/2ffde679d7f356062bec4c69de35dc72.png)T2】](https://collinmbarrett.com/code-reviews/)

我进入第四个专业软件开发角色已经快一个月了。到目前为止，这是一次极好的经历；但是，就像任何转变一样，当我融入一个新的团队时，我总是需要做出一些调整。在我的上一份工作中，我们已经开始尝试实现同行代码评审的实践，但是太多的事情以很快的速度发生，使得它们变得习惯和有用。在我的前两个职位中，实践根本不是开发方法的一部分。

现在，在谢尔比系统公司，我作为产品开发团队的第三名开发人员被任命为新的职位。因此，在团队中有一些新的努力来实现一些标准化的实践和编码风格。管理层支持同行代码评审的集成，所以我们给他们一个坚实的基础。以下是实施最初几周的一些反思。

## 物流

我们的团队使用 [TFS](https://azure.microsoft.com/en-us/services/devops/server/) 进行源代码控制，其集成的问题跟踪和代码审查功能内置于 [Visual Studio](https://visualstudio.microsoft.com/) 中。到目前为止，我们已经同意在几乎每次签入到主开发分支之前，向其他两个团队成员提交代码审查请求。

代码审查的 TFS 界面相当不错。我们可以从挂起的更改中自动生成搁置集，并包括任何相关的工作项或以前的代码审查。发送请求时，我们可以自定义收件人并提供可选注释。对于审查者来说，该工具提供了一个干净的当前与建议变更的并列代码比较，以及对特定行进行评论的能力。

顺便说一下，因为我们仍然在 TFS(相对于 git)，拥有个人发展分支变得笨拙(因为 TFS 在分支时不重复)。到目前为止，搁置集作为局部迭代变更集的临时存放处工作得还不错；然而，对于更大的任务，在我准备提交代码评审请求并合并到 main 之前，最好有一个个人分支。我们当前的策略是增量地为一个较大任务的较小的子任务请求评审和检入，而不是在一个分支中执行主要的开发项目，然后一次全部合并。我是尽可能频繁地签入(为了更健壮的撤销)的实践的订户，所以我们将看到这如何长期进行。要求对子任务进行迭代评审可能会导致比需要的更频繁和冗长的代码评审。

## 计时

毫无疑问，频繁的代码审查最大的问题之一是它所花费的时间。在实践的前几周，每个开发人员平均每天都会收到一到两个代码审查请求。毫无疑问，开发生命周期会有所放缓，至少在开始时是这样，因为我们要花一部分时间来审查同行代码。

除了时间量，我们还必须平衡上下文切换和及时完成之间的权衡。当我提交代码评审请求时，我希望从我的同事那里得到一个稍微紧密的反馈循环(最好在 4-6 小时内)。然而，在接收端，如果我深陷于一个复杂的 bug 或我自己的特性中，我讨厌切换出我的思维空间来对我的同事的问题提供及时的评论。

我们还没有讨论团队的目标周转时间。我们不需要，因为每个人都在半天，最多一整天内提供反馈。然而，当这个过程不再是新的，不再是我们头脑中最重要的事情时，这个时间线可能会开始下滑。这肯定是我们需要监测的事情。

## 反馈类型

尽管从来没有明确讨论过，我们在评论中所做的评论都是围绕代码风格和架构的。由于我们有一个 QA 团队(这是一个我以前没有过的惊人的新体验)，严格测试功能并不是我们在代码审查中必须要做的事情。我们的过程期望最初的开发者和 QA 团队在发布之前测试变更。

反馈意图的例子是建议等效逻辑的更简单的语法，推荐最佳实践的应用，或者询问是否需要改变或者改变是否与手头的问题直接相关。然而，更重要的是，我在几周前修改了一个已经发布的接口方法的签名，犯了一个严重的错误，代码审查有助于发现潜在的重大变化。(在我看来，该接口与其他几个类在同一个文件中，所以在执行重构时并不明显。然而，这肯定是一个错误，我仍然应该抓住。)

评论几乎完全是改变的建议。给出的积极反馈很少。假设在没有评论的地方，我们做得很好。然而，当一个解决方案看起来非常优雅或巧妙时，我会试着不时地加入积极的评论。

## 值

持续执行的代码审查将提高我们代码库的质量和一致性。让团队的其他成员在签入代码之前浏览一下我的代码，将确保我不会重复现有扩展方法的功能，偏离应用程序中其他地方使用的模式，或者选择对安全性或性能有负面影响的设计。

其次，评估将更快地提升我的个人发展技能。我本科学习期间的代码考试是为了评分，但是自从我参加工作以来，我很少使用我在学校学到的语言/平台。通过让同事监视和评论我的变更集，我将学会更好的做事方法和我可能还没有经历过的隐藏的陷阱。类似地，看到我的同事写的代码会对我的技能产生同样的提炼。

## 你的经历

你对代码评审有什么经验？你有什么技巧可以让它们对我们的团队更有价值？

*<small>免责声明:所表达的观点仅是我个人的观点，不代表我的雇主的观点或意见。</small>T3】*