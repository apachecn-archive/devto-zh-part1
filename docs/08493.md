# 我应该在 GUI 级别还是 API 级别进行测试？

> 原文:[https://dev . to/evil tester/should-I-test-at-GUI-level-or-the-API-level](https://dev.to/eviltester/should-i-test-at-the-gui-level-or-the-api-level)

*TLDR；去哪里考？你能隔离功能吗？如果是这样，请对隔离进行最严格的测试。然后看看整合了什么，以及如何整合。然后按照“如何”的要求测试集成。*

[![](../Images/a4968df829f7d7d4452e99d9bc7d3b3f.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--aUM5NKH2--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/http://eviltester.com/images/blog/automating/where_to_test_levels_360x349.png)

> **问题**:当决定在 GUI 级别或 API 级别进行测试时，有经验法则吗？有什么规则可以帮助决定什么时候在一个级别上测试而不是在另一个级别上测试吗？

**回答**:我不认为我用的是简单的经验法则。但是我会尝试探索一些我用来做决定的思维过程。

当我试图决定是测试 GUI 还是 API 时，我必须弄清楚:

*   我想测试什么？
*   我可以将正在测试的功能隔离到特定的“级别”吗？

我认为“隔离”这个词可能是你正在寻找的“经验法则”。

*   在可以隔离的地方进行大量测试。
*   针对“孤立的”独特集成功能，对集成进行大量测试
*   根据实现的需要对集成进行大量测试
*   测试集成的紧急行为
*   在集成过程中，更轻松地测试系统之间的重叠

例如，如果系统具有“创建用户”功能:

*   通过管理界面在 GUI 中公开
*   通过 API REST 调用公开

我需要在两个级别进行测试，因为“创建用户”的功能并不局限于一个级别。

不过，我必须问的问题是，在每个级别上我必须测试“多少”和“什么”?

如果我的 GUI 调用 REST API，我可能会决定不通过 GUI 进行太多的测试，因为我可以将其建模为(至少)两个通信系统。GUI 系统和 API 系统。

我可以在“API 级别”大量测试 API 中隔离的功能部分，然后少量测试 GUI 和 API 之间集成的重叠部分。

我想测试 GUI 中的独特功能。例如，GUI 可能有从 GUI 交互触发的 ajax 调用——我想在 GUI 级别测试一下。

根据开发过程，我们可能会发现 JavaScript 单元测试已经涵盖了“ajax”调用。但是它们还没有在浏览器页面中集成运行，也没有在使用 GUI 的所有浏览器和操作系统中集成运行。因此，根据所使用的库，我可能想要在不同的操作系统上跨浏览器进行测试

如果 GUI 调用不同于 API 的后端端点，那么我需要测试通向后端代码的两条路径，直到我到达后端系统中遇到共享代码的地方——假设 REST API 和 GUI 触发的后端流都使用系统中的共享代码。

但是在这一点上，我还需要考虑我们从覆盖共享代码的单元测试中获得了多少覆盖率。

我的经验法则可能看起来像一个列表:

*   建立一个系统模型，这样你就可以识别集成点和“孤立的”共享功能。
*   尽可能在最低点测试隔离的功能。
*   回溯到更高(或“对等”)级别的集成和抽象，从集成系统的角度考虑系统。
*   在抽象的更高(或“对等”)层次上寻找独特的功能，您将需要在那里测试它们。
*   如果您孤立地使用独特的功能——通过模拟集成系统——那么您可能需要从技术风险的角度来看这个问题，并决定您是否需要在集成时使用它，或者使用多少。

我也可以将上述建模为:

*   创建系统的多个重叠模型
*   考虑覆盖系统的多个模型
*   考虑通过系统不同模型的流量覆盖范围
*   考虑与实施和系统运行环境相关的技术风险

*PS。当我解释这一点时，人们经常把它映射到他们最喜欢的金字塔模型上。我不使用任何金字塔模型。我更喜欢对我正在工作的系统建模，而不是有一个通用的模型。其他人更喜欢金字塔模型。*

[最初发布于 EvilTester.com](http://blog.eviltester.com/2017/02/should-i-test-at-gui-level-or-api-level.html)