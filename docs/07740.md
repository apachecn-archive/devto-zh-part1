# Xamarin 产品说明

> 原文:[https://dev.to/jonstodle/xamarin-products-explained-clo](https://dev.to/jonstodle/xamarin-products-explained-clo)

我看到关于不同 Xamarin 解决方案的问题不时出现，我想我应该在这里写下我的解释，并在人们提问时链接到这里。

我将经历以下内容:

*   Xamarin.iOS
*   Xamarin。机器人
*   Xamarin。形式
    *   共享与 PCL

# Xamarin.iOS

使用 Xamarin.iOS 基本上和使用 Objective-C 为 iOS 开发是一样的，不同的是你用的是 C#而不是 Objective-C，平台上所有的 API 都是一样的，它们的命名一样，工作一样。这就像你在为 iOS 进行原生开发，只不过你不用学习 Objective-C(或者 Swift)。

API 的某些方面已经 C#化了:属性名遵循 PascalCase 的 C#标准，视图被实现为`partial`类，事件被用来代替委托。你可以在 [Xamarin 文档和指南](https://developer.xamarin.com/guides/ios/)中了解更多信息。通过一点尝试和错误，你应该能够查找一个关于堆栈溢出的 iOS 问题，并理解如何在 Xamarin.iOS 中做这件事。

# Xamarin。机器人

这与 Xamarin.iOS 的情况非常相似:API 与原生 Android 开发中的相同，但是您将使用 C#而不是 Java 进行开发。有一些 C#化(比如使用事件而不是接口+类)，但是由于 C#与 Java 如此相似，差异甚至比 Xamarin.iOS 更小。

# Xamarin . IOs 和 xa marin 的好处。机器人

您将进行所有的平台开发，就像您正在本地进行一样(但是用 C#代替)，但是您将能够将业务逻辑放在一个独立于平台的项目中并重用它。这意味着你所有的模型类、网络逻辑、视图模型(如果你正在做类似 MVVM 的事情)和(可能)更多的东西可以在两个平台之间共享。

还有对依赖注入的内置支持，用于平台特定的实现。例如:请求访问相机在 iOS 和 Android 之间是不同的，所以你必须为每个平台编写代码。您在独立于平台的项目中定义了一个`interface`,它表示请求访问摄像机。在特定于平台的项目中，您创建一个实现接口的类，并将其注册到依赖服务。在运行时，您请求特定于平台的接口实现。

# Xamarin。形式

首先:Xamarin。Forms 使用 Xamarin.iOS 和 Xamarin。引擎盖下的安卓。什么 Xamarin。Forms 提供了一种以通用方式描述 UI 的方法。您创建 UI 和 Xamarin。表单将使用该信息生成特定于平台的控件版本。我举个例子解释一下:

在 Xamarin。表单中有一个类型叫做`Button`。这种类型只描述一个假想按钮的属性。你可以设置它应该显示什么文本，它应该有什么背景颜色，以及当用户点击它时运行什么代码。然而，`Button`对 iOS 和 Android 一无所知。

当你运行应用程序时。Forms 遍历您编写的所有 UI 代码(XAML 或 C#)，并使用一个`Renderer`来创建特定于平台的`Button`版本。例如，在 iOS 上，这意味着一个`UIButton`。然后查看`Button` ( `Text`、`BackgroundColor`、点击处理器等)的所有属性，并将这些值设置为`UIButton`上的相应值。

当您运行应用程序时，UI 中的每个控件都会发生这种情况。事实上，您正在创建与使用 Xamarin.iOS 和 Xamarin 相同的 UI。Android，但是你不用做两次工作。

您甚至可以为现有控件(覆盖内置控件)或自己的控件创建自己的`Renderer`。你可以在 Xamarin 中做同样的事情。使用 Xamarin.iOS 和 Xamarin 创建表单。Android，但你不必做样板的东西两次。

# 共享 vs PCL 项目

这可能是使用 Xamarin.Forms 时最大的困惑。Forms 项目，要求您选择:共享或 PCL 项目。我试着解释一下:

# PCL 项目

我将从基于 PCL 的项目开始，因为我认为它最容易理解。

几乎所有的代码都是在 PCL 项目中编写的。这包括业务逻辑和 UI 代码。这个项目对具体的平台一无所知，你主要参考 Xamarin。表单库。

为了能够使用平台特定的功能(比如请求访问摄像机)，您可以使用前面解释过的内置`DependencyService`。

# 共享项目

共享项目最初是在 Windows 8.1 时代引入的。虽然它被称为项目，但它本身并不是一个完整的项目。

虽然可以向项目中添加文件和文件夹，但不能添加对其他程序集的引用或添加 Nuget 包。这是因为共享项目不会自己编译。编译引用共享项目的任何项目时，共享项目中的文件将被复制到引用项目中，并作为该项目的一部分进行编译。

这意味着共享项目将可以访问添加到引用该共享项目的项目中的所有程序集和 Nugets。当您的代码运行时，它将位于引用项目中。

这意味着平台特定的特性在共享项目中是可用的，但是当你试图编译一个 iOS 项目而共享项目中有 Android 代码时，你会得到一个错误，反之亦然。

要使用特定于平台的代码，您可以使用编译器指令(`#if __IOS__`和`#if __ANDROID__`)在为该平台编译时只包含特定于平台的代码。也可以使用分部类，其中特定于平台的代码是特定于平台的项目中分部类的一部分。

# 结论

你选择哪条路完全取决于你的需求，没有真正正确的答案，但我希望我已经帮助你做出了正确的决定。

编码快乐！