# 鲍勃叔叔是认真的吗？

> 原文:[https://dev.to/bosepchuk/is-uncle-bob-serious-dhi](https://dev.to/bosepchuk/is-uncle-bob-serious-dhi)

罗伯特·c·马丁(鲍勃叔叔)多年来一直在鼓吹“软件职业化”，我也一直在点头附和。作为一个职业，我相信软件开发人员需要提升他们的游戏水平。然而，我开始担心鲍勃叔叔的方法。前几天，当我读到他题为[工具不是答案](http://blog.cleancoder.com/uncle-bob/2017/10/04/CodeIsNotTheAnswer.html)的博文时，我达到了崩溃的边缘。

他对最近《大西洋月刊》的一篇文章提出异议:[即将到来的软件天启](https://www.theatlantic.com/technology/archive/2017/09/saving-the-world-from-code/540393/)。让我看看能否总结一下这两篇文章的主题。

### 大西洋:

我们正在为安全关键应用编写越来越多的软件，软件已经变得如此复杂，以至于程序员无法详尽地测试或理解软件可能经历的所有可能的输入、状态和交互。我们正试图建立超出我们智力管理能力的系统。

面对所有这些复杂性，我们需要新的方法来帮助软件开发人员编写正确运行(并且安全)的软件。当前生产安全关键软件的方法对社会尤其危险，因为当软件包含缺陷时，我们不能像观察轮胎瘪了一样观察它们——它们是看不见的。

### 鲍勃大叔:

> 原因:
> 
> 1.  太多程序员(原文如此)在进度压力下草率地走捷径。
> 2.  太多其他程序员认为这很好，并提供掩护。
> 
> 显而易见的解决方案是:
> 
> 1.  提高软件学科和专业水平。
> 2.  永远不要为马虎的工作找借口。

## 鲍勃大叔的论点连嗅嗅测试都通不过吗？

《大西洋月刊》文章的主题安全关键软件系统(T1)具有令人震惊的高质量标准。例如，进入这些系统的需求分析、规划、设计、编码、测试、文档、验证和法规遵从性远远超出了任何正常组织对电子商务网站或移动应用程序的考虑。

阅读[他们写的东西是正确的](https://www.fastcompany.com/28121/they-write-right-stuff)，告诉我你是否认为鲍勃大叔的思路是正确的(注意，这篇文章是 21 年前写的，艺术水平已经有了显著的进步)。这听起来像是 NASA 的程序员需要更多的纪律和专业精神，并且永远不要为草率的工作找借口吗？

## 来自麻省理工学院的安全关键系统专家有什么要说的？

南希·莱弗森博士在《大西洋》的文章中被多次引用，但是鲍勃大叔完全忽略了那些部分。

所以，让我们来回顾一下她[演讲](https://youtu.be/WBktiCyPLo4?t=21m20s)中的一段摘录:

> 我做这个已经三十六年了。我读过数百份事故报告，其中很多都有软件。和软件相关的每个人(原文如此)，这是一个需求问题。这不是编码问题。所以这是第一件非常重要的事情。**每个人都在编码和测试上工作，而不是在需求上工作，这就是问题所在。**(着重部分由作者标明)

她不能说得比那更清楚了。我说过她是专家吗？我有没有提到她从事各种重要项目，包括政府机密武器项目？

## 约翰·c·奈特博士怎么样？

在他的论文[安全关键系统:挑战和方向](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.78.8095&rep=rep1&type=pdf)中，[奈特博士](https://www.nrc.gov/public-involve/conference-symposia/ric/past/2015/docs/bios/bio1-178.html)描述了构建安全关键系统的许多挑战，但是开发者纪律和专业精神不在其中。这是他能做到的最接近的了:

> 以目前的技术，安全关键系统的开发时间和努力是如此极端，以至于在许多情况下，建造未来需要的系统将是不可能的。该领域的任何新软件技术都必须解决成本和时间问题。这里的挑战令人生畏，因为减少百分之几不会产生太大的影响。大约需要一个数量级。

开发安全关键系统极其缓慢，这增加了成本。但是 QA 实践实际上确保了交付的软件功能符合需求中的规定。Bob 叔叔可能会说一些项目很慢是因为那些项目的开发人员缺乏纪律性和专业性。但是像这样的声明需要证据，而鲍勃叔叔什么也没有提供。

## 是的，工具是答案的一部分(但不是全部答案)

天哪，我们需要更多更好的工具。刚开始编程的时候，用的是基本语法高亮的文本编辑器，就这样。我曾经通过 FTP 进入生产服务器，上传我的代码并运行它；我没有开发环境。

### 更好的工具帮助我成为更好的程序员

后来我搬到了 Eclipse，并认为我没有早点这么做是愚蠢的。Eclipse 捕捉到了我在基本文本编辑器中忽略的各种错误。它就像文字处理软件中拼错的单词一样突出了它们——太棒了。

几年后，我采用 Subversion 作为我的 VCS，我认为我没有早点这么做是愚蠢的。我可以看到我的项目的所有历史记录，我可以进行更改并恢复它们。太棒了。

同上:

*   代码审查/拉取请求/吉拉
*   具有集成静态分析、自动重构工具、自动代码格式化和单元测试的高级 ide，只需按一下按钮即可运行
*   转/转储/转储
*   TimeDivisionDuplex 时分双工
*   基于属性的测试( [QuickCheck](https://en.wikipedia.org/wiki/QuickCheck) 系列)
*   虚拟计算机
*   结构
*   开源库

我开始编程已经将近二十年了，在这段时间里，我的工具发生了显著的变化。我只能想象未来 20 年内可用的工具将如何改变我们编写和交付代码的方式。

让我们看看一些可能性。

### 更好的静态分析仪

我的静态分析器仍然不理解我的代码，只能挑出简单的错误。他们标记了大量的假阳性。在大型代码库上，它们可能会很慢。如果我只有一个静态分析器，可以做我想做的一切，而不是 4-5 个，我会很高兴。编写自定义规则也很耗时。那里有很大的改进空间。

### 通过施工技术纠正

然后是“通过构造纠正”技术。我看了这个[视频](https://www.youtube.com/watch?v=03mUs5NlT6U)。他让我相信“一个可证明的运行时错误的缺失”。于是我找了一本关于[SPARK](https://en.wikipedia.org/wiki/SPARK_(programming_language))(Ada 的子集)的书，开始学习。哇，你也许能够在 Spark 中编写高度可靠和正确的软件，但这将是一个缓慢的过程(也就是昂贵的)。

这是未来吗？我不知道，但如果在 Spark 中编程更容易，它在安全关键软件领域可能会有更好的机会。如果有人为我最喜欢的编程语言开发出准确且易于使用的正式方法功能，那也是很有趣的。不需要为这个模块写测试，证明者说它在数学上是合理的。

**2020 年 10 月 23 日更新:**
我最近[用 Ada/SPARK 编写了一个 sumobot](https://smallbusinessprogramming.com/high-integrity-sumobot-build-instructions/) 来帮助我对这些语言有所了解。我认为你要么喜欢 Ada/SPARK，要么讨厌它。如果你喜欢 python 的速度和灵活性，你可能会讨厌 Ada/SPARK。但是如果您关心低缺陷率和高质量，您将会喜欢 Ada/SPARK 的特性，这些特性使您能够实现这些目标。

### 软件跟踪每个需求，直到实现它的代码和证明它被正确实现的测试

我看了一个视频，视频中演示者谈到了她的团队在安全关键系统中跟踪数以千计的需求到特定代码和测试用例并返回以实现法规遵从性的困难。随着项目的进展，当需求、测试和代码发生变化时，他们试图保持一切同步，任务变得更加困难。那个团队和每个像他们一样的团队都需要更好的工具。而且，最终，我希望看到我最喜欢的编程语言的 IDE 中内置这种东西，如果它易于使用的话。

### 形式规范语言/模型检查器

然后还有正式的规范语言要考虑。《大西洋月刊》的文章提到了 TLA+,但还有其他的。现在想象一下这些语言很容易使用。想象一下，你有一个工具可以帮助你以迭代的方式构建一个正式的规范，它指导你确保你覆盖了所有的情况。当你完成后，你可以让它为你生成部分或全部代码。另外，如果你卡住了，你可以在 StackOverflow 上找到答案。酷吗？地狱，是的！

### 还有更多...

我确信我们可以在评论中集思广益出几十个新的或改进的工具，帮助我们以更低的成本写出更好、更正确的代码。

## 为什么加强纪律性和专业性不是答案

最根本的问题是，即使是我们当中最聪明的人也没有智力去理解和推理我们试图构建的复杂互动系统中可能发生的所有事情。这不是纪律或职业素养的问题。这些系统可以表达紧急行为或正确地行动，但是以它们设计者不可预见的方式。

这就是为什么莱韦森博士的书如此重要。我们“只是”必须指定不安全的状态和行为，并防止软件进入这些状态，而不是试图找出所有这些状态和行为。嗯，事情要复杂得多，但这是其中的一部分。

## 结论

我完全支持提高软件的专业性和纪律性，但是鲍勃大叔关于如何在安全关键软件系统中防止“即将到来的软件末日”的观点是错误的。该领域的专家们并没有把程序员的专业性和纪律性放在防止失败的首要位置。

更多的程序员纪律和专业精神不会有坏处，但我们也需要驯服复杂性的方法、更好的工具、提高我们生产率的方法、对紧急行为进行推理的方法、对开发安全关键软件系统实际上起作用的研究、针对软件开发过程所有方面的新的和更好的技术，尤其是获得正确需求的更好的方法，等等。

我知道有成千上万的程序员在粗制滥造低质量的代码。但是构建安全关键系统的组织有适当的过程来防止绝大多数代码进入他们的系统。因此，如果软件天启真的发生了，你可以相当肯定地说，这不会是因为某个程序员认为他可以走捷径并侥幸逃脱。

你怎么想呢?同意还是不同意？我很想听听你的想法。

## 附加资源

博文:[安全关键软件:每个开发人员都应该知道的 15 件事](https://smallbusinessprogramming.com/safety-critical-software-15-things-every-developer-should-know/)

下面是鲍勃大叔的软件专业主义演讲视频:[https://youtu.be/BSaAMQVq01E](https://youtu.be/BSaAMQVq01E)

南希·莱韦森的书《创造一个更安全的世界》如此重要，以至于她免费出版了整本书:【https://www.dropbox.com/s/dwl3782mc6fcjih/8179.pdf?dl=0】T2

关于安全关键系统的优秀视频:[https://youtu.be/E0igfLcilSk](https://youtu.be/E0igfLcilSk)

关于“通过构造纠正”技术的优秀视频:[https://youtu.be/03mUs5NlT6U](https://youtu.be/03mUs5NlT6U)