# 帕特龙命令

> 原文：<https://dev.to/mangelsnc/patron-command-4611>

[![](img/f319e878a5cde64ff013badb85a17888.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--8HvG0smP--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AuMsX8fxU3MfIPihkO_Ymng.jpeg)

继关于图案的帖子之后，今天我们将看到一种行为模式:图案**指挥**。

让我们简单回顾一下，此类命令的目的是定义对象之间的交互方式。尽管如此，这种模式的具体目的是:

> **将一个请求封装为一个对象，以便可以用不同的请求或请求队列参数化其他对象。**

基本上，我们要执行一个操作(例如，注册一个用户)，我们所做的是创建一个命令，其中包含处理者执行此任务所需的信息。

这种模式的主要行为者是:

*   顾客/呼叫者。在上面的注册用户示例中，它是开始所有内容的类，也可以是与 POST 路径关联的驱动程序，该驱动程序使用表单中的值注册新用户。
*   **命令。**是封装执行动作所需的全部信息的类。它们在大多数情况下都是简单的 DTOs，尽管它们可能包含内部的其他对象。如下文所述，很重要的是，它们很容易序列化。在我们的示例中，这将是一个包含要注册的用户数据(如电子邮件和密码)的类。
*   **命令处理程序/处理程序。**是包含要运行的逻辑的类，可以具有外部依赖关系，如消息传递服务、数据库连接、日志写入服务等等。此类必须只执行一个操作，否则其名称会非常混乱。

按照惯例，所有*处理程序*都应具有已知的执行命令的方法，如:*处理、执行、do…* 或 PHP 的情况下使用魔术方法*调用。*

如果要利用“*type hinting”*来确保我们的处理程序仅执行正确类型的命令，则为所有命令设置通用接口会变得复杂。一个选项是，所有命令都实现一个接口【T2 命令】，所有处理程序都实现一个接口【T4 命令处理程序】，使用 execute 方法(Command $command 或 handle)，并在该接口内运行检查以确保它是正确的类。

我个人推荐使用*_ _ _ _ _ _ _ _ _ 调用，*，因为我们除了上课本身之外，没有介绍任何执行方法。如果您不熟悉*方法──调用*，我建议您查看[PHP 文档。](http://php.net/manual/es/language.oop5.magic.php#object.invoke)

#### 实施实例

上述示例的实施可以是: