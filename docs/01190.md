# TDD 是一个伦理问题

> 原文：<https://dev.to/fefas/tdd-is-an-ethical-matter-19h4>

## 我的第一次谈话

几个月前，我做了第一次演讲:“TDD 简介”。我开始讲述我每天采取这种做法的个人动机。因此，我引用了当我们没有帮助我们关注需求或指导我们下一步的东西时，开发过程是如何浪费时间的。我还提到了开发人员如何花费太多精力试图从内部到外部预测所有可能的场景。

在那之后，我基本上介绍了具有三个著名步骤的反馈循环，解释了每个步骤背后的关注点，并介绍了现有的测试级别，以便能够展示一个示例代码，说明 TDD 如何在 real 上工作。最后，我提到了一些好的实践，比如 [AAA](http://wiki.c2.com/?ArrangeActAssert) 和 [FIRST](https://pragprog.com/magazines/2012-01/unit-tests-are-first) ，它们有助于提高测试的可读性和质量。

演讲的目标是介绍开发人员需要编写的基本元素 *test first* 以及测试应该如何指导开发过程的概述。然而，那些对这个主题感兴趣的人，仍然需要自己深入研究。

一个很好的总结:没有浪费，没有在无用的东西上的努力，没有“如果发生这种情况怎么办？或者如果真的发生了呢？”… **TDD 让我们有机会专注于所需的业务行为，并解决问题**。

> 我喜欢说 *TDD 直奔主题*。

## 反应

最后让我吃惊的不是一些问题和积极的反馈，而是一些开发人员开始权衡时间和结果，说 TDD 是一个遥不可及的理想，只是一个哲学主题…

我在那里问自己:如果我甚至没有说 TDD 是必须的，为什么他们会感到如此受攻击？

从那以后，我一直在思考发生了什么，在这里，我用我上一篇文章中几乎相同的论点来回答:我们必须意识到我们的职业态度和我们工作的后果。

> 光抱怨才是真正的浪费时间。

我们必须面对现实，意识到如果我们今天不写测试，我们和其他人明天会有很多问题。我们还需要学习尽可能交付更好的代码…我保证测试优先是一个很好的学习起点。

无论如何，主要的担忧仍然是: *TDD 真的很难 100%* 。

是的，我知道这一点，我不相信每个人都会在一夜之间完美地运用它。即使对于最有经验的开发人员来说，以正确的方式进行测试也是极具挑战性的，因为你不仅需要对依赖注入、干净代码、面向对象、重构等有很好的理解。，还要体面地处理错误……学习曲线比较长。

但是，我还会提到 *TDD 是一门学科*。

当你开始使用它，理解它并体验 TDD 如何帮助更快地开发和提高代码质量时，首先编写测试将是自然的。在每一个完整的周期之后，事情会变得更容易，你会以一种更一致的方式去做……然后突然之间，TDD 简单地组成了你的开发过程，你最终同意 **TDD 是浪费时间**的反义词。

我相信你会很快问自己:*为什么一些开发人员仍然抱怨测试优先？*

[![Total Mess](img/bbd1984c9d62cf829f9367b9e9634abe.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--jKhl6b2c--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://blog.fefas.net/asseimg/posts/2018-01-02-tdd-is-an-ethical-matter-scream.jpg)

## 为什么 TDD 是一个伦理问题？

Bob 叔叔用下面的话开始了这本干净的代码书:

> “写干净的代码是你必须做的，这样你才能称自己为专业人士。不尽全力是没有合理的借口的。”

抱歉，但是没有借口仅仅通过争论 TDD 是一种浪费来跳过测试。另一方面，团队在开发时给错误的人发电子邮件，并花费大量精力来重现和理解产品中已经存在的 bug。这些是公司因为无法预测简单问题而损失数百万美元的常见情况…

你还在抱怨吗？如果你的团队很慢，你应该回顾你的过程和你的应用程序设计，如果很难采用 TDD，你应该有一个计划来教导你的团队… **跳过测试总是错误的选择**。

让我们分析一下鲍勃大叔在 *GOTO 的一次演讲中所说的话；阿姆斯特丹* ( [视频此处](https://www.youtube.com/watch?v=Tng6Fox8EfI&t=2500)):

> “我将在每个版本中提供一个快速、可靠且可重复的证据，证明代码的每个元素都按预期工作(…)或者称为测试(…)我们什么时候决定某些代码不工作是可以的？[不，]如果其中一些代码不工作，这是不行的。因此，我们应该提供证据(……)证明代码如您所想的那样工作。
> 
> 我们都是人。我们都会犯错(…)。不可能做到尽善尽美，但不去尝试总是一个错误。我们将简单地接受一定程度的缺陷的想法是不恰当的。这是不道德的。我们不能接受。"

TDD 在开始时可能会多花一点时间，但是相信我，它有很多好处。

以下是值得一读的好书:

*   杰夫·朗格，2015。[Java 8 中 JUnit 的实用单元测试](https://www.amazon.com/Pragmatic-Unit-Testing-Java-JUnit-ebook/dp/B00VXT0ZA2)
*   纳特·普莱斯；史蒂夫·弗里曼，2009。[在测试的引导下开发面向对象的软件](https://www.amazon.com/Growing-Object-Oriented-Software-Guided-Tests/dp/0321503627)
*   罗伯特·马丁，2008 年。[干净代码:敏捷软件技术手册](https://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882)

谢谢，让我们先测试一下！

> 最初发表于[blog.fefas.net](https://blog.fefas.net/tdd-is-an-ethical-matter)。