# 声明是有代价的

> 原文：<https://dev.to/oleggromov/declarativity-comes-at-a-price>

有一个广为接受的观点，我也同意，声明性代码比命令性代码更好。它不容易出错，通常更有说服力和简洁，因此更易于维护。当您使用现有的声明性库，如 JavaScript 标准库(`Array` / `Object`方法等)时，这是一个很好的日常原则。)，下划线/lodash 或 React。然而，当要决定是编写一些声明性代码(因此更加一般化)还是留下一个强制性的临时解决方案时，我建议至少三思。

每种算法都有特定的复杂性；它不仅具有计算复杂性(通过在不同输入大小上运行所需的时间/内存来说明)，而且还具有编写和理解实现它的代码的*复杂性。后者主要落在与代码打交道的程序员身上，在预算和期限的世界里，这也是一个值得关注的问题。*

我在这篇文章的标题*中所说的声明性是有代价的*，可以分成几个论点。

## 实施成本可能会更高

每当你决定以声明的方式写一些东西，并且已经实现了所需的原语，比如数组的`map`或`filter`，你可能就可以了。有人已经花了时间编写和调试它，剩下唯一要做的就是理解这些原语是如何工作的，并为这些小片段构建自己的算法。更好的是，一旦你理解了这些构件是如何工作的，你就获得了一种编写简洁代码的难得技能，这种技能几乎是世界上任何一个优秀的程序员都应该欣赏的。

另一方面，当你正在解决的问题或你正在选择的解决方案并不常见，并且你无法找到所需的“模块”时，你可能会面临一个自己实现它们的艰难决定。有时候概括和抽象需要你付出更多的努力。

## 理解和调试价格可能会更高

声明性代码乍看起来更清晰，但当深入理解和调试时，这种印象可能会改变。像`map`或`filter`这样简单的东西相对来说是众所周知和理解的，像 React 的组件生命周期这样更复杂的东西要复杂得多，自我实现的、可能没有文档和/或测试的原语可能是你最糟糕的噩梦。你可能最终会解开你的同事很久以前提出的抽象概念，或者甚至重写它们，以便让它如你所愿地工作。

抽象问题的一般化解决方案是困难的，而声明性代码本质上就是抽象问题的组成部分。当你概括一个想法并向你的朋友解释时，为了便于理解，你也可以简化它；另一方面，当您一般化算法时，您可能会创建越来越多的边缘情况，因为否则代码将无法工作。与最初的小问题相比，它会导致更多的复杂性，需要编写更多的测试，需要花费更多的时间来理解。

此外，我们喜欢代码中的雄辩和整洁。一个一般化的解决方案可能一开始就不太好，你会花几个小时让它看起来更好，而原始问题的解决方案可能只需要几分钟。

## 结论

不要误解我，我既不反对声明性代码，也不支持它。只是要意识到代价。当你幸运地拥有必要的工具时，就去使用它们吧。当你在闪亮的声明式 React 应用程序中遇到一个令人讨厌的命令式代码时，你很可能有理由担心。试着三思而后行，做一个深思熟虑的决定。我们不会更接近好的和有效的代码，只是重复每个角落都在说的教条。另一方面，考虑实现、理解和调试成本可能有助于做出正确的决定，不管是保持代码原样，还是为使其声明性和更一般化而付出代价。

* * *

[这篇文章最初发表在我的博客 oleggromov.com](http://oleggromov.com/notes/2017-07-declarativity-comes-at-a-price/?utm_source=devto)