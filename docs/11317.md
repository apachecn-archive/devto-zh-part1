# 最弱的数据库设计

> 原文：<https://dev.to/funkysi1701/weakest-database-design-pbp>

我最近一直在做一个数据库，这个数据库还没有被设计出来，但是已经被很多人一起破解了很多年。

它最初是由我的主管创建的一个 Microsoft Access 数据库，用来记录我们公司的所有项目。它只不过是一张列出所有东西的表。在某种程度上，数据和前端是分开的，数据存储在 SQL Server 中，前端是 Microsoft Access ADP。

这些年来，越来越多的列被添加到这个表中，它很久以前就变得很难管理了。存在一些规范化的表，但是大多数情况下，所有的东西都存储在这个表中，这使得查询非常困难。在最近一次统计中，这个数据库表中有 81 列。

之前已经尝试过改进该数据库，但是由于整个公司基本上都在运行该数据库，并且没有人知道数据库需要做的所有事情，因此任何改变都非常困难。我怀疑这可能超出了我的能力范围，但我打算试一试。

我的一个优势是版本控制。所有的表和结构都在版本控制中，所以当我破坏时，我可以回滚它们。对前端的任何更改也在源代码控制中，在出现问题的情况下很难回滚，但并非不可能。

我已经与部门领导会面，试图确定 81 个栏目中哪些正在使用，哪些可以删除。数据库设计不应该是一种民主，你的数据库应该以一种最有效的方式来存储你的数据。在这种情况下，感觉有点像数据库在扮演“最薄弱的环节”，每个人都投票反对不受欢迎的列。“你是最弱的数据库列。再见！”经过多次讨论，我有 30 多个可以删除的专栏，还有 10 个左右需要进一步研究。

使用数据库的 Visual Studio 项目，我删除了列。这产生了数千个错误，因为大多数列都包含在视图和存储过程的负载中。所有这些引用都需要删除，所以不是一个小工作。更糟糕的是，视图和存储过程一片混乱，很难阅读 T-SQL 代码并了解什么在做什么。我下一份工作的一部分将是整理所有这些查询，以便我可以看到什么是什么。

使用 Visual Studio 项目进行这些更改的优点是，我可以生成一个 SQL 脚本来执行这些更改，并且可以重新运行几次并测试恢复不同的列，因为这不太可能是一个平稳的部署。