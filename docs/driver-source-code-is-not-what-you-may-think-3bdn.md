# 驱动源代码并不是你所想的那样

> 原文：<https://dev.to/reg__/driver-source-code-is-not-what-you-may-think-3bdn>

AMD 刚刚发布了 Vulkan 的[开源驱动，源代码在 MIT 许可下可以在 GitHub 上获得。这是一个解释驱动程序来源的好机会。当我在开发图形驱动程序时(我不再做了——我现在有了完全不同的职位)，人们一直问我“用 C 语言编码感觉如何？”或者“在内核空间编码感觉如何？”，不知道在我的情况下没有一个是真的。](https://gpuopen.com/gaming-product/amd-open-source-driver-for-vulkan/)

许多开发人员认为编写一个驱动程序是一些核心的、低级的东西。也许对于嵌入式系统世界的一些小驱动来说是真的。他们可能不知道的是，现代 PC 图形驱动程序(我敢打赌其他类型的驱动程序也是如此)是一个非常复杂的东西，其中只有一小部分工作在内核模式，只有一小部分(如果有的话)是用普通的 C 或汇编语言编写的。大部分代码都是普通的 C++，有类、虚函数等等。它被编译成普通的用户模式 DLL 库，并被加载到游戏的地址空间中。当然，代码可能与标准桌面应用程序略有不同。它可能会针对性能和内存使用进行优化。它可能不使用异常、Boost 或 STL。它可能必须优雅地处理内存不足错误。但它仍然是一个现代的、面向对象的代码，使用了(相对)新的语言特性，如`constexpr`或`enum class`。