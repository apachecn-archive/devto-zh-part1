# 服务器端缓存的重要性

> 原文：<https://dev.to/roelofjanelsinga/the-importance-of-server-side-caching-2j6h>

[![The importance of server-side caching](img/ab3d162ecb9991d7dd4a78c64e89d342.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--HQzjN-8L--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/qs88lkqde4enzaqlrkoq.jpg)

# 服务器端缓存的重要性

是啊！我知道！又一个缓存帖子！但是缓存非常非常重要！说到这里，我想解释一下为什么它如此重要。不仅仅是为了你的硬件，也是为了你的用户。在解释我对缓存的想法之前，我应该提一下我对术语“缓存”的理解和解释。对我来说，缓存意味着以一种非常容易阅读和处理的格式临时保存数据，因此可以毫不费力地检索并立即使用。我真正想说的是，数据已经以您的应用程序需要的方式进行了处理和格式化，然后保存到一个实体中。这个实体可以是几样东西，例如，一个平面数据库表，某种类型的文件。txt 或者。json)，或者 Memcached(用于 Windows 的 Memcache)或 Redis 中的内存。

### 节省 CPU 周期

所以说了这么多，让我们开门见山吧。正如我在上一段中提到的，缓存对您的硬件很重要。不一定是为了它的生命周期，而是为了可以用于其他任务的资源。如果您必须多次查询数据库并返回相同的结果，您会发现一个使用缓存的任务。而不是不断地检索相同的(静态)数据，并以相同的方式处理它，从而浪费 CPU/RAM 资源，成本很高。相反，您可以在第一次请求时缓存数据，然后从缓存层提供数据。如果这样做，您就节省了可用于其他任务的 CPU/RAM 资源。

### 它让你的应用更快

但它不仅节省硬件资源，而且速度更快。想想看:从数据库中查询数据、处理数据、格式化数据以备使用，还是从缓存层请求数据并接收数据。这种速度提升可以显著减少应用程序的加载时间，使用户体验更好。我记得非缓存数据和缓存数据在检索时间上的巨大差异。非缓存数据在单个任务上很容易花费 5 或 6 秒，而缓存数据在一秒钟内被检索到。对于大多数简单的任务来说，这仍然非常慢，但是至少显示了加载时间的显著减少。这种特殊的缓存工作导致我的应用程序的主页加载整整快了 3 到 4 秒。这是在我从文件缓存切换到 Redis 缓存之前，缓存请求减少了至少 50%。

之前快速提到了用户体验。没有什么比漫长的加载时间更烦人的了，它肯定会让用户离开你的网站。谷歌在去年的 Chrome Dev 会议上表示，如果你的应用程序在 3-5 秒内没有第一次绘制(显示某种屏幕)，50%的访问者将离开你的网站。现在我根本不是用户体验专家，所以我无法证实或否定这种说法，但它是有道理的。我经常会做同样的事情。也就是说，如果你能以任何方式让你的应用程序加载得更快，那就去做吧。如果您有许多静态数据需要在第一次进入应用程序时从数据库中加载，请确保缓存所有这些数据。尽快画出第一张画。当将数据缓存到文件或数据库不能很好地工作时，请尝试 Memcached。当这仍然不够快时，请全力以赴使用 Redis。

### 万事皆有弊

我只能称赞缓存，并就此打住，但这并不能描绘出全貌。当然，它也有缺点。例如，很难缓存变化很大的数据。这肯定是可能的，但是您最终不得不在每次(重要的)更改时将缓存的数据与新数据同步。这对开发者来说是地狱。我在这方面的经验是:当数据至少一天可以改变一次，或者需要在改变后立即可用时，不要缓存它。但是，如果数据从来没有真正改变过，或者您真的需要在某些方面提高性能，那么就缓存它吧。让自己轻松一点，而不是更难。我想知道为什么页面因为缓存太高而没有更新的次数太多了。从我的错误中吸取教训，如果您正在处理应用程序的特定部分，不要缓存任何东西。