# 利用信标技术在大型建筑物中进行室内导航

> 原文：<https://dev.to/dianamaltseva8/indoor-navigation-in-large-buildings-with-beacon-technology>

**1)。什么是信标技术？**

[Beacon](https://en.wikipedia.org/wiki/Beacon) 是苹果公司开发的协议，于 2013 年在 WWDC 上推出。它基于蓝牙低能耗近程传感，通过传输一个通用的唯一标识符，由兼容的应用程序或操作系统拾取。

标识符和与之一起发送的几个字节可用于确定设备的物理位置，跟踪客户的位置，或在设备上触发基于位置的操作，如社交媒体上的签到或推送通知。

**2)。如何利用信标技术进行室内导航？**

根据不同的应用，我们可能需要不同精度的估计位置。对于大型购物中心或机场的室内导航，找到用户所在的房间就足够了，而其他一些应用程序需要厘米级的精度。

所以，第一个案例非常简单。每个房间只有一个信标就足够了。我们只需要找到具有最高`proximity`值的信标，在大多数情况下，它将定义用户的位置。

尽管当用户在大房间中相对远离信标，但是靠近另一个信标所在的墙壁时，可能会有错误的结果。

在这种情况下，距离会导致真信标信号的衰减，而障碍物会导致假信标信号的衰减。为了避免这种情况，我们可以在相对较大的房间里放置几个信标。

当需要高水平的精度时，我们可以在每个房间放置更多的信标，并通过根据已知信标的位置对用户的位置进行三角测量来求解和估计用户的位置。这与移动网络地理定位的一种方式非常相似，使用的是手机信号塔的位置。

这是一个简化的算法。到每个塔的距离定义了一圈可能的用户位置。两个圆的交点仅决定了两个可能的位置，第三个圆定义了其中一个位置。

真实世界的情况稍微复杂一些，因为由于测量误差，我们必须处理一些宽度的环，而不是理想的圆。

**为了解决三角测量问题我们需要:**

*   每个房间至少放置三个信标，最好没有障碍物。
*   估计范围内每个信标的距离。

不幸的是，iOS SDK 不提供对检测到的信标的物理距离的任何估计。我们所能使用的是 rssi(信号强度)、精度(sigma 水平精度，单位为米)和接近度，它们可能具有以下值之一:

未知:无法确定信标的接近度。

**即时:**信标就在用户附近。

**近:**信标相对靠近用户。

**远:**烽火远。

但是我们能用 rssi 值粗略估计距离吗？这取决于移动设备和信标本身之间的距离和障碍。让我们暂时想象一个没有障碍的理想世界。

我们可以测量不同距离处的 rssi 值，然后找到最佳拟合曲线来匹配数据点。然后，这种相关性可以用于估计特定 rssi 值的距离。

你可能想知道环境如何影响我们得到的 rssi 值？嗯，如果用户在钢铁建筑内，可能会有内部反射，这将导致信号衰减较慢，具体取决于距离。

相反，如果发射机和移动设备之间有水(或人体),则信号会衰减。

因此，在现实世界中，我们最终会得到基于信标距离的方程，而这些方程不一定有数学解。通过增加每个房间中的信标数量，并根据 CLBeacon 对象的`accuracy`属性选择最准确的信标，可以部分解决这个问题。

**3)。技术限制和建议**

如上所述，距离估计高度依赖于环境，主要依赖于设备和发射器之间的障碍物。为了最大限度地减少这些影响并使结果更加准确，我们应该遵循以下建议:

确保房间内每个点的视线范围内至少有三个信标可用。这意味着，对于非凸房间，我们将需要三个以上的信标。

将信标放在天花板上，这样信号就不会干扰家具和其他障碍物

分别校准每种类型的信标。信号强度也取决于型号

**4)。寻路**

好了，我们已经估计了用户的位置，下一步是什么？怎样才能引导他/她从 A 点到达 B 点？换句话说，如何解决寻路问题？

在一般情况下，这个问题被定义在一个加权图上，但是为了简单起见，让我们假设我们有一个由可通行和不可通行的正方形定义的地图。

了解有关 [的更多信息，确保在大型建筑](https://smartym.pro/blog/inside-navigation-in-large-buildings-with-ibeacon-technology/) 中进行有效的室内测绘。