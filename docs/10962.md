# 你真的需要依赖注入容器吗？

> 原文:[https://dev . to/mariosangiorgio/do-you-really-need-a-dependency-injection-container](https://dev.to/mariosangiorgio/do-you-realy-need-a-dependency-injection-container)

我认为依赖注入是一种非常有效的技术，可以编写更加模块化并且通常结构更好的程序。它极大地改进了应用程序的设计，鼓励分离和高度可测试的组件。

我不太喜欢的是，依赖注入的程序员也经常使用容器。他们用某种魔法，通常是通过反射，将所有组件连接起来。

> 魔法总是有代价的

魔法的使用正是我不喜欢容器的原因。它们使您免于编写一些样板代码，这在一个具有良好架构的应用程序中从来都不是最难的事情，而且这样做会使您付出失去一些非常有用的特性的代价。

以下是一些例子:

*   你想让编译器在你错过一些东西的时候显示一个错误吗？抱歉，这是不可能的。容器在运行时移动连接你的应用程序。您将得到一个异常。
*   你喜欢 IDE 帮助你找到构造函数被使用的地方吗？我有，但是不写一些代码的代价是 IDE 不能帮助我。据它所知，该代码在任何地方都没有被使用。

Mark Seeman 清楚地展示了根本不使用容器、通过显式注册使用容器和按照约定使用容器之间的权衡。第一种情况简单而有价值。第二个相当复杂，毫无意义。他声称第三个是复杂但有价值的。

当你以好的方式使用一个容器时，你得到的是低维护性的东西，代价是使用一种难以学习和弱类型化的技术。这肯定不适合我，这也是为什么我同意 yegor 说 DI 容器是代码污染者的原因。如果你真的需要使用一个容器来把你的应用程序的所有组件放在一起，我认为你的应用程序有问题。你也许应该看看你的应用程序是如何构造的，而不是把问题藏在地毯下，假装问题不存在。

*本帖最初发表于[mariosangiorgio . github . io](http://mariosangiorgio.github.io/post/di-container/)T3】*