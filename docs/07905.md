# 上帝阶级

> 原文:[https://dev.to/marcosx/the-godclass](https://dev.to/marcosx/the-godclass)

好吧，你被分配到一个团队，这个团队正在从事这个非常古老的项目，你真的很期待接触一些遗留代码。

技术主管在白板上做了简短的技术介绍后，你和她一起去配对站，开始为第一天的工作设置本地环境。稍微研究了一下代码后，你得到了`Listing`类，当你滚动永无止境的文件时，你已经开始讨厌这个**神类**。

当你想知道这个课程是如何变得如此庞大的时候，你开始想象这个项目的第一周是怎样的。也许在与一些“业务人员”讨论之后，团队认为有必要拥有`Listing`类。从那以后，添加越来越多的东西就很容易了。这毕竟是一个拍卖系统，所以它的核心元素是一个`listing`。

当你阅读方法和测试用例时，一切都变得有意义了。因为列表可能处于许多状态，如草稿、预览、已发布，...-你需要控制这一切。每种状态支持不同的行为，所以肯定有相当多的`if`分布在代码中。一个清单也包含很多信息，所以对象中肯定有很多字段。但是嘿，至少它有很多测试！

当你看到自己开始认同所有这些乱七八糟的代码实际上是有意义的，你停下来给自己一巴掌(但那都是你脑子里想的，所以别担心，没人看到)。任何一个班级，不管它有多重要，都不应该有这么大，而且违反了单一责任原则！

## [](#a-class-becomes-a-godclass)一个阶级变成一个神阶级

当然了，对吧？没有人从第一天就创造了一个神级，正如一句老话所说:需要一个村庄来培养一个神级。

一门课变成了神课，因为它就是有意义！想想一个领域，什么是 Godclass 的好候选:一个电子商务可能会有一个`Product`，一个拍卖系统可能会有一个`Listing`，一个航空应用程序很可能会有一个`Flight`和一个`Passenger`。这很有意义。

通常一个 Godclass 会抓住你的领域的本质，就像电子商务中的一个`Product`,它可能会成为设计的中心点。电子商务平台中的一切都围绕着购买产品的人，所以你创造产品的方式，你展示产品的方式以及你如何处理库存是关键。

我们注定要创造一个上帝阶级吗？只是时间问题吗？

## [](#what-if-theres-no-godclass)没有 Godclass 怎么办？

如果你使用一个足够老的系统，你可能有一个 Godclass 挂在你的代码库中(希望你只有一个)。

现在想一分钟，如果拍卖应用程序中没有`Listing`类会怎么样？如果不使用这个名称，您将如何对域进行建模？如果不使用“列表”这个词，你会如何归类发布列表和处理出价的行为？

想一分钟。好的，几秒钟就够了，我知道这些天我们都很忙。

...

很难吧？有一个`Listing`才有意义。

不要使用一个对你的域名至关重要的名字可能是一个坏主意，因为这个名字会抓住你的域名的本质。但是，彻底根除上帝阶级并把这个名字从词汇中驱逐出去的做法可能会很有趣。

如果你没有一个神类，那么所有的行为都必须在其他类中进行划分，对吗？我的意思是，你必须支持相同的特性和用例，所以代码必须在某个地方。会出现新的神级吗？一些行为能被现有的类吸收吗？你能识别出什么可以在其他类中拆分吗？这些课程会是什么样子？

做这个练习将为你如何减少 Godclass 的能力提供很好的提示，并且有可能改进你的应用程序的设计。这也将显示你对你的领域有多了解，你的建模技巧有多敏锐。

不要忘记软件开发不仅仅是写代码:)