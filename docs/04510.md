# 供应链攻击和安全软件更新

> 原文:[https://dev . to/paragonie/supply-chain-attacks-and-secure-software-updates-ca0](https://dev.to/paragonie/supply-chain-attacks-and-secure-software-updates-ca0)

我一般不喜欢写时事，因为新闻固有的短暂性意味着你的文字一天天变得没有意义。作为专业人士，我觉得浪费别人的时间很没品位。

然而，供应链攻击的话题在最近几个月反复出现，所以我想花点时间反思一下这些事件，以及我通过[Paragon Initiative Enterprises](https://paragonie.com)(简称 PIE)所做的工作，以便能够大规模解决这个问题。

## 什么是供应链攻击？

一般来说，供应链攻击包括首先攻击向你的目标提供产品或服务的可信第三方，然后利用你新获得的特权地位来危害你的预定目标。

更确切地说，我们只对供应链攻击感兴趣，这种攻击涉及损害生产其他公司使用的软件的公司。基于硬件的供应链攻击已经被泄露的关于国家行为者的文件所证实。

## 最近的供应链攻击史

与其重复供应链攻击的悠久历史(理论上和实际上都有)以及几乎每个 Linux 发行版都 PGP-sign 更新信息的动机，不如让我们看看 2017 年发生了什么。

最近几个月，该行业的第一个警钟是一个名为 NotPetya 的勒索软件，它通过 *M.E.Doc* 的自动更新机制[在乌克兰传播，这是少数几个政府批准的会计软件](https://www.cyberscoop.com/petya-ransomware-medoc-hacked-auto-update/)之一。

上个月，卡巴斯基实验室的研究团队发表了一篇关于名为 ShadowPad 的[恶意软件活动的文章，该活动感染了一家名为](https://www.kaspersky.com/about/press-releases/2017_shadowpad-how-attackers-hide-backdoor-in-software-used-by-hundreds-of-large-companies-around-the-world) [NetSarang](https://www.netsarang.com/) 的公司的一款未指明产品的软件更新。据报道，有问题的产品被数百家大公司使用，特别是在能源部门，因此这种感染的长期影响(如果未被发现)最好留给想象。

最近，但肯定不是最后，我们了解到一个名为 [CCleaner 的常见 Windows 实用程序的最新更新也感染了恶意软件](https://techcrunch.com/2017/09/21/ccleaner-supply-chain-malware-targeted-tech-giants/)。

### 最近供应链攻击的共同点

在最近发生的每一个案例中，恶意行为者已经攻破了一家软件公司，并感染了用户将要下载和安装的软件的“合法”副本。

在某些情况下，使用自动更新机制来交付有效载荷。但是，将自动更新功能称为感染原因是错误的。如果一个恶意的签名二进制文件被上传到一个公司的网站上，手动更新对受害者没有任何帮助。他们只会高兴地安装它，谁也不知道。

在所有这些情况下，恶意软件更新被传播到每个安装它的人，而不是只针对感兴趣的网络的有针对性的攻击。我敢打赌，在我打这篇文章的时候，有一些这样的事情正在发生，但是它们本来就很难被发现。

这里真正的安全问题与自动化没有什么关系。

## 软件更新安全的根本问题

供应链攻击可行、有效且通常难以检测的原因是*很少*(如果有的话)业界关注保证[软件真实性](https://defuse.ca/triangle-of-secure-code-delivery.htm)。

这是一个我们已经广泛讨论过的话题:

*   [快速安全自动更新指南](https://paragonie.com/blog/2017/08/quick-guide-simple-and-secure-automatic-updates)(2017 年 8 月)
*   [针对 PHP 开发人员的自动更新实现细节的技术教程](https://paragonie.com/blog/2016/10/guide-automatic-security-updates-for-php-developers)(2016 年 10 月)
*   [在我们的自由软件内容管理系统 CMS Airship](https://paragonie.com/blog/2016/05/keyggdrasil-continuum-cryptography-powering-cms-airship)(2016 年 5 月)中实施的详细报道
*   [我们的第一篇博文介绍了 *Asgard* ，这是我们为 PHP 社区解决这个问题的第一次尝试](https://paragonie.com/blog/2015/04/introducing-asgard-authentic-software-guard)(2015 年 4 月)

如果你只看了上面的一个链接，那就看 2017 年 8 月的那个。

我们公司在客户约定之间做了很多工作，让开发人员更容易让他们的软件更新**签名**、**可审计**和**可复制**。这有几个作用:

1.  **已签名:**如果签名密钥离线保存，即使 web 服务器或更新服务器被攻破，恶意软件也不会被最终用户的计算机接受。这对于供应链攻击来说是一个不小的障碍，只要有问题的公司有足够的纪律来保守他们的签名密钥秘密。
2.  **Auditable:** 即使有窃取的签名密钥，有了这种保证，由于每次更新都提交给只附加的数据结构(例如 Merkle 树或散列链)，攻击将不可避免地被检测到。这也确保每个人都获得相同的更新，并防止有针对性的攻击(如上所述，尚未检测到，但不能排除)。
3.  **可复制:**使用开源软件和可复制的构建，用户可以验证他们收到的二进制文件是否对应于他们打算安装的软件的预期版本。结合可审核性保证，即使只有一个高级用户或安全专家检查源代码中的后门，也足以确保相同更新的所有其他副本是真实的。

如果提供了所有这三个保证，那么自动部署您的更新通常会更安全(默认情况下；应该允许高级用户禁用该机制)。

此外，由于有了这些保证，大多数攻击者甚至会失去尝试这种攻击的动机:他们活动的成功取决于他们窃取密钥的能力，他们不能以网络或感兴趣的人为目标，很早被抓住的可能性非常高。

如果我们能让所有的软件更新都带有真实性保证，我相信我们将几乎消除现实世界中的供应链攻击。

## 这真的重要吗？

自从我们公司成立以来，我们一直专注于确保软件更新足够安全以实现自动化的问题。

我们坚信，大规模解决这一问题将比所有信息安全和应用密码学中的其他问题对互联网安全产生更深远的影响。

### “等等，我想我可以用【流行语】解决这个问题。”

如果你正在寻找一个针对这类攻击的杀手级应用程序网络安全解决方案，答案包括大量不光彩的清洁工作[清理软件生态系统](https://meta.stackoverflow.com/questions/293930/problematic-php-cryptography-advice-in-popular-questions)和[协助开源软件项目](https://github.com/composer/packagist/issues/797)采用可扩展和值得信赖的解决方案。

这不是一个需要区块链来解决的问题。

传统终端安全(即防病毒软件)甚至属于解决方案的正确*类型*也不成问题。

不，我们需要作为一个社区来解决这个问题，而不是一个行业。这意味着许多专门的安全专家和开发人员一起工作。这意味着开发人员要花费大量的时间来改善公司的长期健康状况。

随着越来越多的计算机犯罪分子发现供应链攻击是感染受害者的有效途径，我完全预计[江湖骗子和蛇油推销员](http://attrition.org/errata/charlatan/)会突然冒出来推销他们考虑不周的供应链攻击解决方案。甚至更多的时间可能会花费在揭穿他们的欺诈性声明，并提醒不知情的人他们的欺骗。

但是最后呢？如果我们作为一个社区——作为一个社会——能够共同努力来解决整个互联网的安全软件更新问题？一切都是值得的。

> 这篇文章最初发表在[馅饼博客](https://paragonie.com/blog/2017/09/supply-chain-attacks-and-secure-software-updates)上