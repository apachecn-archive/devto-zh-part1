# 处理技术债务

> 原文:[https://dev.to/adammckerlie/dealing-with-technical-debt](https://dev.to/adammckerlie/dealing-with-technical-debt)

*原贴于[tech.gadventures.com](https://tech.gadventures.com/dealing-with-technical-debt-91880b27eea5)T3】*

技术债务是每个软件公司在某个时候都必须处理的事情。无论是糟糕的架构设计还是不断变化的业务需求，在某种程度上技术债务都需要重构。以下是我从消除技术债务的经验中总结出的一些技巧。

[![A Technical Debt Pig](img/93814e1205630b885e7f0d4b9139e64d.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--iKEpRGwF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/hoiz74cn46ofbdoswozv.jpg)

## 盘点库存

处理技术债务的第一步是清点整个代码库。在开始删除或重写代码之前，了解代码库的范围是必要的。使用 Google Analytics 来了解代码的哪些部分使用得最多，可以为 web 应用程序提供一个简单的起点。重构网站最常用的部分通常会带来立竿见影的效果。

一旦你盘点了你的代码库，理解某些函数如何被使用以及它们如何与代码的其他部分交互是很重要的。如果你的项目有测试，我发现浏览这些测试可以提供非常有价值的信息。单元测试在查看函数的预期输入和理解代码应该如何使用方面非常出色。如果测试写得正确，它还可以帮助你理解什么与什么相互作用。

盘点还为您提供了一个基本的清单，您可以使用它来跟踪需要重构的内容。

## 有计划

现在您已经有了代码库中所有东西的清单，您可以开始计划技术债务的重构了。我喜欢从一系列相互关联的功能开始这个计划。这个列表让我了解了需要一起重构的代码功能。从那里，我可以知道每一大块要花多长时间。

一旦有了耦合的函数，就可以开始考虑代码是否需要重构。一般来说，如果某样东西工作得很好，并且仍然满足用户的需求，那么它可能不需要改变。如果它不再相关、运行不佳或者从数据完整性的角度来看是危险的，您应该重构它。查找任何不再使用的功能或为不同输入复制的功能，并尝试删除或合并它们。

## 创建现实的时间线

当你在制定处理技术债务的计划时，要时刻记住这需要多长时间。消除技术债务通常需要很长时间，尤其是当你做得很好的时候。如果您正在重构整个部分，您可能需要考虑将遗留数据移植到新系统中。这可能意味着创建将旧数据映射到新模型的脚本，或者，如果旧数据模型仍然有意义，就复制数据。

消除技术债务的很大一部分是与你的用户交谈。确保您了解他们的需求，以及旧代码如何无法满足这些需求。从那里，你将理解你的系统需要什么，以及如何处理重构。当你和你的用户交谈时，确保他们对提议的计划感到满意。在你看来对你有用的可能对你的用户不一定有用，提前知道这一点有助于减少变化的摩擦。

## 执行并启动

一旦你确定了你需要重构的技术债务，想出一个计划来摆脱它，为处理你现在必须执行的债务创建一个现实的时间表，并启动改变。从过去的经验来看，我发现做小的改变和快速启动有助于用户应对变化。当你在一个筒仓中编码并一次性发布大量功能时，失败的风险会更大。确保所有不同的用例都有合适的测试用例，有助于降低发布大型特性的风险。

在向所有人发布之前，向一小部分用户发布是测试新功能并获得变更反馈的好方法。这允许您验证您的新代码，并确保它正常工作。这让您有时间创建更多的文档，并确保迁移尽可能无缝。

一旦一切准备就绪，就该向每个人发布并迭代这些变化了。

## 防止技术债务

一旦你重构了你的代码，你会想要让你的代码库经得起未来的考验。最好的方法是确保你有一套全面的单元测试。单元测试允许您放心地部署代码，因为您知道您会捕捉到任何回归错误。除了测试之外，还要确保使用通用的编码标准来确保代码的持久性。最后，在设计新特性时，考虑一下代码库的未来；这将有助于您的代码更加经得起未来的考验。花时间适当地规划您的代码将使它在将来不容易成为技术债务。