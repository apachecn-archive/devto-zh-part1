# 索尼失败:为什么加密密码是绝对必要的

> 原文:[https://dev . to/disk drive/Sony-fail-why-it-absolute-needly-to-encrypt-passwords-eh6](https://dev.to/diskdrive/sony-fail-why-it-is-absolutely-necessary-to-encrypt-passwords-eh6)

正如你可能已经在最近的新闻中读到的，索尼在网络被[黑客攻击](http://en.wikipedia.org/wiki/PlayStation_Network_outage)后陷入了困境。

到目前为止，索尼已经承认有 7700 万用户的个人账户信息被盗。这将成为历史上最大的数据盗窃案。

索尼仍在调查信用卡信息是否被盗，但显然，包含姓名、出生日期、电子邮件和密码等信息的用户记录被盗了。

虽然 PS3 用户似乎[关心](http://www.pcmag.com/article2/0,2817,2384702,00.asp)他们的网络中断一周——但我更关注的是密码如何被窃取。显然，索尼从来没有费心去加密它们！

现在，我绝不是这里的 IT 安全专家，但我已经在足够多的 IT 系统和项目上工作过，因此理解这一点** **

你从不以纯文本形式存储用户密码！

永远永远不要。无论你的网站有多小或多不重要。事实上，每当我从一个新的网站注册了一个用户帐户或者忘记了密码，我就会收到一封里面有我密码的电子邮件，这个问题总是困扰着我。

我会很快取消自己的注册，或者至少更改密码，并希望我的正常密码不在某个审计表中。

因为他们能找回我的密码就意味着他们有密码。

这种情况比你想象的要多——不仅仅是在小网站上，我对一些相对大的网站感到惊讶。我记得 [Prometric](http://prometric.com/) (他们也有一个很垃圾的网站)——管理微软认证考试的公司把我的密码用电子邮件发给了我。这是一家以测试和认证 IT 专业人员为生的公司！

坦白地说，我认为应该有人建立一个名单，列出所有以纯文本格式存储密码的网站。

但是对于像索尼这样的公司——一个巨大的跨国公司，一个价值数十亿美元的公司，一个制造了 PS3 的公司，PS3 在很长一段时间内被认为是第一个无法破解的主机(直到它被称为 T1 ),他们没有遵循这些基本和最基本的安全措施是完全不可思议的。

您不在数据库中存储密码的原因是，大多数用户缺乏必要的记忆，倾向于一遍又一遍地重复使用相同的密码。如果他们的密码从你的网站被盗，黑客很可能会访问他们拥有的其他账户。

另一个原因是所有拥有生产数据库访问权限的员工都可以看到它。一个心怀不满的员工。

你不应该以纯文本的形式存储密码，因为你不想承担责任。

**相反，存储一个由密码生成的哈希值。**

[散列](http://en.wikipedia.org/wiki/Cryptographic_hash_function)是将一些明文(密码)运行到一个算法(例如 [MD5](http://en.wikipedia.org/wiki/MD5) )中的过程，该算法返回一个“散列”——基本上是一个加密的字符串值。这是一条单行道——您可以将明文转换为散列，但不能使用散列来检索原始文本。当有人试图登录时，您比较散列来验证。

事实是，实现散列并不困难。真的不需要数学或密码知识。所有主流编程框架都预装了哈希函数的类库。你要做的就是调用这个函数。

这是你对任何网站的最低要求。

虽然现在，简单的散列可能是不够的，因为它不会保护你免受彩虹攻击。现在彩虹攻击听起来很可爱，有点奇怪，但本质上，彩虹攻击使用彩虹表-这是一个预先填充的表，包含每个可能的密码组合的散列码-来快速查找您的密码。

凭借我们今天拥有的超高速处理器和分布式计算选项，您会惊讶地发现，获取密码可能包含的每个字母和数字组合的哈希是多么完全可能。网上有几个免费的[可用的](http://ophcrack.sourceforge.net/tables.php)。这个[页面](http://www.lockdown.co.uk/?pg=combi)很好地说明了基于密码的复杂性和长度需要多少时间。

为了对抗彩虹攻击，必须加[盐](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)。

通俗地说，这是在对明文进行哈希处理之前对其进行一些处理的过程，以确保它是唯一的，不会出现在任何预先填充的彩虹表中。

举例来说，没有盐的杂烩看起来像这样

**密码=哈希(明文)**

加盐后，应该是这样的

**cipher = salt + hash(salt +明文)**

salt 通常是一个 [GUID](http://en.wikipedia.org/wiki/Guid) ，因为它保证了唯一性。您不需要隐藏 salt——事实上，通过在比较哈希值时考虑 salt 的值，在验证用户是否输入了正确的用户名时会使用 salt。

黑客无法对你使用彩虹攻击，因为 salt 使明文变得独特。他们将需要使用您的 salt 前缀重新生成他们的彩虹表，这将花费与[暴力攻击](http://en.wikipedia.org/wiki/Brute_force_attack)一样多的时间。

当然，没有加密是不可破解的，这只是一个黑客在破解它之前需要花费多少时间的问题，所以还有额外的措施，如增加多次哈希迭代来提供额外的保护，我可能会在另一篇文章中讨论。

关键是，散列和加盐——这些概念并不复杂，实现起来也并不困难。有人真的在索尼丢了球，结果，他们可能会因为一个受损的品牌名称和潜在的法律诉讼而损失数百万美元。