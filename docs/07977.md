# 重用的消亡

> 原文:[https://dev.to/rmorschel/the-demise-of-reuse](https://dev.to/rmorschel/the-demise-of-reuse)

我记得当代码重用第一次成为一个时髦词的时候。“代码重复不好！”他们哭了。“一个维护负担！容易出错！写一次代码，重用，削减成本，大家都赢！”

但是想象一下你信奉这个咒语。您有许多重复使用您非常有用的代码的客户端系统，有些在您的团队中，有些不在您的团队中，也许有些您甚至不知道…您想要做出改变。如何不破坏客户端代码？

你把你非常有用的代码变成了一个库，或者甚至是一个服务(*挥舞着满是灰尘的 SOA 旗帜)，带有定义良好的接口契约、使用指南和版本控制政策。你开始跟踪你的客户。当然，你想写测试。但是因为客户会以令人惊讶的方式重用你的代码，所以你要编写更多的测试，为你没有想象到的场景(用你的水晶球。)

暂时一切都好。

然后客户机 N+1 出现了，出于合理的原因想要改变公共接口——改变是可以预期的，甚至是可以接受的，对吗？幸运的是，我们使用了 XML 或 JSON(或者两者都用)，所以我们有一些可扩展性。但是不行，客户不满意。变化更为显著。业务正在发展。我们很敏捷。我们需要从根本上改变界面。

所以我们做了，我们把它版本化了。我们通知我们所有的客户，有一个新的版本，版本 1 是过时的。他们有 6 个月的升级时间。

但是有些人太忙了，没有时间做这些，我们最终得到了两个版本。

或者我们认为客户的需求是独特的，所以我们编写了一个特殊用途的适配器。我们最终有两个接口。在某个地方，开发者的灵魂死去了。

除非非常小心地管理，否则共享代码很快就会变成没人想碰的代码。这是一种非常难闻的气味。将在边缘周围进行更改，并创建一个怪物。没有人想拥有这段代码。

具有讽刺意味的是，代码的重用本身就是一种消亡。