# JS 交易的工具

> 原文:[https://dev.to/kayis/the-tools-of-the-js-trade](https://dev.to/kayis/the-tools-of-the-js-trade)

我的一个朋友问我，他的 JavaScript 项目应该使用哪个构建工具。他说“Npm，Bower，Gulp，还是 Webpack？我不知道！”...

所以你可能听说过 [JavaScript 疲劳](https://medium.com/@ericclemmons/javascript-fatigue-48d4011b6fc4)，这是许多 Web 开发人员经常遇到的问题，尤其是那些从 *Ruby on Rails* 的避风港起步的人，他们以前没有经历过挣扎。(好吧，对此我很抱歉...)

## 为什么是工具？

它们是为了让我们的生活更轻松而创造的。但代价是，我们需要了解它们是如何工作的。

例如，作为一名优秀的 Web 开发人员，您知道每个请求，即使是最小的请求，都需要一些时间才能到达您的用户，因此您可以考虑将您的 JavaScript 文件捆绑成一个文件，这样只需要发出一个请求就可以获得它。

开销更少，加载时间更快，等等。但是如果没有工具，你将不得不*手动打开每个 JS 文件*并将其内容复制到一个大文件**或**中，你将不得不*从头开始将所有代码写入一个大文件*。这两种解决问题的次优方法。所以你下载或者自己写一个 bundler，它会为你做所有难看的工作。

此外，他们还可以添加质量检查工具，如 Linters，这可以帮助改善您的代码，并捕捉一些您可能会犯的错误。

因此，我们可以说工具化，即使在 JavaScript 领域也是一件好事。

## 为什么没有工具？

所有工具的问题是，它们是软件，需要被理解。他们中的一些人添加新的代码，甚至修改现有的代码，这对于一般的开发人员来说并不总是显而易见的(我认为我自己就是一个，希望至少是一般的 D:)

它们增加了复杂性，对于入门者来说，这种复杂性是不允许的。

## 谁把工具强加在你身上？

现在 JavaScript 生态系统更进一步，*实际上*需要这些工具用于特定的框架或库。好吧，有效可能是一个强有力的词，但是没有这些工具的工作通常没有它应该有的好...

例如 React，它通常与一个叫做 JSX 的语法扩展结合使用。如果你想在 JS 中编写所有酷的 XML *,让 React 代码看起来如此未来和时髦，你需要一个工具，在它到达浏览器之前，将它转换回常规的 JavaScript。此外，React 在 ES2015 功能在所有浏览器中实现之前就使用了这些功能。*

是的，React 有办法在没有它的情况下使用它，我甚至写了一个[小教程](https://github.com/kay-is/react-from-zero)来解释如何使用 React 和 ES5，但大多数在线示例和教程需要至少一个 ES2015 和/或 JSX。

所以你想学习一个新的 JavaScript 框架，现在你还必须学习一个构建工具，把 ES2015+JSX 变成 ES5。这是一个相当陡峭的学习曲线。这有点可悲，因为 React 没有太多的概念和一个相当小的 API。

## 有哪些工具？

好了，现在我们知道了工具可以帮助你，一些框架需要它们来有效地工作。JavaScript 领域有哪些可用的工具？他们做什么？

我不能全部告诉你，因为 JavaScript 开发人员每天都喜欢创造新的东西，甚至是工具。

但是我会试着写一些我认识的人。我想，由于我在我的时间里发布了一些网络应用程序，我会遇到足够多的开始。

首先，所有这些工具都在 Node.js 中运行，所以如果您想建立一个 JavaScript 工具链，基本上就是通过一些包管理器安装一堆 Node.js 模块，并通过 CLI 在本地(或在您的 CI 服务器上)运行。

### 包管理器

有一堆包经理。其中大多数建立在国家预防机制储存库的基础上。这意味着，即使你不使用 npm，你也可能从他们的回购协议中获得库。

*   [NPM](https://www.npmjs.com/)node . js 的默认包管理器，最大的 repo。
*   Bower 是一个为浏览器设计的包管理器，它有自己的独立于 npm 的 repo。
*   一个新的软件包管理器修复了 NPM 的一些问题，最近得到了很多关注。也使用 npm 回购。
*   ied 也是 npm 的替代者，试图将 [Nix](http://nixos.org/nix/) 包管理器的思想融入 JavaScript 领域。使用 npm 回购。
*   [pnpm](https://pnpm.js.org/) 有点像 **ied** 但是更好地集成到 npm 工作流中，比 npm 更快，但是使用 npm repos。

### 任务运行器

如果你有工具，为什么没有工具来运行你的工具呢？玩笑归玩笑，如果你有几件事情要做，你希望以某种方式协调它们，而不是总是键入带有所有参数的整个命令。想*做 JS* 。哦，也可以用 Make)

*   [npm](https://www.npmjs.com/) 在其`package.json`中有一个`script`属性，可以用来定义一些简单的任务。可以访问安装在开发依赖项中的 CLI，因此它们不需要全局安装。
*   [Grunt](http://gruntjs.com/) 这是 JavaScript 领域的首创，如果 npm- `scripts`已经不够用了，就使用它。
*   [大口](http://gulpjs.com/)喜欢咕噜咕噜，但需要配置少。

### 编译器

如果你想使用所有花哨的新语法扩展，比如今天的 JSX，或者你需要一些强类型，比如 FlowType 或 TypeScript，你不得不使用编译器将你的代码转换成浏览器可以理解的东西。

*   Babel 最初是 ES2015 的一个项目，但现在支持 JSX、FlowType 和所有新的 ECMAScript 功能，甚至是“未发布”的功能。
*   如果你不需要 Babel 的所有花哨功能，这是一个快速的 ES2015 编译器。
*   类型脚本编译器。JSX 和大多数 ES2015 新功能都是 TypeScript 的一部分。顾名思义，它带有一个类型系统。

### 捆绑者

我不知道 *bundler* 是否是正确的词，因为这些工具中的大多数不仅仅是捆绑。他们还以不同的方式缩小或修改源。

*   [Browserify](http://browserify.org/) 是为了使 Node.js 的同步 CommonJS 模块在异步浏览器领域可用而创建的。所以它不只是简单地合并你所有的文件，还包装了异步使用的模块。
*   Webpack 是一个捆绑器，可以读取基本上所有与 Web-dev 相关的文件并将它们自己捆绑起来。想要协调所有的资产加载，所以浏览器不必猜测该做什么。
*   [Rollup](http://rollupjs.org/) 明确为 ES2015 模块创建，使用树抖动来消除死代码，从而生成更小的版本。
*   Closure 编译器一个高度复杂的捆绑器，它使用类型注释注释对你的代码进行各种优化，比 Rollup 更难集成，但结果是非常小的构建。

### 代码质量

上面提到的一些编译器已经是某种代码质量工具，因为它们的类型系统。但是还有其他方法。

*   JSLint 是一个非常固执己见的工具，它可以判断你是否写了垃圾代码。会伤害你的感情。
*   类似于 JSLint，但是有更多的配置选项，所以你的感觉是安全的。
*   [ESLint](http://eslint.org/) 像 JSHint，但是可插拔(？)我认为它比 JSHint 配置得更好。
*   想一想 JavaScript 的 [gofmt](https://golang.org/cmd/gofmt/) 。根据一些固执己见的样式规则，将您的代码转换成 AST，然后再转换回文本。在这个过程中，为您修复 linters 发现的(和没有修复的)许多错误。
*   TSLint 基本上是用于 TypeScript 的 ESLint。

### 测试

作为优秀的开发者，我们都爱 TDD 和 BDD amirite？；)所以有很多工具可以帮你完成这个任务。

*   我猜是标准测试框架？非常可扩展。
*   喜欢摩卡，但不喜欢 BDD。
*   AVA 一个未来的试车者，不管那意味着什么。无论如何，这对于高并发性和并行性测试是有益的。
*   一个使用 tap 协议的简单测试程序，如果你喜欢的话。
*   Jest 有额外的 UI 测试功能，比如可以比较的 HTML 快照等等。

## 奖金

*   http-server 一个 npm CLI 工具，在当前目录下运行 http-server。对于简单的前端项目非常有帮助。

## 用什么？

取决于你需要什么。

我是一名前端开发人员，经常从 npm、Webpack 和 http-server 开始。

Npm 让我能够安装第三方库并定义一些脚本，例如运行 Webpack 或 http-server。

Webpack 有各种文件类型的加载器和插件，JavaScript、CSS、Less、SASS、TypeScript 等等。当我需要这些的时候，我只需要安装它们并把它们添加到我的 webpack 配置中，然后继续。通常加载器只是将我上面提到的编译器集成到 Webpack 管道中的包装器，所以我不必直接处理编译器。

为了证明概念，我经常使用像 [unpkg](https://unpkg.com/#/) 这样的内容交付网络，所以我不需要安装任何东西。Unpkg 允许对 npm 存储库中的所有包进行 HTTP 访问。

只是一个带有一些`<script>`标签的 HTML 文件。

## 结论

好吧，如果有更多的教程，在他们抽象出一些复杂的工具之前，退后一步，尝试解释事情是如何在一个基本的水平上工作的，那就好了。

但是如果你想构建快速可靠的 Web 应用程序，你需要一些这样的工具或者自己编写。