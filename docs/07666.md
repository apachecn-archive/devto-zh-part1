# 我应该去吗？使用 Go 编程语言的利与弊

> 原文：<https://dev.to/bugfenderapp/should-i-go-the-pros-and-cons-of-using-go-programming-language>

2016 年是 [Go](https://golang.org/) 的黄金年。

谷歌自己的开源编程语言被 TIOBE 指数评为今年最受欢迎的语言。虽然它还没有进入十大最常用的语言，但它在这一年中的受欢迎程度增长最快，并继续受到(gopher？没有吗？)各大玩家；随着二月份接近尾声，它已经稳坐第 14 位。对于一门只有 8 年历史的语言来说，这已经不错了。

在 Bugfender，我们已经使用 Go 一年多了。"*那又怎样？*“我们听到你大喊:“*我为什么要听你的？*

原因如下:

*   我们已经获得了将 Go 应用于真实产品的实践经验。
*   我们的服务每天处理超过 5000 万个日志。
*   我们的 SDK 安装在全球超过 950 万台设备上。
*   我们每天处理超过 200GB 的传入数据。
*   我们不是谷歌。

因此，我们渴望分享使用 Go 的经验。只是，我们还没有完全达成一致。

事实上，我们的两位编程专家已经针锋相对，以 gopher 的方式挖掘了这种多产编程语言的优缺点。

## 让战斗开始吧。

Aleix 开门见山地说:Go 的易用性。

> “核心语言非常简单，类似于 C/C++。你可以很快掌握基础知识，尤其是如果你已经熟悉其他语言的话。也许你会失去其他语言中的一些功能，但是代码的简单性让任何阅读它的人都很容易理解。”

他也是并发特性的爱好者，在 Go 的例子中是通过它的“Goroutines”来实现的:

> “如果您尝试过使用其他语言编写多线程代码，您可能已经知道这有多痛苦。Go 是我用过的运行后台编码任务最简单的语言。像往常一样编写代码，然后在调用函数时添加 go 关键字。这就是它的全部！”

Jordi 对易用性没有异议，但指出开发人员的人才库相对较浅:

> “假设你为了掌握这门语言而开始了一个 Go 项目，但是这个项目发展成了一个更大的项目。你需要雇些帮手。你已经克服了学习一门新语言的困难，但你面临着一个全新的问题:找到一个足够精通围棋的人，让他们不必像你一样从头开始学习。”

## 虚拟机和依赖项

Aleix 现在感觉很自信，并转向了依赖性管理:

> “您的代码被编译成不需要虚拟机的二进制文件，因此在部署或分发您的应用程序时，您无需担心任何依赖性。由于没有虚拟机来运行您的代码，该应用程序将比依赖虚拟机的应用程序使用更少的资源。”

Jordi 同意该功能本身是一个优势:

> 诚然，大多数编程语言没有依赖管理器；Go 有一个这个事实很酷。依赖关系可以在依赖代码所在的相同文件中表达，这很好。除了 Go toolkit 之外，不需要使用其他工具来获取这些依赖关系。”

那么笑容满面了？良好的...

> “这是一个问题，您无法指定要使用的依赖项的特定版本。这意味着将使用依赖关系的最新版本(“主分支”)。这导致了各种各样的错误，比如不同的贡献者使用不同版本的库，或者因为依赖关系的改变而导致代码中断。"

当前的最佳实践修复？

> "创建所有依赖项的本地副本。这被称为“出售工作空间”。它会导致相同文件的大量拷贝，并且仍然是一个相当手动且容易出错的过程。”

[![](img/2649f3ded0cf7bb64e42df5b476d529c.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--nyhIFgS2--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://bugfender.com/wp-content/uploads/2017/05/go-pro-cons-2.jpg)

## 编码

Aleix 在依存回合中被 Jordi 刺了几下，但仍处于战斗状态:

> “Go 强制您使用特定的编码风格，但是它为您提供了通过遵循规则来轻松格式化代码的工具。你再也不会因为是谁写的代码而陷入编码风格的混乱。”

Jordi 反驳说，这种语言可能相当固执己见:

> “有时候有点痛苦。你必须与大多数编程语言认为是警告的编译器错误作斗争。”

此外，他还举了一个例子:

> "不允许循环依赖。我知道它们在软件设计中是一件坏事。但是它发生了。你有两套不同的代码(在 Go 中它们被称为“包”)，它们并不是被设计成相互依赖的，但是在某些时候它们变得相互依赖了。应用软件工程中普遍接受的最佳实践，您应该重构您的代码，要么移除这种依赖性，要么使它成为一个单独的包(因为一个包不能离开另一个包而存在)。在围棋中，这不是最佳实践，而是必须的。请做好准备，因为如果没有一个好的 IDE 可以帮你重构(我们还没有找到)，这可能会花费你几个小时的时间。”

哎哟。Aleix 能还手吗？

> “程序对警告要求严格，是的。如果代码中没有使用某个变量，将会显示一个错误。但这只会产生更好的代码。”

## 标准程序库

这场争斗越来越激烈了。让我们转到标准库。Aleix 是一个粉丝:

> “标准库具有广泛的内置功能，允许您非常快速地编写代码。”

乔迪跳了进来:

> Go 附带了一种叫做“切片”的东西，这是一种由静态数组支持的稍微方便一些的数据结构。如果你想使用一些更复杂的东西——比如将数据存储在 hashmap、treemap 或 hashset 中，那么你就没那么幸运了。语言中没有关于这些事情的规定。”

艾里克斯感觉到了他的机会并抓住了:

> “简单就是简单，围棋就是优秀。想编码/解码一个 json 字符串？你可以用一行代码来做这件事。想写一个 web 服务器？有一个 http 库比你可以借鉴。我还可以继续……”

## 安全

阿莱从一只脚跳到另一只脚；他感觉很好，看起来很活泼:

> “Go 是静态类型的，因此可以避免动态语言带来的所有变量类型问题。它有一种独特的处理错误的方式，迫使开发人员仔细考虑每个错误案例。最后但同样重要的是，它有一个垃圾收集器；不需要像在 C/C++中那样担心内存泄漏或双重释放变量。”

乔迪回应道:

> “Go 中有一个明显的遗漏，使得它不那么安全:泛型。每一种现代编程语言都有泛型结构的概念。C++支持泛型已经有一段时间了。围棋没有。”“在 Go 中，你将不得不求助于类型检查和类型转换。这使得您的代码混乱且不安全。Go 并没有排除未来包含泛型的可能性，但是它还没有实现。在我看来，这是这种语言还太年轻的又一个迹象。”

但是艾里克斯回来了:

> “如果你担心代码质量和健壮性，那就开始写测试吧。Go 使这一过程变得非常简单，只需创建一个新的 go 文件，该文件与您要测试的文件同名并添加后缀\\\\\\\\\\\\\\\\\\\'即可。您的代码已经过测试，您可以安心睡觉了。"

[![](img/aa08122dcf1ff3c95a37bb4c900e9def.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--r6OTEuUK--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://bugfender.com/wp-content/uploads/2017/05/go-pro-cons-3.jpg)

## 调试和分析

Jordi 对调试有话要说:

> “Go 仍然是一个年轻平台的另一个标志是缺乏一个可靠的调试器。据我们所知，Delve 是最好的，但即使是他们的开发者也警告说,[在他们的文档中它处于“1.0 之前的状态】。Delve 是一个命令行实用程序，但是如果能将它集成到您的 IDE 中就更好了。我们让它在 Visual Studio 代码中运行，偶尔会失败。我们也用 IntelliJ IDEA 试过了，效果不错，但还可以大大改进。如果调试很困难，那么剖析就更棘手了。我们从未设法让分析器在命令行中工作。我们不知道它的任何 IDE 集成。"](https://github.com/derekparker/delve)

[![](img/cdce6b19643e0af215db37d67f002ff5.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--US1KocVj--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://bugfender.com/wp-content/uploads/2017/05/go-pro-cons-4.jpg)

## 证明文件

我们现在进入了最后阶段。两家开发商看起来都很疲惫；他们最喜欢的就是戴上一副耳机，尽情地进行编码。但他们仍在奋力拼搏。

以下是关于文档的 Aleix:

> “在记录自己的代码方面，Go 确实表现出色。有一个标准的方法来记录你所有的函数和库，以及在正确的时间使用正确的工具。当你在没有文档的情况下编写函数时，你甚至会得到警告。”

乔迪远未被打败:

> “GitHub 包含许多半成品库，正在大量开发中(这意味着 API 会经常崩溃)，或者被放弃。一个这样的例子是 [gorm](https://github.com/jinzhu/gorm) ，我们在 Bugfender 使用的 orm，它最近已经被重写。一年前我们开始的时候，马提尼是最好的酒之一，现在已经被放弃了。大多数 StackOverflow 问题都是关于[的基本话题](http://stackoverflow.com/questions/tagged/go):人们如何使用 Go toolkit，库不工作，奇怪的编译错误等等。关于 Go 编码的博客文章也是如此。”

## 最后一句话

我们的开发者很沮丧，但是很满意。喘着粗气，他们开始拖着疲惫的身体回到自己的办公桌前。

艾里克斯转过身，插了最后一句话:

> “你还在用 PHP 写代码吗？或者更糟，C++？如果你是，你是老派的。跟上程序，开始使用 Go——硅谷最热门的编程语言。大家都知道 NodeJS。学习 Go 并向世界展示您是一名铁杆开发者！”

那么，应该宣布谁是赢家呢？你支持艾里克斯，还是支持乔迪？

虽然我们有时对 Go 有不同的看法，但我们很高兴能够探索这门语言所能提供的东西。如果你有任何反馈，我们希望听到你的反馈，特别是如果你是一个有经验的 Go 开发者！

*[在 bugfender.com](https://bugfender.com/blog/go-pros-cons-using-go-programming-language/)*的博客上阅读本文