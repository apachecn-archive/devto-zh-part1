# 系统设计面试剖析

> 原文：<https://dev.to/fahimulhaq/anatomy-of-a-system-design-interview>

*注:这篇文章最初发表在 [Hackernoon](https://hackernoon.com/anatomy-of-a-system-design-interview-4cb57d75a53f) 上。*

在过去的两年里，我参加了 100 多次系统设计面试，并帮助工程师准备面试。基于这一经验，我设计了一套步骤，有助于解决系统设计面试问题。在这篇文章中，我将重点讨论以下主题:

*   如何准备系统设计面试？
*   如何用一种系统的方法来处理一个问题，以最大化你成功的机会？

我之前写过几篇博文，列举了编程面试中的常见错误:[如何在 45 分钟的系统设计面试中不设计网飞](https://dev.to/fahimulhaq/how-not-to-design-netflix-in-your-45-minute-system-design-interview)和[如何在 45 分钟的编码面试中不成功](https://dev.to/fahimulhaq/how-not-to-succeed-in-your-45-minute-coding-interview)。

我之前的帖子得到了很多反馈(和邮件)。最常见的问题是受访者应该如何对待系统设计访谈。有这么多的概念，方向，组成部分，利弊，一个人无法在 4 小时内描述所有这些，更不用说在 45 分钟内。

> 与白板编码面试不同，系统设计面试中很少有“啊哈”时刻。

换句话说，系统设计面试与其说是关于运气，不如说是关于获取知识的艰苦工作。最后，你在面试中的表现取决于以下两个因素。

*   你通过学习或实践获得的知识。
*   你表达思想的能力。

当公司问设计问题时，他们想评估你在设计大规模分布式系统方面的设计技能和经验。你在这类面试中的表现往往决定了你的招聘级别(在某些情况下甚至决定了薪水)。因此，为这些面试做好计划和准备对你最有利。

***如果你在找资源准备系统设计和编程面试，看看:***

1.  [钻研系统设计面试](https://www.educative.io/courses/grokking-the-system-design-interview)。
2.  [寻找编码面试:编码问题的模式](https://www.educative.io/courses/grokking-the-coding-interview)。

## 系统设计面试的 7 个步骤

在你学习的时候，这里有一个我推荐的解决每个问题的 7 步框架。为了保持示例的真实性，我们将挑选一个常见的面试问题:**设计一个像 Twitter** 这样的可扩展服务，并看看每个步骤如何应用于 Twitter 的设计。

### 第一步:需求收集:

许多候选人认为系统设计面试都与“规模”有关，忘记了在面试中强调“系统”部分。

> 在你扩展它之前，你需要有一个工作的“系统”。

作为你面试的第一步，你应该提问以找到问题的确切范围。设计问题大多是开放式的，它们没有一个正确的答案。这就是为什么在面试的早期澄清含糊之处变得至关重要。花时间明确定义系统最终目标的候选人，总是有更好的成功机会。

在进入下一步之前，这里有一些关于设计 Twitter 的问题需要回答:

1.  谁可以发布推文？(答案:任何用户)
2.  谁可以阅读这条推文？(答案:任何用户——因为所有推文都是公开的)
3.  *一条推文会包含照片或视频吗(答案:目前，只有照片)*
4.  一个用户可以关注另一个用户吗？(回答:是)。
5.  用户可以喜欢一条推文吗？(回答:是)。
6.  用户反馈中包含了什么(答案:你所关注的每个人的推文)。
7.  提要是按时间顺序排列的推文列表吗？(回答:目前来说，是的)。
8.  用户可以搜索推文吗(答案:可以)。
9.  *我们是在设计客户端/服务器交互还是后端架构，或者两者兼而有之(答:我们想了解客户端/服务器之间的交互，但我们将关注如何扩展后端)。*
10.  *总用户有多少(答:我们预计第一年达到 2 亿用户)。*
11.  *日活跃用户有多少(每天 1 亿用户签到)。*

如果你注意到了，这些答案中的一些与真实的 Twitter 并不完全相似，这没关系。这是一个假设的问题，旨在评估你的方法。你问这些问题只是为了确定你今天要解决的问题的范围。例如，你现在不必担心处理视频或使用算法生成时间线等问题。

### 第二步:系统界面定义

如果您已经收集了需求，并且能够识别系统公开的 API，那么您就完成了 50%。

定义系统需要什么 API。这不仅会建立系统所期望的精确契约，还会确保您没有任何错误的需求。我们类似 Twitter 的服务的一些例子如下:

***postTweet** (user_id，tweet_text，image_url，user_location，timestamp，…)*
***generate timeline**(user _ id，current _ time)*
***recorduserteelike**(user _ id，tweet_id，timestamp，…)*

### 第三步:信封背面容量估算

估计你将要设计的系统的规模总是一个好主意。这也将有助于您以后关注扩展、分区、负载平衡和缓存。

1.  系统的预期规模(例如，新推文的数量、推文浏览量、每秒生成多少条时间线。等。)

2.  我们需要多少存储空间？这将取决于用户能否在推文中上传照片和视频？

3.  我们预期的网络带宽使用率是多少？这对于决定我们如何管理流量和平衡服务器之间的负载至关重要。

### 第四步:定义数据模型

在面试的早期定义数据模型将阐明数据如何在系统的不同组件之间流动。稍后，它将指导您实现更好的数据分区和管理。考生应该能够识别系统的各种实体，它们如何相互作用，以及数据管理的不同方面，如存储、传输、加密等。以下是我们类似 Twitter 服务的一些实体:

**User** : UserID、Name、Email、DoB、CreationData、LastLogin 等。
**推文**:推文、内容、推文位置、编号、时间戳等。
**用户如下** : UserdID1，UserID2
**收藏夹推文** : UserID，tweetid，TimeStamp

我们应该使用哪个数据库系统？NoSQL 喜欢 Cassandra 最适合我们的需求，或者我们应该使用类似 MySQL 的解决方案。我们应该使用什么样的 blob 存储来存储照片和视频？

### 第五步:高层设计

画一个框图，用 5-6 个方框表示您系统的核心组件。您应该确定足够的组件来解决端到端的实际问题。

对于 Twitter，从高层次上来说，我们需要多个应用服务器来服务所有的读/写请求，在它们前面有负载平衡器来分配流量。如果我们假设我们将有更多的读取流量(与写入相比)，我们可以决定使用单独的服务器来处理读取和写入。在后端，我们需要一个高效的数据库，可以存储所有的推文，并支持大量的阅读。我们还需要一个分布式文件存储系统来存储照片(和视频)以及搜索索引和基础设施，以便能够搜索推文。

### 第六步:选定部件的详细设计

深入挖掘 2-3 个组件；面试官的反馈应该总是引导你，她希望你进一步解释系统的哪一部分。你应该能够提供不同的方法，它们的优点和缺点，为什么你会选择一个？记住没有唯一的答案，唯一重要的是在考虑系统约束的同时考虑不同选项之间的权衡。例如

1.  既然我们将存储大量的数据，我们应该如何划分我们的数据以将它分布到多个数据库？我们是否应该尝试将一个用户的所有数据存储在同一个数据库中？它会导致什么问题？

2.  我们如何处理高流量用户，例如拥有数百万粉丝的名人？

3.  由于用户的时间表将包含最近(和相关)的推文，我们是否应该尝试以一种优化的方式存储我们的数据，以扫描最新的推文？

4.  为了加快速度，我们应该在哪个层引入多少缓存？

5.  哪些组件需要更好的负载平衡？

### 第 7 步:识别和解决瓶颈

试着讨论尽可能多的瓶颈和缓解它们的不同方法。

1.  我们的系统中是否存在单点故障？我们正在做什么来减轻它？

2.  我们是否有足够的数据副本，以便在失去几台服务器时，我们仍能为用户提供服务？

3.  同样，我们是否有足够多的不同服务的副本在运行，以至于一些故障不会导致整个系统关闭？

4.  我们如何监控我们服务的性能？每当关键组件出现故障或性能下降时，我们会收到警报吗？

* * *

简而言之，由于软件设计面试的非结构化性质，有明确计划解决问题的候选人有更好的成功机会。

同样，如果您正在寻找准备系统设计和编程面试的资源，请查看:

1.  [钻研系统设计面试](https://www.educative.io/courses/grokking-the-system-design-interview)。
2.  [寻找编码面试:编码问题的模式](https://www.educative.io/courses/grokking-the-coding-interview)。

面试愉快！

* * *

法希姆是[教育机构](https://www.educative.io)的联合创始人。我们正在为软件工程师和教师构建下一代学习平台。学生利用互动课程学习。教师可以使用我们的课程生成器快速创建和发布交互式课程。如果你有兴趣发布课程或了解更多，请随时联系。