# 为什么我相信 GraphQL 会取代 REST

> 原文：<https://dev.to/martijnwalraven/why-i-believe-graphql-will-come-to-replace-rest>

GraphQL 是一种对产品开发人员友好且高效的从服务器获取结构化数据的方法，旨在替代 REST。它于 2012 年在脸书开发，四年多来一直为主要的 iOS 和 Android 应用程序提供支持，现在正被数十个脸书本地和网络应用程序使用。自从去年[公开宣布](https://code.facebook.com/posts/1691455094417024/graphql-a-data-query-language/)并开源以来，围绕不同环境和语言的实现和工具已经有了很多活动。Pinterest、Intuit、Coursera 和 Shopify 等公司已经在自己的应用中采用了 GraphQL，几周前 GitHub 宣布了他们的[新公共 GraphQL API](http://githubengineering.com/the-github-graphql-api/) 。我相信这只是一个开始，我们将在明年看到 GraphQL 的大量使用。

本月晚些时候，我将在 [ReactiveConf](https://reactiveconf.com) 上讲述 GraphQL 众多优势背后的一个主要观点:使用类型系统来展示服务器的功能，并改善客户端开发人员的体验。

## RESTful APIs 是一种令人不安的妥协

对于 REST，在有效满足特定客户端的数据需求和保持端点数量可管理之间存在持续的紧张关系。这种紧张的原因是服务器定义了端点返回什么数据，而客户端只是请求它。特别是在移动应用程序中，执行单独请求或请求无关数据的开销通常是不可接受的，因此我们被迫添加带有自定义响应结构的特设端点。

这意味着客户机和服务器是紧密耦合的，因为不断变化的客户机数据需求需要服务器上相应的变化。同时，REST 没有给我们一个正式的方法来协调这些变化。REST 的一个主要难点是在支持旧客户端的同时有效地开发 API。这通常会导致端点返回当前客户端不再需要的数据，并有无意中中断旧客户端的危险。这也可能使客户团队依赖后端团队，减缓产品开发。

## 告诉服务器你需要什么

GraphQL 基于这样一种理念:让客户机根据服务器提供的功能指定自己的数据需求。依靠不断扩展的预定义 REST 端点集来覆盖所有基础的混乱局面已经一去不复返了，因为 GraphQL 公开了一个端点，它在一个单一的结构化响应中返回您所要求的确切数据。为了实现这一点，GraphQL 定义了一种*应用程序查询语言*，这是一种专门为产品开发人员设计的语言。

现在，客户机编写描述所需结果数据确切形状的查询，而服务器通过评估查询来构建结构化响应，而不是协调请求并将来自不同端点的响应缝合在一起。

## 类型如何启用协调

这个过程的基础是服务器定义一个模式，一个精确描述什么数据对客户机可用的类型系统。并且客户根据这种类型系统指定他们想要的响应的确切结构。

因此，类型系统充当不同系统和团队之间的正式协调机制。这也使得使用验证和其他强大的工具来确保在构建时请求可以在运行时被服务器满足成为可能。类型系统可以保证我们从代码中访问的数据实际上是作为我们执行的查询的一部分提取的。

作为这种工具的一个例子，我目前正在开发一个原生的 iOS 客户端，它使用代码生成来生成特定于查询的模型类型。实际上，这意味着您现在可以依靠 Swift 类型检查器来确保数据访问中的错误在编译时显示出来。类似的类型检查可以使用 web 客户端的 Flow 或 TypeScript 或 React 原生应用程序来执行，我希望在 ReactiveConf 的演讲中展示一些早期的例子。

## 支持不断发展的数据需求

GraphQL 以一种非常自然的方式支持客户机随着时间的推移不断进化。如果模式已经包含了您需要的数据，那么根本不需要对服务器进行任何更改。如果您确实需要向模式中添加一个字段，这不会影响现有的客户端。事实上，在脸书，他们已经非常小心地不引入向后不兼容的模式变化。令人惊讶的是，脸书的 GraphQL 端点仍然支持 4 年前发布的 iOS 和 Android 应用程序版本！现在有超过 1000 个活动版本连接到同一个端点，没有任何重大问题。

同样，使用类型系统在这里非常有用，因为它允许您在构建时检查对模式的更改是否向后兼容，并且不会破坏旧的客户端。这是脸书在建造过程中做的事情。

## 我们希望收到您的来信！

我很高兴能与 GraphQL 合作，我相信它的架构很有希望帮助改善数据驱动应用程序的开发者体验。如果你有经验可以分享，或者愿意为我们作为 [Apollo](http://dev.apollodata.com) 的一部分正在开发的工具做出贡献，请加入 ReactiveConf 或与我联系。