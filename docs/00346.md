# 我认为我对密码学的了解

> 原文:[https://dev . to/dwd/things-I-think-I-know-about-cryptography-ifj](https://dev.to/dwd/things-i-think-i-know-about-cryptography-ifj)

正如我以前说过的，我不是一个密码学家。

尽管如此，我认为我对密码学还是有一些了解的。

这里有一些。请在评论中随意指出错误或补充。

## 威胁模式

没有威胁模型的安全是没有意义的。为了防范某些东西，你需要弄清楚你要防范的东西是什么。这比你想象的要简单——我们大多数人都习惯于使用用例语句。所以扮演攻击者的角色，看看你能想到什么。

“作为一名诈骗犯，我想获得您的信用卡详细信息，这样我就可以购物”

例如，那个可能会告诉您，您想要仔细加密信用卡的详细信息。

## 假设失败

你会试着让 XSS 网站免费，对吗？这里没有 SQL 注入。您将不断地进行测试，以确保新技术不适用(或者很快得到缓解)。

但是您还需要假设，攻击者仍然会以某种方式突破您的防御，渗透您的整个数据库。相应地设计。除非在线需要，否则数据不应在线保存。如果您可以使用单向散列，那么您应该这样做。如果你能把数据从在线数据库中完全删除，那就更好了。

在军事术语中，这被称为纵深防御。

## 明文和明文等价物

明文是你加密的东西，或者散列，或者其他什么东西。

等同于明文的地方是你没有明文本身，但你有一些东西可以用在适当的地方。

一个例子是摘要认证，其中服务器的数据库(可以)存储密码的散列——但是您可以使用它登录。

明文的等价物是欺骗性的——例如，它们确实提供了对密码重用的防御，但是并没有提供您可能认为的所有保护。

## 随机，或相同

你的随机数发生器必须是真正随机的。如果不是——即使有最轻微的模式可以检测到——那么你就在削弱你的安全性。在如何播种和使用你的 RNG 时要非常小心。密码学通常使用“密码安全随机数生成器”。希望通过不使用你自己的密码，你不用担心。

其他一切都必须相同。人们已经成功地从定时、功率波动、射频输出...因此，如果你解密数据是不正确的，或者你的用户在认证期间不存在，确保你尽可能地走过场。听起来似乎不可能从一个繁忙的系统中得到任何有用的东西。这很难，但比你想象的要容易得多。即使是通常用于比较哈希值的普通比较函数也容易受到攻击，使得狡猾的攻击者能够逐渐暴露哈希值的每个字节。

## 哈希值惊人

哈希函数——如果您愿意，也可以称之为加密消息摘要算法——是一种神奇的函数，它接受一组数据，然后吐出一个固定长度的数据块(即“哈希”),它是:

*   很难确定原始数据是什么[第二次原像攻击]
*   很难找到给出相同散列的其他数据[第一次原像攻击]，包括偶然的。

如果您不确定使用哪个散列，并且是出于安全相关的原因，请使用长度适合您使用的 SHA-2。

如果你不是为了安全而使用它，有很多更快的散列。

## 滚动自己的密码

千万不要这样。

始终使用已建立的库，并尽可能使用最高级别的现有构建块。请仔细阅读文档，了解在调用代码时如何维护安全性的建议。

拥有自己的密码被普遍认为是不好的。

除了作为一次学习经历。

## RSA 密码术

RSA 密钥对由一个加密密钥(公钥)和一个解密密钥(私钥)组成。你可以用它们做两件事:

*   使用加密密钥对消息进行加密，只有解密密钥的所有者才能解密。
*   用解密密钥对消息进行解密，对消息进行签名。然后，任何人都可以通过用加密密钥加密来验证签名。

因此，如果您使用的是 RSA 加密，请确保您不会被诱骗对您加密的数据进行签名。真正的密码系统可以防止这种情况(有时使用单独的密钥进行加密和签名)。

## 迪菲·赫尔曼

正确的叫法是迪菲-赫尔曼-默克尔。当所有通信都必须通过不受信任的信道进行时，这是一种创建共享秘密的方式。但是，它不能进行身份验证。

短暂的 Diffie-Hellman 或 DHE(或椭圆曲线变体的 ECDHE)用于制作仅用于一个会话的一次性密钥，这意味着攻击者无法通过稍后(甚至当时)获得您的(静态)私钥来解密会话。

## 椭圆曲线

所有的密码学都是基于一个难以逆转的数学函数。例如，Diffie-Hellman 通常基于离散对数，RSA 基于大整数的因式分解。椭圆曲线加密是另一个例子，它基于一些只有数学家关心的奇怪的东西。

我们唯一关心的是，对于给定的密钥大小，它提供了更强的加密。

## AES

AES 是一种对称加密算法。它非常强大和快速，但是您需要弄清楚如何在没有其他人知道的情况下就一个密钥达成一致。你可以用 RSA 加密密钥，或者用 DH(或 ECDH)同意一个。

## 异或

XOR 是最便宜也是最好的对称加密算法，尽管它也是最不灵活的。

如果你能找到一个完全随机的密钥，长度和你的数据完全一样，XOR 就是你的朋友。但是你只能使用这个密钥一次——如果你不止一次地使用它，那么得到明文数据是微不足道的。

## 位

当密码学家谈论“一点点安全”时，他们真正的意思是“要尝试多少次才能猜出 2 的幂的密钥”。没有安全措施意味着你知道钥匙。一点意味着你要试两次。两位是四次尝试。10 位，1024 次尝试。我们通常的目标是大约 128 位安全，或者 340，282，366，920，938，463，463，374，607，431，768，211，456 次尝试。

在一个完美的世界里，一个 128 位的密钥可以产生 128 位的安全性，对于 AES 来说差不多也是这样。为了从椭圆曲线加密中得到同样的结果，我们需要 256 位密钥。RSA 需要 3072 位密钥，而经典 DH 需要 4096 位密钥。3DES，196 位密钥，只能产生 112 位的安全性——这就是为什么我们不再使用它了。

然而，我们都使用 256 位密钥的 AES。请注意，AES256 的强度不是两倍，而是 128 倍，远远超出了任何人的能力。那为什么呢？

## 量子密码分析

我们还没有量子计算机，但普遍的共识是，我们很可能会有，而且会很快。一些研究人员已经找到了破解我们目前使用的密码算法的可行算法。

例如，Shor 的算法攻击了其中一些，并以相当实用的速度“解决”了 DH 中使用的离散对数问题。它还攻击椭圆曲线。有趣的是，256 位 ECDH 实际上比 DH 本身要弱得多，因为老式的 4096 位 DH 需要一台量子计算机，其功能是同等强度 ECDH 的一半。

其他算法攻击经典密码术取得了不同程度的成功——例如，AES 的强度被量子攻击降低了一半——这就是为什么我们已经把它提高了一倍。

## 其他东西

请在评论中补充更多。或者直接告诉我我做错了什么(肯定是什么)。