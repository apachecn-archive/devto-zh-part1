# 我怎么去

> 原文:[https://dev.to/andydangerous/how-i-git](https://dev.to/andydangerous/how-i-git)

*和往常一样，这个帖子最初出现在[这里](http://andymention.com/how-to-git/)T3】*

我敢打赌你会用 git(或者 Subversion 什么的，但是我知道 git，所以我写的就是这个)。这篇文章对你来说可能是评论，但我有自己的看法，我想在网上分享！Jason McCreary 写了一些关于 git 的帖子，包括这篇总结得比我想的还要好的文章。[来看看吧。](https://dev.to/gonedark/a-closer-look-at-git-rebase)

#### [](#why-do-we-use-git-what-problem-are-we-trying-to-solve)我们为什么要用 git 我们试图解决什么问题？

*   恢复——您希望能够自信地撤销破坏代码的更改。
*   跟踪变更——您希望能够找出实现一个特性所必需的东西，或者各种代码如何与其他代码相关联。大多数情况下，你想知道为什么有人选择写一段特定的代码。

显然还有很多其他的优秀特性，但是这两个就足够了。

#### [](#formative-moments)形成性的时刻

在我作为软件开发人员的最初几个月，我在 git 上犯了两个非常难忘的错误。

第一个问题与我已经工作了几天的一个特性有关。我习惯于在一天结束时进行相当原子化的提交和 WIP(工作进行中)提交。我不确定这种情况发生时我的对子在哪里，但在某个时候，我结束了将我的分支合并到主推中。不到半个小时，一个聊天室就挤满了关于 master 中合并提交和 WIP 提交的问题。我非常尴尬，但另一个开发人员帮助解释了我应该做的事情(挤压和重定基底)。

第二次犯罪更严重。我把代码推给了 master，这破坏了一些东西。看到这里，我立即知道了问题所在，并决定修复它。我的解决方案是修复测试和代码，`amend`提交，并(强制)推回到 master。这个过程可能需要五分钟，我想没有人会知道。当然聊天很快又爆了。这一次，有人想知道为什么他们在几分钟前就重置了基础，却无法向 master 推送。我不得不再次确认自己是罪魁祸首。

回想起来，这些都是愚蠢的事情，但你可以打赌，我得到了教训。不要像我一样。遵循最佳实践，你的同事就不会讨厌你。

#### [](#some-bestpractices)一些最佳做法

假设您正在处理一个特性分支，并准备提交一个 PR，或者您更喜欢提交您的代码以供审查。

*   使您的分支保持最新。这有助于在处理分支时经常这样做，以确保您拥有来自 master 的最新提交。确保在创建 PR 或合并到 master 之前这样做。当我看到一个分支机构的 PR“提前 3 次提交，落后 30 次提交”时，我几乎总是会抱怨。
*   粉碎*许多*你的提交。这个有点争议，但没必要。请记住，您提交的全部目的是讲述一个连贯的故事(并且能够在出错时轻松恢复)。这意味着提交给 master 的内容不应该包含 WIP，也不应该包含“修复更多的打字错误”这样的内容。当在一个分支上工作时，无论你想做什么，都要记录下来，但是在掌握之前要把它们压扁。**我喜欢通过交互式 rebase 进行挤压。万一您确实需要恢复一个提交，每个特性有一个提交将确保您可以恢复整个事情，而不用中断主提交或处理合并提交。
*   50/72:消息是 50 个字符，描述在 72 - [处结束。这里](http://tbaggery.com/2008/04/19/a-note-about-git-commit-messages.html)是大约一千篇关于为什么 git 提交的 50/72 规则有意义的博文之一。许多工具都是围绕以某种方式显示的提交消息构建的。它内置在我的工具中，所以我甚至不用考虑它。这里有一点很重要，你应该在提交中添加注释。有足够的空间来解释你为什么做出某些选择或任何其他有用的背景。
*   从我的主分支中取出您的总合并提交。如果你遵循前面的几点，那么你的公关将会干净整洁，领先于大师。没有理由进行合并提交。如果你正在使用 Github，那么你可以“Rebase and Merge ”,或者如果你要走牛仔风格，那么你可以将你的分支合并到 master 中。了解:`git merge my-branch`甚至不会创建一个合并提交。这就像 git 告诉你你做得对。

#### [](#finally)终于

> "代码只需要在今天工作一次，但需要永远易于修改."
> ——桑迪·梅斯

git 提交历史的受众，就像代码本身一样，是您未来的自己和同事。让他们轻松点。这些建议一开始可能看起来很琐碎，很烦人，但是真的很容易习惯。好处远远超过任何代价。如有必要，别名`git blame`到`git praise`。

*一个项目的匿名合作者曾经合并了(他自己的)PR，该 PR 处于领先 3，落后 30 的状态。他最终加入了几周前的一些承诺，这打破了生产，是一个追踪的噩梦。不要成为“他”

**有时人们认为他们需要跟踪每一个提交、变更和死胡同，以此作为“说出真相”或保留上下文的一种方式。我认为一个干净的提交历史(在更改成为 master 之前)会讲述一个更好的故事。如果您担心保留决策的上下文，那么花一些额外的时间在提交消息上，并明确地讲述这个故事。
现在，一旦提交*是主控中的*，那么“说实话”的论点就有意义了。